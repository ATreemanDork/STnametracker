{"version":3,"file":"index.js","mappings":"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","sources":["webpack://sillytavern-nametracker/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://sillytavern-nametracker/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://sillytavern-nametracker/./style.css","webpack://sillytavern-nametracker/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://sillytavern-nametracker/./node_modules/css-loader/dist/runtime/api.js","webpack://sillytavern-nametracker/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://sillytavern-nametracker/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://sillytavern-nametracker/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://sillytavern-nametracker/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://sillytavern-nametracker/webpack/bootstrap","webpack://sillytavern-nametracker/webpack/runtime/compat get default export","webpack://sillytavern-nametracker/webpack/runtime/define property getters","webpack://sillytavern-nametracker/webpack/runtime/hasOwnProperty shorthand","webpack://sillytavern-nametracker/webpack/runtime/nonce","webpack://sillytavern-nametracker/./style.css?f696","webpack://sillytavern-nametracker/./src/core/debug.js","webpack://sillytavern-nametracker/./src/core/errors.js","webpack://sillytavern-nametracker/./src/core/context.js","webpack://sillytavern-nametracker/./src/core/settings.js","webpack://sillytavern-nametracker/./src/utils/notifications.js","webpack://sillytavern-nametracker/./src/utils/helpers.js","webpack://sillytavern-nametracker/./src/index.js"],"sourcesContent":["\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"./node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"./node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* Styles for the Name Tracker extension */\r\n\r\n.name-tracker-settings {\r\n    padding: 5px;\r\n}\r\n\r\n.name-tracker_block {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.name-tracker_block h4 {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    font-weight: bold;\r\n}\r\n\r\n/* Status Display */\r\n.name-tracker-status-block {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n}\r\n\r\n.name-tracker-status {\r\n    font-weight: bold;\r\n    color: var(--SmartThemeBodyColor);\r\n    padding: 5px;\r\n    text-align: center;\r\n}\r\n\r\n/* Character List */\r\n.name-tracker-character-list {\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    margin-top: 5px;\r\n}\r\n\r\n.name-tracker-character {\r\n    padding: 10px;\r\n    margin-bottom: 10px;\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n}\r\n\r\n.name-tracker-character:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n/* Active/loaded character styling (characters that are loaded in SillyTavern) */\r\n.name-tracker-character.main-character {\r\n    border-left: 3px solid #4CAF50;\r\n    background-color: rgba(76, 175, 80, 0.05);\r\n}\r\n\r\n.character-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.character-name {\r\n    font-weight: bold;\r\n    font-size: 1.1em;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.character-name .fa-user {\r\n    color: #4CAF50;\r\n    margin-right: 5px;\r\n}\r\n\r\n.character-name.ignored {\r\n    color: var(--SmartThemeQuoteColor);\r\n    text-decoration: line-through;\r\n}\r\n\r\n.character-badge {\r\n    display: inline-block;\r\n    padding: 2px 8px;\r\n    border-radius: 3px;\r\n    font-size: 0.75em;\r\n    font-weight: bold;\r\n    margin-left: 5px;\r\n}\r\n\r\n.character-badge.main-char {\r\n    background-color: #4CAF50;\r\n    color: #fff;\r\n}\r\n\r\n.character-badge.ignored {\r\n    background-color: #666;\r\n    color: #fff;\r\n}\r\n\r\n.character-badge.unresolved {\r\n    background-color: #ff9800;\r\n    color: #000;\r\n}\r\n\r\n/* Lorebook entry editor modal */\r\n.lorebook-entry-editor h3 {\r\n    margin-top: 0;\r\n    margin-bottom: 20px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.editor-section {\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.editor-section label {\r\n    display: block;\r\n    font-weight: bold;\r\n    margin-bottom: 5px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.editor-section small {\r\n    display: block;\r\n    margin-top: 3px;\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-size: 0.85em;\r\n}\r\n\r\n.editor-section input,\r\n.editor-section textarea {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.character-aliases {\r\n    font-size: 0.9em;\r\n    color: var(--SmartThemeQuoteColor);\r\n    margin-bottom: 8px;\r\n    font-style: italic;\r\n}\r\n\r\n.lorebook-entry-id {\r\n    display: inline-block;\r\n    margin-left: 10px;\r\n    padding: 2px 6px;\r\n    background: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    font-family: monospace;\r\n    font-size: 0.85em;\r\n    font-style: normal;\r\n    color: var(--SmartThemeQuoteColor);\r\n}\r\n\r\n.character-details {\r\n    font-size: 0.85em;\r\n    color: var(--SmartThemeBodyColor);\r\n    margin: 8px 0;\r\n    padding: 8px;\r\n    background: var(--SmartThemeBlurTintColor);\r\n    border-left: 2px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    line-height: 1.4;\r\n}\r\n\r\n.character-actions {\r\n    display: flex;\r\n    gap: 5px;\r\n    flex-wrap: wrap;\r\n    margin-top: 8px;\r\n}\r\n\r\n.character-actions .menu_button {\r\n    flex: 1;\r\n    min-width: 100px;\r\n    padding: 5px 10px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.menu_button.compact {\r\n    padding: 5px 10px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.name-tracker-empty {\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-style: italic;\r\n    text-align: center;\r\n    padding: 20px;\r\n}\r\n\r\n/* Ollama Settings */\r\n.ollama-settings {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border-left: 3px solid var(--SmartThemeBorderColor);\r\n    padding: 10px;\r\n    margin-top: 5px;\r\n    border-radius: 5px;\r\n}\r\n\r\n/* Merge Dialog */\r\n.merge-dialog {\r\n    padding: 15px;\r\n}\r\n\r\n.merge-dialog p {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.merge-dialog strong {\r\n    color: var(--SmartThemeBodyColor);\r\n    font-weight: bold;\r\n}\r\n\r\n.merge-warning {\r\n    color: #ff9800;\r\n    font-size: 0.9em;\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    background-color: rgba(255, 152, 0, 0.1);\r\n    border-left: 3px solid #ff9800;\r\n    border-radius: 3px;\r\n}\r\n\r\n/* Button states */\r\nbutton:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/* Flex utilities */\r\n.flexGap5 {\r\n    gap: 5px;\r\n}\r\n\r\n.flex1 {\r\n    flex: 1;\r\n}\r\n\r\n/* Progress indicator */\r\n.name-tracker-progress {\r\n    margin: 10px 0;\r\n    padding: 10px;\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    text-align: center;\r\n}\r\n\r\n.name-tracker-progress .progress-text {\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n}\r\n\r\n.name-tracker-progress .progress-bar {\r\n    width: 100%;\r\n    height: 20px;\r\n    background-color: var(--black50a);\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n}\r\n\r\n.name-tracker-progress .progress-fill {\r\n    height: 100%;\r\n    background-color: var(--SmartThemeQuoteColor);\r\n    transition: width 0.3s ease;\r\n}\r\n\r\n/* Character details preview (for potential future use) */\r\n.character-details {\r\n    display: none;\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    background-color: var(--black30a);\r\n    border-radius: 5px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.character-details.expanded {\r\n    display: block;\r\n}\r\n\r\n.character-details-section {\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.character-details-section:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.character-details-label {\r\n    font-weight: bold;\r\n    color: var(--SmartThemeQuoteColor);\r\n    margin-right: 5px;\r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 768px) {\r\n    .character-actions {\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .character-actions .menu_button {\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n/* Animation for new characters */\r\n@keyframes fadeIn {\r\n    from {\r\n        opacity: 0;\r\n        transform: translateY(-10px);\r\n    }\r\n    to {\r\n        opacity: 1;\r\n        transform: translateY(0);\r\n    }\r\n}\r\n\r\n.name-tracker-character.new {\r\n    animation: fadeIn 0.3s ease;\r\n}\r\n\r\n/* System Prompt Editor */\r\n.system-prompt-editor h3 {\r\n    margin-top: 0;\r\n    margin-bottom: 10px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.system-prompt-editor p {\r\n    margin-bottom: 10px;\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-size: 0.9em;\r\n}\r\n\r\n#system_prompt_editor {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    color: var(--SmartThemeBodyColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    padding: 10px;\r\n    resize: vertical;\r\n}\r\n\r\n#system_prompt_editor:focus {\r\n    outline: none;\r\n    border-color: var(--SmartThemeEmColor);\r\n}\r\n\r\n.system-prompt-actions button {\r\n    min-width: 100px;\r\n}\r\n\r\n#system_prompt_reset {\r\n    margin-right: auto;\r\n}\r\n\r\n\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./style.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/* Styles for the Name Tracker extension */\\r\\n\\r\\n.name-tracker-settings {\\r\\n    padding: 5px;\\r\\n}\\r\\n\\r\\n.name-tracker_block {\\r\\n    margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.name-tracker_block h4 {\\r\\n    margin-top: 10px;\\r\\n    margin-bottom: 10px;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n/* Status Display */\\r\\n.name-tracker-status-block {\\r\\n    background-color: var(--SmartThemeBlurTintColor);\\r\\n    border: 1px solid var(--SmartThemeBorderColor);\\r\\n    border-radius: 5px;\\r\\n    padding: 10px;\\r\\n}\\r\\n\\r\\n.name-tracker-status {\\r\\n    font-weight: bold;\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n    padding: 5px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n/* Character List */\\r\\n.name-tracker-character-list {\\r\\n    max-height: 400px;\\r\\n    overflow-y: auto;\\r\\n    border: 1px solid var(--SmartThemeBorderColor);\\r\\n    border-radius: 5px;\\r\\n    padding: 5px;\\r\\n    margin-top: 5px;\\r\\n}\\r\\n\\r\\n.name-tracker-character {\\r\\n    padding: 10px;\\r\\n    margin-bottom: 10px;\\r\\n    border: 1px solid var(--SmartThemeBorderColor);\\r\\n    border-radius: 5px;\\r\\n    background-color: var(--SmartThemeBlurTintColor);\\r\\n}\\r\\n\\r\\n.name-tracker-character:last-child {\\r\\n    margin-bottom: 0;\\r\\n}\\r\\n\\r\\n/* Active/loaded character styling (characters that are loaded in SillyTavern) */\\r\\n.name-tracker-character.main-character {\\r\\n    border-left: 3px solid #4CAF50;\\r\\n    background-color: rgba(76, 175, 80, 0.05);\\r\\n}\\r\\n\\r\\n.character-header {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    align-items: center;\\r\\n    margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.character-name {\\r\\n    font-weight: bold;\\r\\n    font-size: 1.1em;\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n}\\r\\n\\r\\n.character-name .fa-user {\\r\\n    color: #4CAF50;\\r\\n    margin-right: 5px;\\r\\n}\\r\\n\\r\\n.character-name.ignored {\\r\\n    color: var(--SmartThemeQuoteColor);\\r\\n    text-decoration: line-through;\\r\\n}\\r\\n\\r\\n.character-badge {\\r\\n    display: inline-block;\\r\\n    padding: 2px 8px;\\r\\n    border-radius: 3px;\\r\\n    font-size: 0.75em;\\r\\n    font-weight: bold;\\r\\n    margin-left: 5px;\\r\\n}\\r\\n\\r\\n.character-badge.main-char {\\r\\n    background-color: #4CAF50;\\r\\n    color: #fff;\\r\\n}\\r\\n\\r\\n.character-badge.ignored {\\r\\n    background-color: #666;\\r\\n    color: #fff;\\r\\n}\\r\\n\\r\\n.character-badge.unresolved {\\r\\n    background-color: #ff9800;\\r\\n    color: #000;\\r\\n}\\r\\n\\r\\n/* Lorebook entry editor modal */\\r\\n.lorebook-entry-editor h3 {\\r\\n    margin-top: 0;\\r\\n    margin-bottom: 20px;\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n}\\r\\n\\r\\n.editor-section {\\r\\n    margin-bottom: 15px;\\r\\n}\\r\\n\\r\\n.editor-section label {\\r\\n    display: block;\\r\\n    font-weight: bold;\\r\\n    margin-bottom: 5px;\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n}\\r\\n\\r\\n.editor-section small {\\r\\n    display: block;\\r\\n    margin-top: 3px;\\r\\n    color: var(--SmartThemeQuoteColor);\\r\\n    font-size: 0.85em;\\r\\n}\\r\\n\\r\\n.editor-section input,\\r\\n.editor-section textarea {\\r\\n    width: 100%;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.character-aliases {\\r\\n    font-size: 0.9em;\\r\\n    color: var(--SmartThemeQuoteColor);\\r\\n    margin-bottom: 8px;\\r\\n    font-style: italic;\\r\\n}\\r\\n\\r\\n.lorebook-entry-id {\\r\\n    display: inline-block;\\r\\n    margin-left: 10px;\\r\\n    padding: 2px 6px;\\r\\n    background: var(--SmartThemeBlurTintColor);\\r\\n    border: 1px solid var(--SmartThemeBorderColor);\\r\\n    border-radius: 3px;\\r\\n    font-family: monospace;\\r\\n    font-size: 0.85em;\\r\\n    font-style: normal;\\r\\n    color: var(--SmartThemeQuoteColor);\\r\\n}\\r\\n\\r\\n.character-details {\\r\\n    font-size: 0.85em;\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n    margin: 8px 0;\\r\\n    padding: 8px;\\r\\n    background: var(--SmartThemeBlurTintColor);\\r\\n    border-left: 2px solid var(--SmartThemeBorderColor);\\r\\n    border-radius: 3px;\\r\\n    line-height: 1.4;\\r\\n}\\r\\n\\r\\n.character-actions {\\r\\n    display: flex;\\r\\n    gap: 5px;\\r\\n    flex-wrap: wrap;\\r\\n    margin-top: 8px;\\r\\n}\\r\\n\\r\\n.character-actions .menu_button {\\r\\n    flex: 1;\\r\\n    min-width: 100px;\\r\\n    padding: 5px 10px;\\r\\n    font-size: 0.9em;\\r\\n}\\r\\n\\r\\n.menu_button.compact {\\r\\n    padding: 5px 10px;\\r\\n    font-size: 0.9em;\\r\\n}\\r\\n\\r\\n.name-tracker-empty {\\r\\n    color: var(--SmartThemeQuoteColor);\\r\\n    font-style: italic;\\r\\n    text-align: center;\\r\\n    padding: 20px;\\r\\n}\\r\\n\\r\\n/* Ollama Settings */\\r\\n.ollama-settings {\\r\\n    background-color: var(--SmartThemeBlurTintColor);\\r\\n    border-left: 3px solid var(--SmartThemeBorderColor);\\r\\n    padding: 10px;\\r\\n    margin-top: 5px;\\r\\n    border-radius: 5px;\\r\\n}\\r\\n\\r\\n/* Merge Dialog */\\r\\n.merge-dialog {\\r\\n    padding: 15px;\\r\\n}\\r\\n\\r\\n.merge-dialog p {\\r\\n    margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.merge-dialog strong {\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.merge-warning {\\r\\n    color: #ff9800;\\r\\n    font-size: 0.9em;\\r\\n    margin-top: 10px;\\r\\n    padding: 10px;\\r\\n    background-color: rgba(255, 152, 0, 0.1);\\r\\n    border-left: 3px solid #ff9800;\\r\\n    border-radius: 3px;\\r\\n}\\r\\n\\r\\n/* Button states */\\r\\nbutton:disabled {\\r\\n    opacity: 0.5;\\r\\n    cursor: not-allowed;\\r\\n}\\r\\n\\r\\n/* Flex utilities */\\r\\n.flexGap5 {\\r\\n    gap: 5px;\\r\\n}\\r\\n\\r\\n.flex1 {\\r\\n    flex: 1;\\r\\n}\\r\\n\\r\\n/* Progress indicator */\\r\\n.name-tracker-progress {\\r\\n    margin: 10px 0;\\r\\n    padding: 10px;\\r\\n    background-color: var(--SmartThemeBlurTintColor);\\r\\n    border: 1px solid var(--SmartThemeBorderColor);\\r\\n    border-radius: 5px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.name-tracker-progress .progress-text {\\r\\n    margin-bottom: 5px;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.name-tracker-progress .progress-bar {\\r\\n    width: 100%;\\r\\n    height: 20px;\\r\\n    background-color: var(--black50a);\\r\\n    border-radius: 10px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.name-tracker-progress .progress-fill {\\r\\n    height: 100%;\\r\\n    background-color: var(--SmartThemeQuoteColor);\\r\\n    transition: width 0.3s ease;\\r\\n}\\r\\n\\r\\n/* Character details preview (for potential future use) */\\r\\n.character-details {\\r\\n    display: none;\\r\\n    margin-top: 10px;\\r\\n    padding: 10px;\\r\\n    background-color: var(--black30a);\\r\\n    border-radius: 5px;\\r\\n    font-size: 0.9em;\\r\\n}\\r\\n\\r\\n.character-details.expanded {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.character-details-section {\\r\\n    margin-bottom: 8px;\\r\\n}\\r\\n\\r\\n.character-details-section:last-child {\\r\\n    margin-bottom: 0;\\r\\n}\\r\\n\\r\\n.character-details-label {\\r\\n    font-weight: bold;\\r\\n    color: var(--SmartThemeQuoteColor);\\r\\n    margin-right: 5px;\\r\\n}\\r\\n\\r\\n/* Responsive adjustments */\\r\\n@media (max-width: 768px) {\\r\\n    .character-actions {\\r\\n        flex-direction: column;\\r\\n    }\\r\\n    \\r\\n    .character-actions .menu_button {\\r\\n        width: 100%;\\r\\n    }\\r\\n}\\r\\n\\r\\n/* Animation for new characters */\\r\\n@keyframes fadeIn {\\r\\n    from {\\r\\n        opacity: 0;\\r\\n        transform: translateY(-10px);\\r\\n    }\\r\\n    to {\\r\\n        opacity: 1;\\r\\n        transform: translateY(0);\\r\\n    }\\r\\n}\\r\\n\\r\\n.name-tracker-character.new {\\r\\n    animation: fadeIn 0.3s ease;\\r\\n}\\r\\n\\r\\n/* System Prompt Editor */\\r\\n.system-prompt-editor h3 {\\r\\n    margin-top: 0;\\r\\n    margin-bottom: 10px;\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n}\\r\\n\\r\\n.system-prompt-editor p {\\r\\n    margin-bottom: 10px;\\r\\n    color: var(--SmartThemeQuoteColor);\\r\\n    font-size: 0.9em;\\r\\n}\\r\\n\\r\\n#system_prompt_editor {\\r\\n    background-color: var(--SmartThemeBlurTintColor);\\r\\n    color: var(--SmartThemeBodyColor);\\r\\n    border: 1px solid var(--SmartThemeBorderColor);\\r\\n    border-radius: 3px;\\r\\n    padding: 10px;\\r\\n    resize: vertical;\\r\\n}\\r\\n\\r\\n#system_prompt_editor:focus {\\r\\n    outline: none;\\r\\n    border-color: var(--SmartThemeEmColor);\\r\\n}\\r\\n\\r\\n.system-prompt-actions button {\\r\\n    min-width: 100px;\\r\\n}\\r\\n\\r\\n#system_prompt_reset {\\r\\n    margin-right: auto;\\r\\n}\\r\\n\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","\n      import API from \"!./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!./node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!./node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!./node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!./node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!./node_modules/css-loader/dist/cjs.js!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!./node_modules/css-loader/dist/cjs.js!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\r\n * Debug and logging utilities for Name Tracker extension\r\n * Provides module-specific logging, performance monitoring, and state inspection\r\n */\r\n\r\nconst MODULE_NAME = 'STnametracker';\r\n\r\nclass DebugLogger {\r\n    constructor() {\r\n        this.modules = new Map();\r\n        this.performanceMarks = new Map();\r\n        this.operationTraces = new Map();\r\n    }\r\n\r\n    /**\r\n     * Create a module-specific logger\r\n     * @param {string} moduleName - Name of the module\r\n     * @returns {Object} Logger instance with module-specific methods\r\n     */\r\n    createModuleLogger(moduleName) {\r\n        if (this.modules.has(moduleName)) {\r\n            return this.modules.get(moduleName);\r\n        }\r\n\r\n        const logger = {\r\n            log: (...args) => this.log(moduleName, 'log', ...args),\r\n            warn: (...args) => this.log(moduleName, 'warn', ...args),\r\n            error: (...args) => this.log(moduleName, 'error', ...args),\r\n            debug: (...args) => this.log(moduleName, 'debug', ...args),\r\n            trace: (operationId, message) => this.addTrace(moduleName, operationId, message),\r\n            startTimer: (timerName) => this.startTimer(moduleName, timerName),\r\n            endTimer: (timerName) => this.endTimer(moduleName, timerName),\r\n        };\r\n\r\n        this.modules.set(moduleName, logger);\r\n        return logger;\r\n    }\r\n\r\n    /**\r\n     * Internal logging method\r\n     * @param {string} moduleName - Module name\r\n     * @param {string} level - Log level\r\n     * @param {...any} args - Arguments to log\r\n     */\r\n    log(moduleName, level, ...args) {\r\n        if (!this.isDebugEnabled()) {\r\n            return;\r\n        }\r\n\r\n        const timestamp = new Date().toLocaleTimeString();\r\n        const prefix = `[${MODULE_NAME}:${moduleName}] ${timestamp}`;\r\n\r\n        switch (level) {\r\n            case 'error':\r\n                console.error(prefix, ...args);\r\n                break;\r\n            case 'warn':\r\n                console.warn(prefix, ...args);\r\n                break;\r\n            case 'debug':\r\n                console.debug(prefix, ...args);\r\n                break;\r\n            default:\r\n                console.log(prefix, ...args);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add operation trace for debugging workflows\r\n     * @param {string} moduleName - Module name\r\n     * @param {string} operationId - Unique operation identifier\r\n     * @param {string} message - Trace message\r\n     */\r\n    addTrace(moduleName, operationId, message) {\r\n        if (!this.isDebugEnabled()) {\r\n            return;\r\n        }\r\n\r\n        if (!this.operationTraces.has(operationId)) {\r\n            this.operationTraces.set(operationId, []);\r\n        }\r\n\r\n        this.operationTraces.get(operationId).push({\r\n            module: moduleName,\r\n            timestamp: Date.now(),\r\n            message: message,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get trace history for an operation\r\n     * @param {string} operationId - Operation identifier\r\n     * @returns {Array} Trace entries\r\n     */\r\n    getTrace(operationId) {\r\n        return this.operationTraces.get(operationId) || [];\r\n    }\r\n\r\n    /**\r\n     * Start performance timer\r\n     * @param {string} moduleName - Module name\r\n     * @param {string} timerName - Timer identifier\r\n     */\r\n    startTimer(moduleName, timerName) {\r\n        const key = `${moduleName}:${timerName}`;\r\n        this.performanceMarks.set(key, performance.now());\r\n    }\r\n\r\n    /**\r\n     * End performance timer and log duration\r\n     * @param {string} moduleName - Module name\r\n     * @param {string} timerName - Timer identifier\r\n     * @returns {number} Duration in milliseconds\r\n     */\r\n    endTimer(moduleName, timerName) {\r\n        const key = `${moduleName}:${timerName}`;\r\n        const startTime = this.performanceMarks.get(key);\r\n\r\n        if (startTime === undefined) {\r\n            this.log(moduleName, 'warn', `Timer '${timerName}' was not started`);\r\n            return 0;\r\n        }\r\n\r\n        const duration = performance.now() - startTime;\r\n        this.performanceMarks.delete(key);\r\n\r\n        this.log(moduleName, 'debug', `Timer '${timerName}': ${duration.toFixed(2)}ms`);\r\n        return duration;\r\n    }\r\n\r\n    /**\r\n     * Check if debug mode is enabled\r\n     * @returns {boolean} Debug mode status\r\n     */\r\n    isDebugEnabled() {\r\n        // This will be overridden by main.js to connect to settings\r\n        return true; // Default during initialization\r\n    }\r\n\r\n    /**\r\n     * Clear all traces and performance data\r\n     */\r\n    clear() {\r\n        this.operationTraces.clear();\r\n        this.performanceMarks.clear();\r\n    }\r\n\r\n    /**\r\n     * Get performance summary\r\n     * @returns {Object} Performance statistics\r\n     */\r\n    getPerformanceSummary() {\r\n        return {\r\n            activeTimers: this.performanceMarks.size,\r\n            activeTraces: this.operationTraces.size,\r\n            modules: Array.from(this.modules.keys()),\r\n        };\r\n    }\r\n}\r\n\r\n// Create singleton instance\r\nconst debugLogger = new DebugLogger();\r\n\r\nexport { debugLogger };\r\nexport default debugLogger;\n","/**\r\n * Error handling and recovery system for Name Tracker extension\r\n * Provides error boundaries, graceful degradation, and transaction rollback\r\n */\r\n\r\nimport debugLogger from './debug.js';\r\n\r\nconst logger = debugLogger.createModuleLogger('ErrorHandler');\r\n\r\nclass NameTrackerError extends Error {\r\n    constructor(message, code, module, recoverable = true) {\r\n        super(message);\r\n        this.name = 'NameTrackerError';\r\n        this.code = code;\r\n        this.module = module;\r\n        this.recoverable = recoverable;\r\n        this.timestamp = Date.now();\r\n    }\r\n}\r\n\r\nclass ErrorHandler {\r\n    constructor() {\r\n        this.errorHistory = [];\r\n        this.transactionStack = [];\r\n        this.recoveryStrategies = new Map();\r\n        this.criticalErrorCallbacks = [];\r\n    }\r\n\r\n    /**\r\n     * Create error boundary for a module operation\r\n     * @param {string} moduleName - Module name\r\n     * @param {Function} operation - Operation to execute\r\n     * @param {Object} options - Error handling options\r\n     * @returns {Promise<any>} Operation result or error recovery result\r\n     */\r\n    async withErrorBoundary(moduleName, operation, options = {}) {\r\n        const {\r\n            fallback = null,\r\n            retries = 0,\r\n            silent = false,\r\n            operationId = null,\r\n        } = options;\r\n\r\n        let lastError = null;\r\n        const startTime = Date.now();\r\n\r\n        if (operationId) {\r\n            logger.trace(operationId, `Starting operation in ${moduleName}`);\r\n        }\r\n\r\n        for (let attempt = 0; attempt <= retries; attempt++) {\r\n            try {\r\n                const result = await operation();\r\n\r\n                if (operationId) {\r\n                    logger.trace(operationId, `Operation completed successfully in ${moduleName}`);\r\n                }\r\n\r\n                return result;\r\n            } catch (error) {\r\n                lastError = error;\r\n\r\n                if (attempt < retries) {\r\n                    logger.warn(`Retrying operation in ${moduleName}, attempt ${attempt + 1}/${retries + 1}:`, error.message);\r\n                    await this.delay(Math.pow(2, attempt) * 100); // Exponential backoff\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n\r\n        // All retries failed\r\n        const trackedError = this.trackError(lastError, moduleName, {\r\n            operation: operation.name || 'anonymous',\r\n            duration: Date.now() - startTime,\r\n            retries: retries,\r\n            operationId: operationId,\r\n        });\r\n\r\n        if (!silent) {\r\n            this.notifyUser(trackedError);\r\n        }\r\n\r\n        // Try recovery strategy\r\n        if (fallback) {\r\n            try {\r\n                logger.debug(`Attempting fallback for ${moduleName}:`, trackedError.code);\r\n                return await fallback(trackedError);\r\n            } catch (fallbackError) {\r\n                logger.error(`Fallback failed for ${moduleName}:`, fallbackError);\r\n            }\r\n        }\r\n\r\n        // Check if we have a recovery strategy\r\n        const recovery = this.recoveryStrategies.get(trackedError.code);\r\n        if (recovery) {\r\n            try {\r\n                return await recovery(trackedError);\r\n            } catch (recoveryError) {\r\n                logger.error(`Recovery strategy failed for ${trackedError.code}:`, recoveryError);\r\n            }\r\n        }\r\n\r\n        throw trackedError;\r\n    }\r\n\r\n    /**\r\n     * Track and categorize errors\r\n     * @param {Error} error - Original error\r\n     * @param {string} moduleName - Module where error occurred\r\n     * @param {Object} context - Additional context\r\n     * @returns {NameTrackerError} Tracked error\r\n     */\r\n    trackError(error, moduleName, context = {}) {\r\n        let trackedError;\r\n\r\n        if (error instanceof NameTrackerError) {\r\n            trackedError = error;\r\n        } else {\r\n            // Categorize common error types\r\n            const code = this.categorizeError(error, moduleName);\r\n            trackedError = new NameTrackerError(\r\n                error.message,\r\n                code,\r\n                moduleName,\r\n                this.isRecoverable(error, code),\r\n            );\r\n        }\r\n\r\n        trackedError.context = context;\r\n        this.errorHistory.push(trackedError);\r\n\r\n        // Keep only last 100 errors\r\n        if (this.errorHistory.length > 100) {\r\n            this.errorHistory.shift();\r\n        }\r\n\r\n        logger.error(`Error in ${moduleName}:`, {\r\n            code: trackedError.code,\r\n            message: trackedError.message,\r\n            context: context,\r\n        });\r\n\r\n        return trackedError;\r\n    }\r\n\r\n    /**\r\n     * Categorize error types for better handling\r\n     * @param {Error} error - Original error\r\n     * @param {string} moduleName - Module name\r\n     * @returns {string} Error code\r\n     */\r\n    categorizeError(error, moduleName) {\r\n        if (error.message.includes('fetch') || error.message.includes('network')) {\r\n            return 'NETWORK_ERROR';\r\n        }\r\n\r\n        if (error.message.includes('JSON') || error.message.includes('parse')) {\r\n            return 'DATA_FORMAT_ERROR';\r\n        }\r\n\r\n        if (error.message.includes('context') || error.message.includes('SillyTavern')) {\r\n            return 'CONTEXT_ERROR';\r\n        }\r\n\r\n        if (error.name === 'TypeError') {\r\n            return 'TYPE_ERROR';\r\n        }\r\n\r\n        if (moduleName === 'LLM' && (error.message.includes('quota') || error.message.includes('rate'))) {\r\n            return 'API_LIMIT_ERROR';\r\n        }\r\n\r\n        return 'UNKNOWN_ERROR';\r\n    }\r\n\r\n    /**\r\n     * Determine if an error is recoverable\r\n     * @param {Error} error - Original error\r\n     * @param {string} code - Error code\r\n     * @returns {boolean} Whether error is recoverable\r\n     */\r\n    isRecoverable(error, code) {\r\n        const nonRecoverableErrors = [\r\n            'CONTEXT_ERROR',\r\n            'TYPE_ERROR',\r\n        ];\r\n\r\n        return !nonRecoverableErrors.includes(code);\r\n    }\r\n\r\n    /**\r\n     * Start a transaction for rollback capability\r\n     * @param {string} transactionId - Unique transaction identifier\r\n     * @param {Object} initialState - State to potentially rollback to\r\n     */\r\n    startTransaction(transactionId, initialState) {\r\n        this.transactionStack.push({\r\n            id: transactionId,\r\n            state: JSON.stringify(initialState),\r\n            timestamp: Date.now(),\r\n        });\r\n\r\n        logger.debug(`Started transaction: ${transactionId}`);\r\n    }\r\n\r\n    /**\r\n     * Commit a transaction (remove from rollback stack)\r\n     * @param {string} transactionId - Transaction identifier\r\n     */\r\n    commitTransaction(transactionId) {\r\n        const index = this.transactionStack.findIndex(t => t.id === transactionId);\r\n        if (index !== -1) {\r\n            this.transactionStack.splice(index, 1);\r\n            logger.debug(`Committed transaction: ${transactionId}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rollback a transaction\r\n     * @param {string} transactionId - Transaction identifier\r\n     * @returns {Object|null} Previous state or null if not found\r\n     */\r\n    rollbackTransaction(transactionId) {\r\n        const index = this.transactionStack.findIndex(t => t.id === transactionId);\r\n        if (index !== -1) {\r\n            const transaction = this.transactionStack.splice(index, 1)[0];\r\n            logger.debug(`Rolled back transaction: ${transactionId}`);\r\n            return JSON.parse(transaction.state);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Register a recovery strategy for specific error codes\r\n     * @param {string} errorCode - Error code to handle\r\n     * @param {Function} strategy - Recovery function\r\n     */\r\n    registerRecoveryStrategy(errorCode, strategy) {\r\n        this.recoveryStrategies.set(errorCode, strategy);\r\n        logger.debug(`Registered recovery strategy for: ${errorCode}`);\r\n    }\r\n\r\n    /**\r\n     * Register callback for critical errors\r\n     * @param {Function} callback - Function to call on critical errors\r\n     */\r\n    onCriticalError(callback) {\r\n        this.criticalErrorCallbacks.push(callback);\r\n    }\r\n\r\n    /**\r\n     * Notify user of errors via toastr\r\n     * @param {NameTrackerError} error - Error to display\r\n     */\r\n    notifyUser(error) {\r\n        const message = `Name Tracker: ${error.message}`;\r\n\r\n        if (error.recoverable) {\r\n            toastr.warning(message, 'Warning', { timeOut: 5000 });\r\n        } else {\r\n            toastr.error(message, 'Error', { timeOut: 8000 });\r\n\r\n            // Notify critical error callbacks\r\n            this.criticalErrorCallbacks.forEach(callback => {\r\n                try {\r\n                    callback(error);\r\n                } catch (callbackError) {\r\n                    logger.error('Critical error callback failed:', callbackError);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get recent error history\r\n     * @param {number} count - Number of recent errors to return\r\n     * @returns {Array} Recent errors\r\n     */\r\n    getRecentErrors(count = 10) {\r\n        return this.errorHistory.slice(-count);\r\n    }\r\n\r\n    /**\r\n     * Clear error history\r\n     */\r\n    clearHistory() {\r\n        this.errorHistory = [];\r\n        logger.debug('Cleared error history');\r\n    }\r\n\r\n    /**\r\n     * Utility delay function for retries\r\n     * @param {number} ms - Milliseconds to delay\r\n     * @returns {Promise} Delay promise\r\n     */\r\n    delay(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n}\r\n\r\n// Create singleton instance\r\nconst errorHandler = new ErrorHandler();\r\n\r\nexport { errorHandler, NameTrackerError };\r\nexport default errorHandler;\n","/**\r\n * SillyTavern context abstraction layer for Name Tracker extension\r\n * Provides a thin wrapper around SillyTavern.getContext() with error handling\r\n */\r\n\r\nimport debugLogger from './debug.js';\r\nimport { errorHandler } from './errors.js';\r\n\r\nconst logger = debugLogger.createModuleLogger('Context');\r\n\r\nclass SillyTavernContext {\r\n    constructor() {\r\n        this._context = null;\r\n        this._lastUpdate = 0;\r\n        this._updateInterval = 1000; // Cache context for 1 second\r\n    }\r\n\r\n    /**\r\n     * Get fresh SillyTavern context\r\n     * @returns {Object} SillyTavern context object\r\n     */\r\n    getContext() {\r\n        const now = Date.now();\r\n        if (!this._context || (now - this._lastUpdate) > this._updateInterval) {\r\n            try {\r\n                this._context = SillyTavern.getContext();\r\n                this._lastUpdate = now;\r\n            } catch (error) {\r\n                logger.error('Failed to get SillyTavern context:', error);\r\n                throw new Error('SillyTavern context not available');\r\n            }\r\n        }\r\n        return this._context;\r\n    }\r\n\r\n    /**\r\n     * Get current chat\r\n     * @returns {Array} Current chat messages\r\n     */\r\n    getChat() {\r\n        return this.getContext().chat || [];\r\n    }\r\n\r\n    /**\r\n     * Get current chat metadata\r\n     * @returns {Object} Chat metadata object\r\n     */\r\n    getChatMetadata() {\r\n        return this.getContext().chatMetadata || {};\r\n    }\r\n\r\n    /**\r\n     * Get current chat ID\r\n     * @returns {string|null} Chat identifier\r\n     */\r\n    getChatId() {\r\n        return this.getContext().chatId || null;\r\n    }\r\n\r\n    /**\r\n     * Get current character ID\r\n     * @returns {number|null} Character index\r\n     */\r\n    getCharacterId() {\r\n        return this.getContext().characterId;\r\n    }\r\n\r\n    /**\r\n     * Get characters list\r\n     * @returns {Array} Available characters\r\n     */\r\n    getCharacters() {\r\n        return this.getContext().characters || [];\r\n    }\r\n\r\n    /**\r\n     * Get user name (name1)\r\n     * @returns {string} User's persona name\r\n     */\r\n    getUserName() {\r\n        return this.getContext().name1 || 'User';\r\n    }\r\n\r\n    /**\r\n     * Get extension settings object\r\n     * @returns {Object} Extension settings\r\n     */\r\n    getExtensionSettings() {\r\n        return this.getContext().extensionSettings || {};\r\n    }\r\n\r\n    /**\r\n     * Save extension settings\r\n     * @returns {Promise<void>}\r\n     */\r\n    async saveExtensionSettings() {\r\n        return errorHandler.withErrorBoundary('Context', async () => {\r\n            const context = this.getContext();\r\n            if (context.saveSettingsDebounced) {\r\n                context.saveSettingsDebounced();\r\n            } else {\r\n                logger.warn('saveSettingsDebounced not available');\r\n            }\r\n        }, { silent: true });\r\n    }\r\n\r\n    /**\r\n     * Save chat metadata\r\n     * @returns {Promise<void>}\r\n     */\r\n    async saveChatMetadata() {\r\n        return errorHandler.withErrorBoundary('Context', async () => {\r\n            const context = this.getContext();\r\n            if (context.saveMetadata) {\r\n                await context.saveMetadata();\r\n            } else {\r\n                logger.warn('saveMetadata not available');\r\n            }\r\n        }, { silent: true });\r\n    }\r\n\r\n    /**\r\n     * Generate quiet prompt (background LLM call)\r\n     * @param {Object} options - Generation options\r\n     * @returns {Promise<string>} Generated text\r\n     */\r\n    async generateQuietPrompt(options) {\r\n        return errorHandler.withErrorBoundary('Context', async () => {\r\n            const context = this.getContext();\r\n            if (!context.generateQuietPrompt) {\r\n                throw new Error('generateQuietPrompt not available');\r\n            }\r\n            return await context.generateQuietPrompt(options);\r\n        }, { retries: 1 });\r\n    }\r\n\r\n    /**\r\n     * Load world info (lorebook)\r\n     * @param {string} lorebookName - Name of lorebook to load\r\n     * @returns {Promise<Object|null>} Lorebook data\r\n     */\r\n    async loadWorldInfo(lorebookName) {\r\n        return errorHandler.withErrorBoundary('Context', async () => {\r\n            const context = this.getContext();\r\n            if (!context.loadWorldInfo) {\r\n                throw new Error('loadWorldInfo not available');\r\n            }\r\n            return await context.loadWorldInfo(lorebookName);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Save world info (lorebook)\r\n     * @param {string} lorebookName - Name of lorebook\r\n     * @param {Object} data - Lorebook data\r\n     * @param {boolean} create - Create if doesn't exist\r\n     * @returns {Promise<void>}\r\n     */\r\n    async saveWorldInfo(lorebookName, data, create = false) {\r\n        return errorHandler.withErrorBoundary('Context', async () => {\r\n            const context = this.getContext();\r\n            if (!context.saveWorldInfo) {\r\n                throw new Error('saveWorldInfo not available');\r\n            }\r\n            return await context.saveWorldInfo(lorebookName, data, create);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Save world info entry\r\n     * @param {string} lorebookName - Lorebook name\r\n     * @param {Object} entryData - Entry data\r\n     * @returns {Promise<void>}\r\n     */\r\n    async saveWorldInfoEntry(lorebookName, entryData) {\r\n        return errorHandler.withErrorBoundary('Context', async () => {\r\n            const context = this.getContext();\r\n            if (!context.saveWorldInfoEntry) {\r\n                throw new Error('saveWorldInfoEntry not available');\r\n            }\r\n            return await context.saveWorldInfoEntry(lorebookName, entryData);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get event source for listening to SillyTavern events\r\n     * @returns {Object} Event source object\r\n     */\r\n    getEventSource() {\r\n        const context = this.getContext();\r\n        return context.eventSource;\r\n    }\r\n\r\n    /**\r\n     * Get event types constants\r\n     * @returns {Object} Event types\r\n     */\r\n    getEventTypes() {\r\n        const context = this.getContext();\r\n        return context.event_types;\r\n    }\r\n\r\n    /**\r\n     * Call generic popup\r\n     * @param {string} content - HTML content\r\n     * @param {number} type - Popup type\r\n     * @param {string} input - Input placeholder\r\n     * @param {Object} options - Additional options\r\n     * @returns {Promise<any>} Popup result\r\n     */\r\n    async callGenericPopup(content, type, input = '', options = {}) {\r\n        return errorHandler.withErrorBoundary('Context', async () => {\r\n            const context = this.getContext();\r\n            if (!context.callGenericPopup) {\r\n                throw new Error('callGenericPopup not available');\r\n            }\r\n            return await context.callGenericPopup(content, type, input, options);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Check if SillyTavern context is available\r\n     * @returns {boolean} Context availability\r\n     */\r\n    isContextAvailable() {\r\n        try {\r\n            return !!this.getContext();\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear cached context (force refresh on next access)\r\n     */\r\n    clearCache() {\r\n        this._context = null;\r\n        this._lastUpdate = 0;\r\n        logger.debug('Cleared context cache');\r\n    }\r\n\r\n    /**\r\n     * Get context status information for debugging\r\n     * @returns {Object} Context status\r\n     */\r\n    getStatus() {\r\n        return {\r\n            available: this.isContextAvailable(),\r\n            cached: !!this._context,\r\n            lastUpdate: this._lastUpdate,\r\n            chatId: this.getChatId(),\r\n            characterId: this.getCharacterId(),\r\n        };\r\n    }\r\n}\r\n\r\n// Create singleton instance\r\nconst sillyTavernContext = new SillyTavernContext();\r\n\r\nexport default sillyTavernContext;\n","/**\r\n * Centralized settings management for Name Tracker extension\r\n * Handles both global extension settings and chat-level data persistence\r\n */\r\n\r\nimport debugLogger from './debug.js';\r\nimport { errorHandler } from './errors.js';\r\nimport sillyTavernContext from './context.js';\r\n\r\nconst logger = debugLogger.createModuleLogger('Settings');\r\n\r\nconst EXTENSION_NAME = 'STnametracker';\r\n\r\n// Default settings structure\r\nconst DEFAULT_SETTINGS = Object.freeze({\r\n    enabled: true,\r\n    autoAnalyze: true,\r\n    messageFrequency: 10,\r\n    llmSource: 'sillytavern', // 'sillytavern' or 'ollama'\r\n    ollamaEndpoint: 'http://localhost:11434',\r\n    ollamaModel: '',\r\n    confidenceThreshold: 70,\r\n    lorebookPosition: 0, // after character defs\r\n    lorebookDepth: 1,\r\n    lorebookCooldown: 5,\r\n    lorebookScanDepth: 1,\r\n    lorebookProbability: 100,\r\n    lorebookEnabled: true,\r\n    debugMode: false,\r\n    systemPrompt: null, // null means use default\r\n});\r\n\r\n// Default chat-level data structure\r\nconst DEFAULT_CHAT_DATA = Object.freeze({\r\n    characters: {}, // character data indexed by preferred name\r\n    messageCounter: 0,\r\n    lastHarvestMessage: 0,\r\n    lastScannedMessageId: -1, // Track last scanned message by ID\r\n});\r\n\r\nclass SettingsManager {\r\n    constructor() {\r\n        this._settings = null;\r\n        this._chatData = null;\r\n        this._settingsCallbacks = [];\r\n        this._chatCallbacks = [];\r\n        this._saveTimeout = null;\r\n        this._initialized = false;\r\n    }\r\n\r\n    /**\r\n     * Initialize settings system\r\n     * @returns {Promise<void>}\r\n     */\r\n    async initialize() {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            if (this._initialized) {\r\n                return;\r\n            }\r\n\r\n            logger.debug('Initializing settings manager');\r\n\r\n            // Load global settings\r\n            await this.loadSettings();\r\n\r\n            // Load chat-level data\r\n            await this.loadChatData();\r\n\r\n            this._initialized = true;\r\n            logger.debug('Settings manager initialized');\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Load global extension settings\r\n     * @returns {Promise<void>}\r\n     */\r\n    async loadSettings() {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            const extensionSettings = sillyTavernContext.getExtensionSettings();\r\n\r\n            // Initialize with defaults if not exists\r\n            if (!extensionSettings[EXTENSION_NAME]) {\r\n                extensionSettings[EXTENSION_NAME] = {};\r\n            }\r\n\r\n            // Merge with defaults to ensure all properties exist\r\n            this._settings = { ...DEFAULT_SETTINGS };\r\n            Object.assign(this._settings, extensionSettings[EXTENSION_NAME]);\r\n\r\n            // Update the reference in SillyTavern\r\n            extensionSettings[EXTENSION_NAME] = this._settings;\r\n\r\n            logger.debug('Loaded global settings:', Object.keys(this._settings));\r\n\r\n            // Trigger callbacks\r\n            this._settingsCallbacks.forEach(callback => {\r\n                try {\r\n                    callback(this._settings);\r\n                } catch (error) {\r\n                    logger.error('Settings callback error:', error);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Load chat-level data from metadata\r\n     * @returns {Promise<void>}\r\n     */\r\n    async loadChatData() {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            const chatMetadata = sillyTavernContext.getChatMetadata();\r\n\r\n            // Initialize chat data if not exists\r\n            if (!chatMetadata[EXTENSION_NAME]) {\r\n                this._chatData = { ...DEFAULT_CHAT_DATA };\r\n                chatMetadata[EXTENSION_NAME] = this._chatData;\r\n                logger.debug('Initialized new chat data');\r\n            } else {\r\n                // Merge with defaults to ensure all properties exist\r\n                this._chatData = { ...DEFAULT_CHAT_DATA };\r\n                Object.assign(this._chatData, chatMetadata[EXTENSION_NAME]);\r\n                chatMetadata[EXTENSION_NAME] = this._chatData;\r\n                logger.debug('Loaded existing chat data:', Object.keys(this._chatData.characters));\r\n            }\r\n\r\n            // Trigger callbacks\r\n            this._chatCallbacks.forEach(callback => {\r\n                try {\r\n                    callback(this._chatData);\r\n                } catch (error) {\r\n                    logger.error('Chat data callback error:', error);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get current settings object\r\n     * @returns {Object} Current settings\r\n     */\r\n    getSettings() {\r\n        if (!this._initialized) {\r\n            throw new Error('Settings manager not initialized');\r\n        }\r\n        return this._settings;\r\n    }\r\n\r\n    /**\r\n     * Get current chat data\r\n     * @returns {Object} Current chat data\r\n     */\r\n    getChatData() {\r\n        if (!this._initialized) {\r\n            throw new Error('Settings manager not initialized');\r\n        }\r\n        return this._chatData;\r\n    }\r\n\r\n    /**\r\n     * Update a setting value\r\n     * @param {string} key - Setting key\r\n     * @param {any} value - New value\r\n     * @returns {Promise<void>}\r\n     */\r\n    async updateSetting(key, value) {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            if (!this._initialized) {\r\n                throw new Error('Settings manager not initialized');\r\n            }\r\n\r\n            if (!(key in DEFAULT_SETTINGS)) {\r\n                throw new Error(`Unknown setting key: ${key}`);\r\n            }\r\n\r\n            const oldValue = this._settings[key];\r\n            this._settings[key] = value;\r\n\r\n            logger.debug(`Updated setting ${key}: ${oldValue}  ${value}`);\r\n\r\n            // Trigger callbacks\r\n            this._settingsCallbacks.forEach(callback => {\r\n                try {\r\n                    callback(this._settings, key, value, oldValue);\r\n                } catch (error) {\r\n                    logger.error('Settings callback error:', error);\r\n                }\r\n            });\r\n\r\n            // Save with debounce\r\n            await this.saveSettings();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update chat data\r\n     * @param {string} key - Data key\r\n     * @param {any} value - New value\r\n     * @returns {Promise<void>}\r\n     */\r\n    async updateChatData(key, value) {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            if (!this._initialized) {\r\n                throw new Error('Settings manager not initialized');\r\n            }\r\n\r\n            if (!(key in DEFAULT_CHAT_DATA)) {\r\n                throw new Error(`Unknown chat data key: ${key}`);\r\n            }\r\n\r\n            const oldValue = this._chatData[key];\r\n            this._chatData[key] = value;\r\n\r\n            logger.debug(`Updated chat data ${key}`);\r\n\r\n            // Trigger callbacks\r\n            this._chatCallbacks.forEach(callback => {\r\n                try {\r\n                    callback(this._chatData, key, value, oldValue);\r\n                } catch (error) {\r\n                    logger.error('Chat data callback error:', error);\r\n                }\r\n            });\r\n\r\n            // Save with debounce\r\n            await this.saveChatData();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get specific setting value\r\n     * @param {string} key - Setting key\r\n     * @param {any} defaultValue - Default if not found\r\n     * @returns {any} Setting value\r\n     */\r\n    getSetting(key, defaultValue = undefined) {\r\n        if (!this._initialized) {\r\n            return defaultValue;\r\n        }\r\n        return this._settings[key] ?? defaultValue;\r\n    }\r\n\r\n    /**\r\n     * Save global settings to SillyTavern\r\n     * @returns {Promise<void>}\r\n     */\r\n    async saveSettings() {\r\n        if (this._saveTimeout) {\r\n            clearTimeout(this._saveTimeout);\r\n        }\r\n\r\n        this._saveTimeout = setTimeout(async () => {\r\n            await errorHandler.withErrorBoundary('Settings', async () => {\r\n                await sillyTavernContext.saveExtensionSettings();\r\n                logger.debug('Saved global settings');\r\n            }, { silent: true });\r\n        }, 500); // Debounce 500ms\r\n    }\r\n\r\n    /**\r\n     * Save chat data to metadata\r\n     * @returns {Promise<void>}\r\n     */\r\n    async saveChatData() {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            await sillyTavernContext.saveChatMetadata();\r\n            logger.debug('Saved chat metadata');\r\n        }, { silent: true });\r\n    }\r\n\r\n    /**\r\n     * Register callback for settings changes\r\n     * @param {Function} callback - Callback function\r\n     */\r\n    onSettingsChange(callback) {\r\n        this._settingsCallbacks.push(callback);\r\n    }\r\n\r\n    /**\r\n     * Register callback for chat data changes\r\n     * @param {Function} callback - Callback function\r\n     */\r\n    onChatDataChange(callback) {\r\n        this._chatCallbacks.push(callback);\r\n    }\r\n\r\n    /**\r\n     * Handle chat change event\r\n     * @returns {Promise<void>}\r\n     */\r\n    async onChatChanged() {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            logger.debug('Chat changed, reloading chat data');\r\n            await this.loadChatData();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Check if extension is enabled\r\n     * @returns {boolean} Enabled status\r\n     */\r\n    isEnabled() {\r\n        return this.getSetting('enabled', false);\r\n    }\r\n\r\n    /**\r\n     * Check if debug mode is enabled\r\n     * @returns {boolean} Debug mode status\r\n     */\r\n    isDebugMode() {\r\n        return this.getSetting('debugMode', false);\r\n    }\r\n\r\n    /**\r\n     * Get auto-analysis settings\r\n     * @returns {Object} Auto-analysis configuration\r\n     */\r\n    getAutoAnalysisConfig() {\r\n        return {\r\n            enabled: this.getSetting('autoAnalyze', false),\r\n            frequency: this.getSetting('messageFrequency', 10),\r\n            lastScanned: this._chatData?.lastScannedMessageId ?? -1,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Get LLM configuration\r\n     * @returns {Object} LLM settings\r\n     */\r\n    getLLMConfig() {\r\n        return {\r\n            source: this.getSetting('llmSource', 'sillytavern'),\r\n            ollamaEndpoint: this.getSetting('ollamaEndpoint', 'http://localhost:11434'),\r\n            ollamaModel: this.getSetting('ollamaModel', ''),\r\n            systemPrompt: this.getSetting('systemPrompt'),\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Get lorebook configuration\r\n     * @returns {Object} Lorebook settings\r\n     */\r\n    getLorebookConfig() {\r\n        return {\r\n            position: this.getSetting('lorebookPosition', 0),\r\n            depth: this.getSetting('lorebookDepth', 1),\r\n            cooldown: this.getSetting('lorebookCooldown', 5),\r\n            scanDepth: this.getSetting('lorebookScanDepth', 1),\r\n            probability: this.getSetting('lorebookProbability', 100),\r\n            enabled: this.getSetting('lorebookEnabled', true),\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Reset to default settings\r\n     * @returns {Promise<void>}\r\n     */\r\n    async reset() {\r\n        return errorHandler.withErrorBoundary('Settings', async () => {\r\n            logger.warn('Resetting settings to defaults');\r\n\r\n            Object.assign(this._settings, DEFAULT_SETTINGS);\r\n            Object.assign(this._chatData, DEFAULT_CHAT_DATA);\r\n\r\n            await this.saveSettings();\r\n            await this.saveChatData();\r\n\r\n            // Trigger callbacks\r\n            this._settingsCallbacks.forEach(callback => {\r\n                try {\r\n                    callback(this._settings);\r\n                } catch (error) {\r\n                    logger.error('Settings callback error:', error);\r\n                }\r\n            });\r\n\r\n            this._chatCallbacks.forEach(callback => {\r\n                try {\r\n                    callback(this._chatData);\r\n                } catch (error) {\r\n                    logger.error('Chat data callback error:', error);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get settings status for debugging\r\n     * @returns {Object} Settings status\r\n     */\r\n    getStatus() {\r\n        return {\r\n            initialized: this._initialized,\r\n            settingsLoaded: !!this._settings,\r\n            chatDataLoaded: !!this._chatData,\r\n            charactersCount: Object.keys(this._chatData?.characters || {}).length,\r\n            callbacks: {\r\n                settings: this._settingsCallbacks.length,\r\n                chatData: this._chatCallbacks.length,\r\n            },\r\n        };\r\n    }\r\n}\r\n\r\n// Create singleton instance\r\nconst settingsManager = new SettingsManager();\r\n\r\nexport default settingsManager;\n","/**\r\n * Notification utilities for Name Tracker extension\r\n * Centralizes toastr notifications with consistent styling\r\n */\r\n\r\nimport debugLogger from '../core/debug.js';\r\n\r\nconst logger = debugLogger.createModuleLogger('Notifications');\r\n\r\nclass NotificationManager {\r\n    constructor() {\r\n        this.defaultOptions = {\r\n            timeOut: 5000,\r\n            extendedTimeOut: 2000,\r\n            closeButton: true,\r\n            progressBar: true,\r\n            preventDuplicates: true,\r\n        };\r\n\r\n        this.prefix = 'Name Tracker: ';\r\n    }\r\n\r\n    /**\r\n     * Show success notification\r\n     * @param {string} message - Message to display\r\n     * @param {string} title - Optional title\r\n     * @param {Object} options - Toastr options\r\n     */\r\n    success(message, title = 'Success', options = {}) {\r\n        const opts = { ...this.defaultOptions, ...options };\r\n        toastr.success(this.prefix + message, title, opts);\r\n        logger.debug('Success notification:', message);\r\n    }\r\n\r\n    /**\r\n     * Show info notification\r\n     * @param {string} message - Message to display\r\n     * @param {string} title - Optional title\r\n     * @param {Object} options - Toastr options\r\n     */\r\n    info(message, title = 'Info', options = {}) {\r\n        const opts = { ...this.defaultOptions, ...options };\r\n        toastr.info(this.prefix + message, title, opts);\r\n        logger.debug('Info notification:', message);\r\n    }\r\n\r\n    /**\r\n     * Show warning notification\r\n     * @param {string} message - Message to display\r\n     * @param {string} title - Optional title\r\n     * @param {Object} options - Toastr options\r\n     */\r\n    warning(message, title = 'Warning', options = {}) {\r\n        const opts = { ...this.defaultOptions, timeOut: 8000, ...options };\r\n        toastr.warning(this.prefix + message, title, opts);\r\n        logger.debug('Warning notification:', message);\r\n    }\r\n\r\n    /**\r\n     * Show error notification\r\n     * @param {string} message - Message to display\r\n     * @param {string} title - Optional title\r\n     * @param {Object} options - Toastr options\r\n     */\r\n    error(message, title = 'Error', options = {}) {\r\n        const opts = {\r\n            ...this.defaultOptions,\r\n            timeOut: 10000,\r\n            extendedTimeOut: 5000,\r\n            ...options,\r\n        };\r\n        toastr.error(this.prefix + message, title, opts);\r\n        logger.error('Error notification:', message);\r\n    }\r\n\r\n    /**\r\n     * Show persistent notification that doesn't auto-close\r\n     * @param {string} message - Message to display\r\n     * @param {string} title - Optional title\r\n     * @param {string} type - Notification type (info, success, warning, error)\r\n     */\r\n    persistent(message, title = 'Notice', type = 'info') {\r\n        const opts = {\r\n            ...this.defaultOptions,\r\n            timeOut: 0,\r\n            extendedTimeOut: 0,\r\n        };\r\n\r\n        switch (type) {\r\n            case 'success':\r\n                toastr.success(this.prefix + message, title, opts);\r\n                break;\r\n            case 'warning':\r\n                toastr.warning(this.prefix + message, title, opts);\r\n                break;\r\n            case 'error':\r\n                toastr.error(this.prefix + message, title, opts);\r\n                break;\r\n            default:\r\n                toastr.info(this.prefix + message, title, opts);\r\n        }\r\n\r\n        logger.debug('Persistent notification:', message);\r\n    }\r\n\r\n    /**\r\n     * Show progress notification for long operations\r\n     * @param {string} message - Message to display\r\n     * @param {number} progress - Progress percentage (0-100)\r\n     * @param {string} id - Unique ID for updating the same notification\r\n     * @returns {string} Notification ID for updates\r\n     */\r\n    progress(message, progress = 0, id = null) {\r\n        const notificationId = id || `progress_${Date.now()}`;\r\n        const progressHtml = `\r\n            <div style=\"margin-bottom: 8px;\">${this.prefix}${message}</div>\r\n            <div style=\"background: #333; border-radius: 3px; overflow: hidden;\">\r\n                <div style=\"background: #007acc; height: 6px; width: ${progress}%; transition: width 0.3s ease;\"></div>\r\n            </div>\r\n            <div style=\"text-align: center; font-size: 11px; margin-top: 4px;\">${progress}%</div>\r\n        `;\r\n\r\n        const opts = {\r\n            timeOut: 0,\r\n            extendedTimeOut: 0,\r\n            closeButton: false,\r\n            progressBar: false,\r\n            preventDuplicates: false,\r\n            toastId: notificationId,\r\n        };\r\n\r\n        // Remove existing notification with same ID\r\n        toastr.remove();\r\n\r\n        toastr.info(progressHtml, '', opts);\r\n        logger.debug('Progress notification:', message, `${progress}%`);\r\n\r\n        return notificationId;\r\n    }\r\n\r\n    /**\r\n     * Clear all notifications\r\n     */\r\n    clear() {\r\n        toastr.clear();\r\n        logger.debug('Cleared all notifications');\r\n    }\r\n\r\n    /**\r\n     * Show a confirmation-style notification with action buttons\r\n     * @param {string} message - Message to display\r\n     * @param {Function} onConfirm - Callback for confirm action\r\n     * @param {Function} onCancel - Callback for cancel action\r\n     * @param {string} title - Optional title\r\n     */\r\n    confirm(message, onConfirm, onCancel = null, title = 'Confirm') {\r\n        const confirmId = `confirm_${Date.now()}`;\r\n        const confirmHtml = `\r\n            <div style=\"margin-bottom: 12px;\">${message}</div>\r\n            <div style=\"text-align: right;\">\r\n                <button class=\"btn btn-sm btn-secondary me-2\" onclick=\"nameTrackerNotifications.handleConfirmCancel('${confirmId}')\">Cancel</button>\r\n                <button class=\"btn btn-sm btn-primary\" onclick=\"nameTrackerNotifications.handleConfirmOk('${confirmId}')\">Confirm</button>\r\n            </div>\r\n        `;\r\n\r\n        // Store callbacks globally for onclick handlers\r\n        window.nameTrackerNotifications = window.nameTrackerNotifications || {};\r\n        window.nameTrackerNotifications.confirmCallbacks = window.nameTrackerNotifications.confirmCallbacks || {};\r\n        window.nameTrackerNotifications.confirmCallbacks[confirmId] = { onConfirm, onCancel };\r\n\r\n        window.nameTrackerNotifications.handleConfirmOk = (id) => {\r\n            const callbacks = window.nameTrackerNotifications.confirmCallbacks[id];\r\n            if (callbacks && callbacks.onConfirm) {\r\n                callbacks.onConfirm();\r\n            }\r\n            delete window.nameTrackerNotifications.confirmCallbacks[id];\r\n            toastr.clear();\r\n        };\r\n\r\n        window.nameTrackerNotifications.handleConfirmCancel = (id) => {\r\n            const callbacks = window.nameTrackerNotifications.confirmCallbacks[id];\r\n            if (callbacks && callbacks.onCancel) {\r\n                callbacks.onCancel();\r\n            }\r\n            delete window.nameTrackerNotifications.confirmCallbacks[id];\r\n            toastr.clear();\r\n        };\r\n\r\n        const opts = {\r\n            timeOut: 0,\r\n            extendedTimeOut: 0,\r\n            closeButton: false,\r\n            progressBar: false,\r\n            preventDuplicates: false,\r\n            toastId: confirmId,\r\n        };\r\n\r\n        toastr.info(confirmHtml, this.prefix + title, opts);\r\n        logger.debug('Confirmation notification:', message);\r\n\r\n        return confirmId;\r\n    }\r\n\r\n    /**\r\n     * Get notification status for debugging\r\n     * @returns {Object} Status information\r\n     */\r\n    getStatus() {\r\n        return {\r\n            defaultOptions: this.defaultOptions,\r\n            prefix: this.prefix,\r\n            activeConfirms: Object.keys(window.nameTrackerNotifications?.confirmCallbacks || {}).length,\r\n        };\r\n    }\r\n}\r\n\r\n// Create singleton instance\r\nconst notifications = new NotificationManager();\r\n\r\nlogger.debug('Notifications module loaded');\r\n\r\nexport default notifications;\n","/**\r\n * Utility functions for Name Tracker extension\r\n * Common helpers and shared functionality\r\n */\r\n\r\nimport debugLogger from '../core/debug.js';\r\n\r\nconst logger = debugLogger.createModuleLogger('Utils');\r\n\r\n/**\r\n * Simple hash function for generating unique identifiers\r\n * @param {string} str - String to hash\r\n * @returns {string} Hash value in base-36 format\r\n */\r\nexport function simpleHash(str) {\r\n    let hash = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        const char = str.charCodeAt(i);\r\n        hash = ((hash << 5) - hash) + char;\r\n        hash = hash & hash;\r\n    }\r\n    return hash.toString(36);\r\n}\r\n\r\n/**\r\n * Escape HTML special characters to prevent XSS\r\n * @param {string} text - Text to escape\r\n * @returns {string} HTML-safe text\r\n */\r\nexport function escapeHtml(text) {\r\n    if (typeof text !== 'string') {\r\n        return '';\r\n    }\r\n\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n}\r\n\r\n/**\r\n * Generate unique identifier\r\n * @returns {string} Unique ID\r\n */\r\nexport function generateUID() {\r\n    return Date.now().toString(36) + Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\n/**\r\n * Deep clone an object\r\n * @param {any} obj - Object to clone\r\n * @returns {any} Cloned object\r\n */\r\nexport function deepClone(obj) {\r\n    if (obj === null || typeof obj !== 'object') {\r\n        return obj;\r\n    }\r\n\r\n    if (obj instanceof Date) {\r\n        return new Date(obj.getTime());\r\n    }\r\n\r\n    if (obj instanceof Array) {\r\n        return obj.map(item => deepClone(item));\r\n    }\r\n\r\n    if (typeof obj === 'object') {\r\n        const cloned = {};\r\n        Object.keys(obj).forEach(key => {\r\n            cloned[key] = deepClone(obj[key]);\r\n        });\r\n        return cloned;\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\n/**\r\n * Debounce function calls\r\n * @param {Function} func - Function to debounce\r\n * @param {number} wait - Wait time in milliseconds\r\n * @returns {Function} Debounced function\r\n */\r\nexport function debounce(func, wait) {\r\n    let timeout;\r\n    return function executedFunction(...args) {\r\n        const later = () => {\r\n            clearTimeout(timeout);\r\n            func(...args);\r\n        };\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n    };\r\n}\r\n\r\n/**\r\n * Throttle function calls\r\n * @param {Function} func - Function to throttle\r\n * @param {number} limit - Time limit in milliseconds\r\n * @returns {Function} Throttled function\r\n */\r\nexport function throttle(func, limit) {\r\n    let inThrottle;\r\n    return function executedFunction(...args) {\r\n        if (!inThrottle) {\r\n            func.apply(this, args);\r\n            inThrottle = true;\r\n            setTimeout(() => inThrottle = false, limit);\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Check if a value is empty (null, undefined, empty string, empty array, empty object)\r\n * @param {any} value - Value to check\r\n * @returns {boolean} True if empty\r\n */\r\nexport function isEmpty(value) {\r\n    if (value == null) return true;\r\n    if (typeof value === 'string') return value.trim() === '';\r\n    if (Array.isArray(value)) return value.length === 0;\r\n    if (typeof value === 'object') return Object.keys(value).length === 0;\r\n    return false;\r\n}\r\n\r\n/**\r\n * Normalize character names (remove extra spaces, normalize case)\r\n * @param {string} name - Name to normalize\r\n * @returns {string} Normalized name\r\n */\r\nexport function normalizeName(name) {\r\n    if (typeof name !== 'string') {\r\n        return '';\r\n    }\r\n\r\n    return name\r\n        .trim()\r\n        .replace(/\\s+/g, ' ') // Replace multiple spaces with single space\r\n        .split(' ')\r\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\r\n        .join(' ');\r\n}\r\n\r\n/**\r\n * Calculate similarity between two strings\r\n * @param {string} str1 - First string\r\n * @param {string} str2 - Second string\r\n * @returns {number} Similarity score (0-1)\r\n */\r\nexport function calculateSimilarity(str1, str2) {\r\n    if (!str1 || !str2) return 0;\r\n\r\n    const a = str1.toLowerCase();\r\n    const b = str2.toLowerCase();\r\n\r\n    if (a === b) return 1;\r\n\r\n    // Simple Levenshtein distance\r\n    const matrix = [];\r\n\r\n    for (let i = 0; i <= b.length; i++) {\r\n        matrix[i] = [i];\r\n    }\r\n\r\n    for (let j = 0; j <= a.length; j++) {\r\n        matrix[0][j] = j;\r\n    }\r\n\r\n    for (let i = 1; i <= b.length; i++) {\r\n        for (let j = 1; j <= a.length; j++) {\r\n            if (b.charAt(i - 1) === a.charAt(j - 1)) {\r\n                matrix[i][j] = matrix[i - 1][j - 1];\r\n            } else {\r\n                matrix[i][j] = Math.min(\r\n                    matrix[i - 1][j - 1] + 1, // substitution\r\n                    matrix[i][j - 1] + 1,     // insertion\r\n                    matrix[i - 1][j] + 1,      // deletion\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    const maxLength = Math.max(a.length, b.length);\r\n    return 1 - (matrix[b.length][a.length] / maxLength);\r\n}\r\n\r\n/**\r\n * Format timestamp for display\r\n * @param {number} timestamp - Unix timestamp\r\n * @returns {string} Formatted time string\r\n */\r\nexport function formatTimestamp(timestamp) {\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const diff = now - date;\r\n\r\n    const seconds = Math.floor(diff / 1000);\r\n    const minutes = Math.floor(seconds / 60);\r\n    const hours = Math.floor(minutes / 60);\r\n    const days = Math.floor(hours / 24);\r\n\r\n    if (days > 0) return `${days}d ago`;\r\n    if (hours > 0) return `${hours}h ago`;\r\n    if (minutes > 0) return `${minutes}m ago`;\r\n    return 'Just now';\r\n}\r\n\r\n/**\r\n * Truncate text with ellipsis\r\n * @param {string} text - Text to truncate\r\n * @param {number} maxLength - Maximum length\r\n * @returns {string} Truncated text\r\n */\r\nexport function truncate(text, maxLength) {\r\n    if (typeof text !== 'string') return '';\r\n    if (text.length <= maxLength) return text;\r\n    return text.substring(0, maxLength - 3) + '...';\r\n}\r\n\r\nlogger.debug('Utils module loaded');\r\n\r\nexport default {\r\n    simpleHash,\r\n    escapeHtml,\r\n    generateUID,\r\n    deepClone,\r\n    debounce,\r\n    throttle,\r\n    isEmpty,\r\n    normalizeName,\r\n    calculateSimilarity,\r\n    formatTimestamp,\r\n    truncate,\r\n};\n","/**\r\n * Name Tracker Extension for SillyTavern - Modular Version\r\n * Main entry point and orchestration\r\n */\r\n\r\n// Import CSS\r\nimport '../style.css';\r\n\r\n// Core infrastructure\r\nimport debugLogger from './core/debug.js';\r\nimport { errorHandler } from './core/errors.js';\r\nimport sillyTavernContext from './core/context.js';\r\nimport settingsManager from './core/settings.js';\r\n\r\n// Utilities\r\nimport notifications from './utils/notifications.js';\r\nimport { /* escapeHtml, generateUID */ } from './utils/helpers.js';\r\n\r\nconst logger = debugLogger.createModuleLogger('Main');\r\n\r\n/**\r\n * Name Tracker Extension main class\r\n */\r\nclass NameTrackerExtension {\r\n    constructor() {\r\n        this.initialized = false;\r\n        this.modules = new Map();\r\n    }\r\n\r\n    /**\r\n     * Initialize the extension\r\n     * @returns {Promise<void>}\r\n     */\r\n    async initialize() {\r\n        return errorHandler.withErrorBoundary('Main', async () => {\r\n            if (this.initialized) {\r\n                return;\r\n            }\r\n\r\n            logger.log('Starting Name Tracker Extension v2.1.0');\r\n\r\n            // Initialize core systems\r\n            await this.initializeCore();\r\n\r\n            // TODO: Initialize feature modules\r\n            // await this.initializeModules();\r\n\r\n            // TODO: Setup UI\r\n            // await this.initializeUI();\r\n\r\n            // TODO: Register event listeners\r\n            // this.registerEventListeners();\r\n\r\n            this.initialized = true;\r\n            logger.log('Name Tracker Extension initialized successfully');\r\n\r\n        }, {\r\n            retries: 2,\r\n            fallback: async (error) => {\r\n                logger.error('Failed to initialize extension:', error);\r\n                notifications.error('Failed to initialize', 'Extension Error');\r\n                return false;\r\n            },\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Initialize core infrastructure\r\n     * @returns {Promise<void>}\r\n     */\r\n    async initializeCore() {\r\n        logger.debug('Initializing core systems...');\r\n\r\n        // Connect debug system to settings\r\n        debugLogger.isDebugEnabled = () => settingsManager.isDebugMode();\r\n\r\n        // Initialize settings manager\r\n        await settingsManager.initialize();\r\n\r\n        // Setup error recovery strategies\r\n        this.setupErrorRecovery();\r\n\r\n        logger.debug('Core systems initialized');\r\n    }\r\n\r\n    /**\r\n     * Setup error recovery strategies\r\n     */\r\n    setupErrorRecovery() {\r\n        // Network error recovery\r\n        errorHandler.registerRecoveryStrategy('NETWORK_ERROR', async (error) => {\r\n            logger.warn('Attempting network error recovery');\r\n            await errorHandler.delay(2000);\r\n            notifications.info('Retrying network operation...');\r\n            return null; // Signal to retry original operation\r\n        });\r\n\r\n        // Data format error recovery\r\n        errorHandler.registerRecoveryStrategy('DATA_FORMAT_ERROR', async (error) => {\r\n            logger.warn('Data format error, clearing cache');\r\n            // TODO: Clear relevant caches when modules are implemented\r\n            return null;\r\n        });\r\n\r\n        // Critical error handler\r\n        errorHandler.onCriticalError((error) => {\r\n            logger.error('Critical error occurred:', error);\r\n            // TODO: Save state for debugging when modules are implemented\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get extension status for debugging\r\n     * @returns {Object} Status information\r\n     */\r\n    getStatus() {\r\n        return {\r\n            initialized: this.initialized,\r\n            context: sillyTavernContext.getStatus(),\r\n            settings: settingsManager.getStatus(),\r\n            debug: debugLogger.getPerformanceSummary(),\r\n            errors: errorHandler.getRecentErrors(5).length,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Shutdown the extension\r\n     * @returns {Promise<void>}\r\n     */\r\n    async shutdown() {\r\n        return errorHandler.withErrorBoundary('Main', async () => {\r\n            logger.log('Shutting down Name Tracker Extension');\r\n\r\n            // TODO: Cleanup modules\r\n            // TODO: Remove event listeners\r\n            // TODO: Save state\r\n\r\n            this.initialized = false;\r\n            debugLogger.clear();\r\n\r\n            logger.log('Extension shutdown complete');\r\n        }, { silent: true });\r\n    }\r\n}\r\n\r\n// Create extension instance\r\nconst nameTrackerExtension = new NameTrackerExtension();\r\n\r\n// Initialize when jQuery is ready\r\njQuery(async () => {\r\n    try {\r\n        await nameTrackerExtension.initialize();\r\n\r\n        // Make extension available globally for debugging\r\n        window.nameTrackerExtension = nameTrackerExtension;\r\n\r\n        // Add debug commands to browser console\r\n        window.ntDebug = {\r\n            status: () => nameTrackerExtension.getStatus(),\r\n            errors: () => errorHandler.getRecentErrors(),\r\n            settings: () => settingsManager.getSettings(),\r\n            chatData: () => settingsManager.getChatData(),\r\n            clear: () => debugLogger.clear(),\r\n        };\r\n\r\n        console.log('[STnametracker] Extension loaded. Use ntDebug.status() for diagnostics.');\r\n\r\n    } catch (error) {\r\n        console.error('[STnametracker] Failed to initialize:', error);\r\n        notifications.error('Extension failed to load', 'Critical Error');\r\n    }\r\n});\r\n\r\nexport default nameTrackerExtension;\r\n"],"names":["module","exports","styleElement","nonce","setAttribute","stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","indexByIdentifier","obj","css","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","push","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","___CSS_LOADER_EXPORT___","styleSheet","cssText","firstChild","removeChild","appendChild","document","createTextNode","cssWithMappingToString","toString","this","map","content","needLayer","join","modules","dedupe","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","element","createElement","setAttributes","attributes","insert","memo","style","target","styleTarget","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","insertStyleElement","styleTagTransform","apply","parentNode","removeStyleElement","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","locals","debugLogger","constructor","Map","performanceMarks","operationTraces","createModuleLogger","moduleName","has","logger","log","args","warn","error","debug","trace","operationId","message","addTrace","startTimer","timerName","endTimer","set","level","isDebugEnabled","prefix","Date","toLocaleTimeString","console","timestamp","now","getTrace","performance","startTime","duration","delete","toFixed","clear","getPerformanceSummary","activeTimers","size","activeTraces","Array","from","keys","NameTrackerError","code","recoverable","super","name","errorHandler","errorHistory","transactionStack","recoveryStrategies","criticalErrorCallbacks","withErrorBoundary","operation","fallback","retries","silent","lastError","attempt","delay","Math","pow","trackedError","trackError","notifyUser","fallbackError","recovery","recoveryError","context","categorizeError","isRecoverable","shift","includes","startTransaction","transactionId","initialState","state","commitTransaction","findIndex","t","rollbackTransaction","transaction","parse","registerRecoveryStrategy","errorCode","strategy","onCriticalError","callback","toastr","warning","timeOut","forEach","callbackError","getRecentErrors","slice","clearHistory","ms","Promise","resolve","setTimeout","sillyTavernContext","_context","_lastUpdate","_updateInterval","getContext","SillyTavern","getChat","chat","getChatMetadata","chatMetadata","getChatId","chatId","getCharacterId","characterId","getCharacters","characters","getUserName","name1","getExtensionSettings","extensionSettings","saveExtensionSettings","async","saveSettingsDebounced","saveChatMetadata","saveMetadata","generateQuietPrompt","loadWorldInfo","lorebookName","saveWorldInfo","create","saveWorldInfoEntry","entryData","getEventSource","eventSource","getEventTypes","event_types","callGenericPopup","type","input","isContextAvailable","clearCache","getStatus","available","cached","lastUpdate","EXTENSION_NAME","DEFAULT_SETTINGS","freeze","enabled","autoAnalyze","messageFrequency","llmSource","ollamaEndpoint","ollamaModel","confidenceThreshold","lorebookPosition","lorebookDepth","lorebookCooldown","lorebookScanDepth","lorebookProbability","lorebookEnabled","debugMode","systemPrompt","DEFAULT_CHAT_DATA","messageCounter","lastHarvestMessage","lastScannedMessageId","_settings","_chatData","_settingsCallbacks","_chatCallbacks","_saveTimeout","_initialized","initialize","loadSettings","loadChatData","assign","getSettings","getChatData","updateSetting","value","oldValue","saveSettings","updateChatData","saveChatData","getSetting","defaultValue","clearTimeout","onSettingsChange","onChatDataChange","onChatChanged","isEnabled","isDebugMode","getAutoAnalysisConfig","frequency","lastScanned","getLLMConfig","source","getLorebookConfig","position","depth","cooldown","scanDepth","probability","reset","initialized","settingsLoaded","chatDataLoaded","charactersCount","callbacks","settings","chatData","notifications","defaultOptions","extendedTimeOut","closeButton","progressBar","preventDuplicates","success","title","opts","info","persistent","progress","notificationId","progressHtml","toastId","confirm","onConfirm","onCancel","confirmId","confirmHtml","nameTrackerNotifications","confirmCallbacks","handleConfirmOk","handleConfirmCancel","activeConfirms","nameTrackerExtension","initializeCore","setupErrorRecovery","errors","shutdown","jQuery","ntDebug","status"],"ignoreList":[],"sourceRoot":""}