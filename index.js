(()=>{"use strict";var e={56(e,t,r){e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},72(e){var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var o={},i=[],s=0;s<e.length;s++){var c=e[s],l=n.base?c[0]+n.base:c[0],d=o[l]||0,g="".concat(l," ").concat(d);o[l]=d+1;var h=r(g),A={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(A);else{var m=a(A,n);n.byIndex=s,t.splice(s,0,{identifier:g,updater:m,references:1})}i.push(g)}return i}function a(e,t){var r=t.domAPI(t);r.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var o=n(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=r(o[i]);t[s].references--}for(var c=n(e,a),l=0;l<o.length;l++){var d=r(o[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=c}}},83(e,t,r){r.d(t,{A:()=>s});var n=r(354),a=r.n(n),o=r(314),i=r.n(o)()(a());i.push([e.id,"/* Styles for the Name Tracker extension */\n\n.name-tracker-settings {\n    padding: 5px;\n}\n\n.name-tracker_block {\n    margin-bottom: 10px;\n}\n\n.name-tracker_block h4 {\n    margin-top: 10px;\n    margin-bottom: 10px;\n    font-weight: bold;\n}\n\n/* Status Display */\n.name-tracker-status-block {\n    background-color: var(--SmartThemeBlurTintColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    padding: 10px;\n}\n\n.name-tracker-status {\n    font-weight: bold;\n    color: var(--SmartThemeBodyColor);\n    padding: 5px;\n    text-align: center;\n}\n\n/* Character List */\n.name-tracker-character-list {\n    max-height: 400px;\n    overflow-y: auto;\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    padding: 5px;\n    margin-top: 5px;\n}\n\n.name-tracker-character {\n    padding: 10px;\n    margin-bottom: 10px;\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    background-color: var(--SmartThemeBlurTintColor);\n}\n\n.name-tracker-character:last-child {\n    margin-bottom: 0;\n}\n\n/* Active/loaded character styling (characters that are loaded in SillyTavern) */\n.name-tracker-character.main-character {\n    border-left: 3px solid #4CAF50;\n    background-color: rgba(76, 175, 80, 0.05);\n}\n\n.character-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 5px;\n}\n\n.character-name {\n    font-weight: bold;\n    font-size: 1.1em;\n    color: var(--SmartThemeBodyColor);\n}\n\n.character-name .fa-user {\n    color: #4CAF50;\n    margin-right: 5px;\n}\n\n.character-name.ignored {\n    color: var(--SmartThemeQuoteColor);\n    text-decoration: line-through;\n}\n\n.character-badge {\n    display: inline-block;\n    padding: 2px 8px;\n    border-radius: 3px;\n    font-size: 0.75em;\n    font-weight: bold;\n    margin-left: 5px;\n}\n\n.character-badge.main-char {\n    background-color: #4CAF50;\n    color: #fff;\n}\n\n.character-badge.ignored {\n    background-color: #666;\n    color: #fff;\n}\n\n.character-badge.unresolved {\n    background-color: #ff9800;\n    color: #000;\n}\n\n/* Lorebook entry editor modal */\n.lorebook-entry-editor h3 {\n    margin-top: 0;\n    margin-bottom: 20px;\n    color: var(--SmartThemeBodyColor);\n}\n\n.editor-section {\n    margin-bottom: 15px;\n}\n\n.editor-section label {\n    display: block;\n    font-weight: bold;\n    margin-bottom: 5px;\n    color: var(--SmartThemeBodyColor);\n}\n\n.editor-section small {\n    display: block;\n    margin-top: 3px;\n    color: var(--SmartThemeQuoteColor);\n    font-size: 0.85em;\n}\n\n.editor-section input,\n.editor-section textarea {\n    width: 100%;\n    box-sizing: border-box;\n}\n\n.character-aliases {\n    font-size: 0.9em;\n    color: var(--SmartThemeQuoteColor);\n    margin-bottom: 8px;\n    font-style: italic;\n}\n\n.lorebook-entry-id {\n    display: inline-block;\n    margin-left: 10px;\n    padding: 2px 6px;\n    background: var(--SmartThemeBlurTintColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 3px;\n    font-family: monospace;\n    font-size: 0.85em;\n    font-style: normal;\n    color: var(--SmartThemeQuoteColor);\n}\n\n.character-details {\n    font-size: 0.85em;\n    color: var(--SmartThemeBodyColor);\n    margin: 8px 0;\n    padding: 8px;\n    background: var(--SmartThemeBlurTintColor);\n    border-left: 2px solid var(--SmartThemeBorderColor);\n    border-radius: 3px;\n    line-height: 1.4;\n}\n\n.character-actions {\n    display: flex;\n    gap: 5px;\n    flex-wrap: wrap;\n    margin-top: 8px;\n}\n\n.character-actions .menu_button {\n    flex: 1;\n    min-width: 100px;\n    padding: 5px 10px;\n    font-size: 0.9em;\n}\n\n.menu_button.compact {\n    padding: 5px 10px;\n    font-size: 0.9em;\n}\n\n.name-tracker-empty {\n    color: var(--SmartThemeQuoteColor);\n    font-style: italic;\n    text-align: center;\n    padding: 20px;\n}\n\n/* Ollama Settings */\n.ollama-settings {\n    background-color: var(--SmartThemeBlurTintColor);\n    border-left: 3px solid var(--SmartThemeBorderColor);\n    padding: 10px;\n    margin-top: 5px;\n    border-radius: 5px;\n}\n\n/* Merge Dialog */\n.merge-dialog {\n    padding: 15px;\n}\n\n.merge-dialog p {\n    margin-bottom: 10px;\n}\n\n.merge-dialog strong {\n    color: var(--SmartThemeBodyColor);\n    font-weight: bold;\n}\n\n.merge-warning {\n    color: #ff9800;\n    font-size: 0.9em;\n    margin-top: 10px;\n    padding: 10px;\n    background-color: rgba(255, 152, 0, 0.1);\n    border-left: 3px solid #ff9800;\n    border-radius: 3px;\n}\n\n/* Button states */\nbutton:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/* Flex utilities */\n.flexGap5 {\n    gap: 5px;\n}\n\n.flex1 {\n    flex: 1;\n}\n\n/* Progress indicator */\n.name-tracker-progress {\n    margin: 10px 0;\n    padding: 10px;\n    background-color: var(--SmartThemeBlurTintColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    text-align: center;\n}\n\n.name-tracker-progress .progress-text {\n    margin-bottom: 5px;\n    font-weight: bold;\n}\n\n.name-tracker-progress .progress-bar {\n    width: 100%;\n    height: 20px;\n    background-color: var(--black50a);\n    border-radius: 10px;\n    overflow: hidden;\n}\n\n.name-tracker-progress .progress-fill {\n    height: 100%;\n    background-color: var(--SmartThemeQuoteColor);\n    transition: width 0.3s ease;\n}\n\n/* Character details preview (for potential future use) */\n.character-details {\n    display: none;\n    margin-top: 10px;\n    padding: 10px;\n    background-color: var(--black30a);\n    border-radius: 5px;\n    font-size: 0.9em;\n}\n\n.character-details.expanded {\n    display: block;\n}\n\n.character-details-section {\n    margin-bottom: 8px;\n}\n\n.character-details-section:last-child {\n    margin-bottom: 0;\n}\n\n.character-details-label {\n    font-weight: bold;\n    color: var(--SmartThemeQuoteColor);\n    margin-right: 5px;\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n    .character-actions {\n        flex-direction: column;\n    }\n    \n    .character-actions .menu_button {\n        width: 100%;\n    }\n}\n\n/* Animation for new characters */\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n        transform: translateY(-10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.name-tracker-character.new {\n    animation: fadeIn 0.3s ease;\n}\n\n/* System Prompt Editor */\n.system-prompt-editor h3 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    color: var(--SmartThemeBodyColor);\n}\n\n.system-prompt-editor p {\n    margin-bottom: 10px;\n    color: var(--SmartThemeQuoteColor);\n    font-size: 0.9em;\n}\n\n#system_prompt_editor {\n    background-color: var(--SmartThemeBlurTintColor);\n    color: var(--SmartThemeBodyColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 3px;\n    padding: 10px;\n    resize: vertical;\n}\n\n#system_prompt_editor:focus {\n    outline: none;\n    border-color: var(--SmartThemeEmColor);\n}\n\n.system-prompt-actions button {\n    min-width: 100px;\n}\n\n#system_prompt_reset {\n    margin-right: auto;\n}\n\n\n","",{version:3,sources:["webpack://./style.css"],names:[],mappings:"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",sourcesContent:["/* Styles for the Name Tracker extension */\r\n\r\n.name-tracker-settings {\r\n    padding: 5px;\r\n}\r\n\r\n.name-tracker_block {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.name-tracker_block h4 {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    font-weight: bold;\r\n}\r\n\r\n/* Status Display */\r\n.name-tracker-status-block {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n}\r\n\r\n.name-tracker-status {\r\n    font-weight: bold;\r\n    color: var(--SmartThemeBodyColor);\r\n    padding: 5px;\r\n    text-align: center;\r\n}\r\n\r\n/* Character List */\r\n.name-tracker-character-list {\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    margin-top: 5px;\r\n}\r\n\r\n.name-tracker-character {\r\n    padding: 10px;\r\n    margin-bottom: 10px;\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n}\r\n\r\n.name-tracker-character:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n/* Active/loaded character styling (characters that are loaded in SillyTavern) */\r\n.name-tracker-character.main-character {\r\n    border-left: 3px solid #4CAF50;\r\n    background-color: rgba(76, 175, 80, 0.05);\r\n}\r\n\r\n.character-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.character-name {\r\n    font-weight: bold;\r\n    font-size: 1.1em;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.character-name .fa-user {\r\n    color: #4CAF50;\r\n    margin-right: 5px;\r\n}\r\n\r\n.character-name.ignored {\r\n    color: var(--SmartThemeQuoteColor);\r\n    text-decoration: line-through;\r\n}\r\n\r\n.character-badge {\r\n    display: inline-block;\r\n    padding: 2px 8px;\r\n    border-radius: 3px;\r\n    font-size: 0.75em;\r\n    font-weight: bold;\r\n    margin-left: 5px;\r\n}\r\n\r\n.character-badge.main-char {\r\n    background-color: #4CAF50;\r\n    color: #fff;\r\n}\r\n\r\n.character-badge.ignored {\r\n    background-color: #666;\r\n    color: #fff;\r\n}\r\n\r\n.character-badge.unresolved {\r\n    background-color: #ff9800;\r\n    color: #000;\r\n}\r\n\r\n/* Lorebook entry editor modal */\r\n.lorebook-entry-editor h3 {\r\n    margin-top: 0;\r\n    margin-bottom: 20px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.editor-section {\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.editor-section label {\r\n    display: block;\r\n    font-weight: bold;\r\n    margin-bottom: 5px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.editor-section small {\r\n    display: block;\r\n    margin-top: 3px;\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-size: 0.85em;\r\n}\r\n\r\n.editor-section input,\r\n.editor-section textarea {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.character-aliases {\r\n    font-size: 0.9em;\r\n    color: var(--SmartThemeQuoteColor);\r\n    margin-bottom: 8px;\r\n    font-style: italic;\r\n}\r\n\r\n.lorebook-entry-id {\r\n    display: inline-block;\r\n    margin-left: 10px;\r\n    padding: 2px 6px;\r\n    background: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    font-family: monospace;\r\n    font-size: 0.85em;\r\n    font-style: normal;\r\n    color: var(--SmartThemeQuoteColor);\r\n}\r\n\r\n.character-details {\r\n    font-size: 0.85em;\r\n    color: var(--SmartThemeBodyColor);\r\n    margin: 8px 0;\r\n    padding: 8px;\r\n    background: var(--SmartThemeBlurTintColor);\r\n    border-left: 2px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    line-height: 1.4;\r\n}\r\n\r\n.character-actions {\r\n    display: flex;\r\n    gap: 5px;\r\n    flex-wrap: wrap;\r\n    margin-top: 8px;\r\n}\r\n\r\n.character-actions .menu_button {\r\n    flex: 1;\r\n    min-width: 100px;\r\n    padding: 5px 10px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.menu_button.compact {\r\n    padding: 5px 10px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.name-tracker-empty {\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-style: italic;\r\n    text-align: center;\r\n    padding: 20px;\r\n}\r\n\r\n/* Ollama Settings */\r\n.ollama-settings {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border-left: 3px solid var(--SmartThemeBorderColor);\r\n    padding: 10px;\r\n    margin-top: 5px;\r\n    border-radius: 5px;\r\n}\r\n\r\n/* Merge Dialog */\r\n.merge-dialog {\r\n    padding: 15px;\r\n}\r\n\r\n.merge-dialog p {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.merge-dialog strong {\r\n    color: var(--SmartThemeBodyColor);\r\n    font-weight: bold;\r\n}\r\n\r\n.merge-warning {\r\n    color: #ff9800;\r\n    font-size: 0.9em;\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    background-color: rgba(255, 152, 0, 0.1);\r\n    border-left: 3px solid #ff9800;\r\n    border-radius: 3px;\r\n}\r\n\r\n/* Button states */\r\nbutton:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/* Flex utilities */\r\n.flexGap5 {\r\n    gap: 5px;\r\n}\r\n\r\n.flex1 {\r\n    flex: 1;\r\n}\r\n\r\n/* Progress indicator */\r\n.name-tracker-progress {\r\n    margin: 10px 0;\r\n    padding: 10px;\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    text-align: center;\r\n}\r\n\r\n.name-tracker-progress .progress-text {\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n}\r\n\r\n.name-tracker-progress .progress-bar {\r\n    width: 100%;\r\n    height: 20px;\r\n    background-color: var(--black50a);\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n}\r\n\r\n.name-tracker-progress .progress-fill {\r\n    height: 100%;\r\n    background-color: var(--SmartThemeQuoteColor);\r\n    transition: width 0.3s ease;\r\n}\r\n\r\n/* Character details preview (for potential future use) */\r\n.character-details {\r\n    display: none;\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    background-color: var(--black30a);\r\n    border-radius: 5px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.character-details.expanded {\r\n    display: block;\r\n}\r\n\r\n.character-details-section {\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.character-details-section:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.character-details-label {\r\n    font-weight: bold;\r\n    color: var(--SmartThemeQuoteColor);\r\n    margin-right: 5px;\r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 768px) {\r\n    .character-actions {\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .character-actions .menu_button {\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n/* Animation for new characters */\r\n@keyframes fadeIn {\r\n    from {\r\n        opacity: 0;\r\n        transform: translateY(-10px);\r\n    }\r\n    to {\r\n        opacity: 1;\r\n        transform: translateY(0);\r\n    }\r\n}\r\n\r\n.name-tracker-character.new {\r\n    animation: fadeIn 0.3s ease;\r\n}\r\n\r\n/* System Prompt Editor */\r\n.system-prompt-editor h3 {\r\n    margin-top: 0;\r\n    margin-bottom: 10px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.system-prompt-editor p {\r\n    margin-bottom: 10px;\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-size: 0.9em;\r\n}\r\n\r\n#system_prompt_editor {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    color: var(--SmartThemeBodyColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    padding: 10px;\r\n    resize: vertical;\r\n}\r\n\r\n#system_prompt_editor:focus {\r\n    outline: none;\r\n    border-color: var(--SmartThemeEmColor);\r\n}\r\n\r\n.system-prompt-actions button {\r\n    min-width: 100px;\r\n}\r\n\r\n#system_prompt_reset {\r\n    margin-right: auto;\r\n}\r\n\r\n\r\n"],sourceRoot:""}]);const s=i},102(e,t,r){r.d(t,{A:()=>s,r:()=>i});var n=r(806),a=r(462);const o=n.Ay.createModuleLogger("Context");const i=new class{constructor(){this._context=null,this._lastUpdate=0,this._updateInterval=1e3}getContext(){const e=Date.now();if(!this._context||e-this._lastUpdate>this._updateInterval)try{this._context=SillyTavern.getContext(),this._lastUpdate=e}catch(e){throw o.error("Failed to get SillyTavern context:",e),new Error("SillyTavern context not available")}return this._context}getChat(){return this.getContext().chat||[]}getChatMetadata(){return this.getContext().chatMetadata||{}}getChatId(){return this.getContext().chatId||null}getCharacterId(){return this.getContext().characterId}getCharacters(){return this.getContext().characters||[]}getUserName(){return this.getContext().name1||"User"}getExtensionSettings(){return this.getContext().extensionSettings||{}}async saveExtensionSettings(){return a.r_.withErrorBoundary("Context",async()=>{const e=this.getContext();e.saveSettingsDebounced?e.saveSettingsDebounced():o.warn("saveSettingsDebounced not available")},{silent:!0})}async saveChatMetadata(){return a.r_.withErrorBoundary("Context",async()=>{const e=this.getContext();e.saveMetadata?await e.saveMetadata():o.warn("saveMetadata not available")},{silent:!0})}async generateQuietPrompt(e){return a.r_.withErrorBoundary("Context",async()=>{const t=this.getContext();if(!t.generateQuietPrompt)throw new Error("generateQuietPrompt not available");return await t.generateQuietPrompt(e)},{retries:1})}async loadWorldInfo(e){return a.r_.withErrorBoundary("Context",async()=>{const t=this.getContext();if(!t.loadWorldInfo)throw new Error("loadWorldInfo not available");return await t.loadWorldInfo(e)})}async saveWorldInfo(e,t,r=!1){return a.r_.withErrorBoundary("Context",async()=>{const n=this.getContext();if(!n.saveWorldInfo)throw new Error("saveWorldInfo not available");return await n.saveWorldInfo(e,t,r)})}async saveWorldInfoEntry(e,t){return a.r_.withErrorBoundary("Context",async()=>{const r=this.getContext();if(!r.saveWorldInfoEntry)throw new Error("saveWorldInfoEntry not available");return await r.saveWorldInfoEntry(e,t)})}getEventSource(){return this.getContext().eventSource}getEventTypes(){return this.getContext().event_types}async callGenericPopup(e,t,r="",n={}){return a.r_.withErrorBoundary("Context",async()=>{const a=this.getContext();if(!a.callGenericPopup)throw new Error("callGenericPopup not available");return await a.callGenericPopup(e,t,r,n)})}isContextAvailable(){try{return!!this.getContext()}catch{return!1}}clearCache(){this._context=null,this._lastUpdate=0,o.debug("Cleared context cache")}getStatus(){return{available:this.isContextAvailable(),cached:!!this._context,lastUpdate:this._lastUpdate,chatId:this.getChatId(),characterId:this.getCharacterId()}}},s=i},113(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r}).join("")},t.i=function(e,r,n,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);n&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},354(e){e.exports=function(e){var t=e[1],r=e[3];if(!r)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),o="/*# ".concat(a," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},462(e,t,r){r.d(t,{S_:()=>a,Xc:()=>i,r_:()=>o});const n=r(806).Ay.createModuleLogger("ErrorHandler");class a extends Error{constructor(e,t,r,n=!0){super(e),this.name="NameTrackerError",this.code=t,this.module=r,this.recoverable=n,this.timestamp=Date.now()}}const o=new class{constructor(){this.errorHistory=[],this.transactionStack=[],this.recoveryStrategies=new Map,this.criticalErrorCallbacks=[]}async withErrorBoundary(e,t,r={}){const{fallback:a=null,retries:o=0,silent:i=!1,operationId:s=null}=r;let c=null;const l=Date.now();s&&n.trace(s,`Starting operation in ${e}`);for(let r=0;r<=o;r++)try{const r=await t();return s&&n.trace(s,`Operation completed successfully in ${e}`),r}catch(t){if(console.log(`[STnametracker] Error caught in ${e}:`,t),c=t,r<o){console.log(`[STnametracker] Retrying operation in ${e}, attempt ${r+1}/${o+1}:`,t.message),n.warn(`Retrying operation in ${e}, attempt ${r+1}/${o+1}:`,t.message),await this.delay(100*Math.pow(2,r));continue}}console.log(`[STnametracker] All retries failed in ${e}, tracking error:`,c);const d=this.trackError(c,e,{operation:t.name||"anonymous",duration:Date.now()-l,retries:o,operationId:s});if(i||(console.log(`[STnametracker] Notifying user of error in ${e}`),this.notifyUser(d)),a)try{return n.debug(`Attempting fallback for ${e}:`,d.code),await a(d)}catch(t){n.error(`Fallback failed for ${e}:`,t)}const g=this.recoveryStrategies.get(d.code);if(g)try{return await g(d)}catch(e){n.error(`Recovery strategy failed for ${d.code}:`,e)}throw d}trackError(e,t,r={}){let o;if(e instanceof a)o=e;else{const r=this.categorizeError(e,t);o=new a(e.message,r,t,this.isRecoverable(e,r))}return o.context=r,this.errorHistory.push(o),this.errorHistory.length>100&&this.errorHistory.shift(),n.error(`Error in ${t}:`,{code:o.code,message:o.message,context:r}),o}categorizeError(e,t){return e.message.includes("fetch")||e.message.includes("network")?"NETWORK_ERROR":e.message.includes("JSON")||e.message.includes("parse")?"DATA_FORMAT_ERROR":e.message.includes("context")||e.message.includes("SillyTavern")?"CONTEXT_ERROR":"TypeError"===e.name?"TYPE_ERROR":"LLM"===t&&(e.message.includes("quota")||e.message.includes("rate"))?"API_LIMIT_ERROR":"UNKNOWN_ERROR"}isRecoverable(e,t){return!["CONTEXT_ERROR","TYPE_ERROR"].includes(t)}startTransaction(e,t){this.transactionStack.push({id:e,state:JSON.stringify(t),timestamp:Date.now()}),n.debug(`Started transaction: ${e}`)}commitTransaction(e){const t=this.transactionStack.findIndex(t=>t.id===e);-1!==t&&(this.transactionStack.splice(t,1),n.debug(`Committed transaction: ${e}`))}rollbackTransaction(e){const t=this.transactionStack.findIndex(t=>t.id===e);if(-1!==t){const r=this.transactionStack.splice(t,1)[0];return n.debug(`Rolled back transaction: ${e}`),JSON.parse(r.state)}return null}registerRecoveryStrategy(e,t){this.recoveryStrategies.set(e,t),n.debug(`Registered recovery strategy for: ${e}`)}onCriticalError(e){this.criticalErrorCallbacks.push(e)}notifyUser(e){const t=`Name Tracker: ${e.message}`;e.recoverable?toastr.warning(t,"Warning",{timeOut:5e3}):(toastr.error(t,"Error",{timeOut:8e3}),this.criticalErrorCallbacks.forEach(t=>{try{t(e)}catch(e){n.error("Critical error callback failed:",e)}}))}getRecentErrors(e=10){return this.errorHistory.slice(-e)}clearHistory(){this.errorHistory=[],n.debug("Cleared error history")}delay(e){return new Promise(t=>setTimeout(t,e))}},i=o.withErrorBoundary.bind(o)},540(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},548(e,t,r){r.d(t,{A:()=>g,W:()=>d});var n=r(806),a=r(462),o=r(102);const i=n.Ay.createModuleLogger("Settings"),s="STnametracker",c=Object.freeze({enabled:!0,autoAnalyze:!0,messageFrequency:10,llmSource:"sillytavern",ollamaEndpoint:"http://localhost:11434",ollamaModel:"",confidenceThreshold:70,lorebookPosition:0,lorebookDepth:1,lorebookCooldown:5,lorebookScanDepth:1,lorebookProbability:100,lorebookEnabled:!0,debugMode:!1,systemPrompt:null}),l=Object.freeze({characters:{},messageCounter:0,lastHarvestMessage:0,lastScannedMessageId:-1});const d=new class{constructor(){this._settings=null,this._chatData=null,this._settingsCallbacks=[],this._chatCallbacks=[],this._saveTimeout=null,this._initialized=!1}async initialize(){return console.log("[STnametracker] SettingsManager.initialize: Starting..."),a.r_.withErrorBoundary("Settings",async()=>{console.log("[STnametracker] SettingsManager.initialize: Inside error boundary"),this._initialized?console.log("[STnametracker] SettingsManager.initialize: Already initialized"):(console.log("[STnametracker] SettingsManager.initialize: Initializing settings manager"),i.debug("Initializing settings manager"),console.log("[STnametracker] SettingsManager.initialize: Loading global settings..."),await this.loadSettings(),console.log("[STnametracker] SettingsManager.initialize: Global settings loaded"),console.log("[STnametracker] SettingsManager.initialize: Loading chat data..."),await this.loadChatData(),console.log("[STnametracker] SettingsManager.initialize: Chat data loaded"),this._initialized=!0,console.log("[STnametracker] SettingsManager.initialize: Marked as initialized"),i.debug("Settings manager initialized"))})}async loadSettings(){return a.r_.withErrorBoundary("Settings",async()=>{const e=o.A.getExtensionSettings();e[s]||(e[s]={}),this._settings={...c},Object.assign(this._settings,e[s]),e[s]=this._settings,i.debug("Loaded global settings:",Object.keys(this._settings)),this._settingsCallbacks.forEach(e=>{try{e(this._settings)}catch(e){i.error("Settings callback error:",e)}})})}async loadChatData(){return a.r_.withErrorBoundary("Settings",async()=>{const e=o.A.getChatMetadata();e[s]?(this._chatData={...l},Object.assign(this._chatData,e[s]),e[s]=this._chatData,i.debug("Loaded existing chat data:",Object.keys(this._chatData.characters))):(this._chatData={...l},e[s]=this._chatData,i.debug("Initialized new chat data")),this._chatCallbacks.forEach(e=>{try{e(this._chatData)}catch(e){i.error("Chat data callback error:",e)}})})}getSettings(){if(!this._initialized)throw new Error("Settings manager not initialized");return this._settings}getChatData(){if(!this._initialized)throw new Error("Settings manager not initialized");return this._chatData}async updateSetting(e,t){return a.r_.withErrorBoundary("Settings",async()=>{if(!this._initialized)throw new Error("Settings manager not initialized");if(!(e in c))throw new Error(`Unknown setting key: ${e}`);const r=this._settings[e];this._settings[e]=t,i.debug(`Updated setting ${e}: ${r} â†’ ${t}`),this._settingsCallbacks.forEach(n=>{try{n(this._settings,e,t,r)}catch(e){i.error("Settings callback error:",e)}}),await this.saveSettings()})}async updateChatData(e,t){return a.r_.withErrorBoundary("Settings",async()=>{if(!this._initialized)throw new Error("Settings manager not initialized");if(!(e in l))throw new Error(`Unknown chat data key: ${e}`);const r=this._chatData[e];this._chatData[e]=t,i.debug(`Updated chat data ${e}`),this._chatCallbacks.forEach(n=>{try{n(this._chatData,e,t,r)}catch(e){i.error("Chat data callback error:",e)}}),await this.saveChatData()})}getSetting(e,t=void 0){return this._initialized?this._settings[e]??t:t}async setSetting(e,t){return this.updateSetting(e,t)}async saveSettings(){this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(async()=>{await a.r_.withErrorBoundary("Settings",async()=>{await o.A.saveExtensionSettings(),i.debug("Saved global settings")},{silent:!0})},500)}async saveChatData(){return a.r_.withErrorBoundary("Settings",async()=>{await o.A.saveChatMetadata(),i.debug("Saved chat metadata")},{silent:!0})}onSettingsChange(e){this._settingsCallbacks.push(e)}onChatDataChange(e){this._chatCallbacks.push(e)}async onChatChanged(){return a.r_.withErrorBoundary("Settings",async()=>{i.debug("Chat changed, reloading chat data"),await this.loadChatData()})}isEnabled(){return this.getSetting("enabled",!1)}isDebugMode(){return this.getSetting("debugMode",!1)}getAutoAnalysisConfig(){return{enabled:this.getSetting("autoAnalyze",!1),frequency:this.getSetting("messageFrequency",10),lastScanned:this._chatData?.lastScannedMessageId??-1}}getLLMConfig(){return{source:this.getSetting("llmSource","sillytavern"),ollamaEndpoint:this.getSetting("ollamaEndpoint","http://localhost:11434"),ollamaModel:this.getSetting("ollamaModel",""),systemPrompt:this.getSetting("systemPrompt")}}getLorebookConfig(){return{position:this.getSetting("lorebookPosition",0),depth:this.getSetting("lorebookDepth",1),cooldown:this.getSetting("lorebookCooldown",5),scanDepth:this.getSetting("lorebookScanDepth",1),probability:this.getSetting("lorebookProbability",100),enabled:this.getSetting("lorebookEnabled",!0)}}async reset(){return a.r_.withErrorBoundary("Settings",async()=>{i.warn("Resetting settings to defaults"),Object.assign(this._settings,c),Object.assign(this._chatData,l),await this.saveSettings(),await this.saveChatData(),this._settingsCallbacks.forEach(e=>{try{e(this._settings)}catch(e){i.error("Settings callback error:",e)}}),this._chatCallbacks.forEach(e=>{try{e(this._chatData)}catch(e){i.error("Chat data callback error:",e)}})})}getCharacters(){return this._initialized&&this._chatData.characters||{}}getCharacter(e){return this._initialized&&this._chatData.characters[e]||null}async setCharacter(e,t){return a.r_.withErrorBoundary("Settings",async()=>{if(!this._initialized)throw new Error("Settings manager not initialized");this._chatData.characters[e]=t,i.debug(`Updated character: ${e}`),this._chatCallbacks.forEach(r=>{try{r(this._chatData,"character_updated",e,t)}catch(e){i.error("Chat data callback error:",e)}}),await this.saveChatData()})}async removeCharacter(e){return a.r_.withErrorBoundary("Settings",async()=>{if(!this._initialized)throw new Error("Settings manager not initialized");this._chatData.characters[e]&&(delete this._chatData.characters[e],i.debug(`Removed character: ${e}`),this._chatCallbacks.forEach(t=>{try{t(this._chatData,"character_removed",e)}catch(e){i.error("Chat data callback error:",e)}}),await this.saveChatData())})}async clearAllCharacters(){return a.r_.withErrorBoundary("Settings",async()=>{if(!this._initialized)throw new Error("Settings manager not initialized");const e=Object.keys(this._chatData.characters).length;this._chatData.characters={},i.debug(`Cleared all characters (${e} removed)`),this._chatCallbacks.forEach(e=>{try{e(this._chatData,"characters_cleared")}catch(e){i.error("Chat data callback error:",e)}}),await this.saveChatData()})}getStatus(){return{initialized:this._initialized,settingsLoaded:!!this._settings,chatDataLoaded:!!this._chatData,charactersCount:Object.keys(this._chatData?.characters||{}).length,callbacks:{settings:this._settingsCallbacks.length,chatData:this._chatCallbacks.length}}}},g=d},551(e,t,r){r.d(t,{el:()=>h,lF:()=>d,pp:()=>A,undoLastMerge:()=>g});var n=r(806),a=r(462),o=r(548),i=r(695);const s=(0,n.Xv)("characters"),c=new i.h("Character Management");let l=[];async function d(e,t){return(0,a.Xc)("mergeCharacters",async()=>{const r=o.W.getCharacters(),n=r[e],i=r[t];if(!n||!i)throw new a.S_("One or both characters not found");const d={operation:"merge",timestamp:Date.now(),sourceName:e,targetName:t,sourceData:JSON.parse(JSON.stringify(n)),targetDataBefore:JSON.parse(JSON.stringify(i))};l.push(d),l.length>3&&l.shift();for(const e of n.aliases)i.aliases.includes(e)||i.aliases.push(e);n.preferredName===i.preferredName||i.aliases.includes(n.preferredName)||i.aliases.push(n.preferredName),n.physicalAge&&!i.physicalAge&&(i.physicalAge=n.physicalAge),n.mentalAge&&!i.mentalAge&&(i.mentalAge=n.mentalAge),n.physical&&!i.physical&&(i.physical=n.physical),n.personality&&!i.personality&&(i.personality=n.personality),n.sexuality&&!i.sexuality&&(i.sexuality=n.sexuality),n.raceEthnicity&&!i.raceEthnicity&&(i.raceEthnicity=n.raceEthnicity),n.roleSkills&&!i.roleSkills&&(i.roleSkills=n.roleSkills),n.lastInteraction&&!i.lastInteraction&&(i.lastInteraction=n.lastInteraction);for(const e of n.relationships)i.relationships.includes(e)||i.relationships.push(e);return i.lastUpdated=Date.now(),o.W.setCharacter(i.preferredName,i),o.W.removeCharacter(e),s(`Merged ${e} into ${t}`),c.success(`Merged ${e} into ${t}`),d})}async function g(){return(0,a.Xc)("undoLastMerge",async()=>{if(0===l.length)return c.warning("No merge operations to undo"),!1;const e=l.pop();return"merge"!==e.operation?(c.error("Last operation was not a merge"),!1):(o.W.setCharacter(e.sourceName,e.sourceData),o.W.setCharacter(e.targetName,e.targetDataBefore),s("Merge undone successfully"),c.success("Merge undone successfully"),!0)})}function h(e){return(0,a.Xc)("toggleIgnoreCharacter",()=>{const t=o.W.getCharacter(e);if(!t)throw new a.S_("Character not found");t.ignored=!t.ignored,o.W.setCharacter(e,t);const r=t.ignored?"ignored":"unignored";return c.info(`${e} ${r}`),s(`Character ${e} ${r}`),t.ignored})}function A(e){return(0,a.Xc)("hasUnresolvedRelationships",()=>{if(!e.relationships||0===e.relationships.length)return!1;const t=o.W.getCharacters(),r=Object.values(t).reduce((e,t)=>(e.add(t.preferredName.toLowerCase()),t.aliases.forEach(t=>e.add(t.toLowerCase())),e),new Set);return e.relationships.some(e=>e.toLowerCase().split(/\s+/).some(e=>e.length>2&&!r.has(e)))})}},659(e){var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},695(e,t,r){r.d(t,{A:()=>i,h:()=>a});const n=r(806).Ay.createModuleLogger("Notifications");class a{constructor(){this.defaultOptions={timeOut:5e3,extendedTimeOut:2e3,closeButton:!0,progressBar:!0,preventDuplicates:!0},this.prefix="Name Tracker: "}success(e,t="Success",r={}){const a={...this.defaultOptions,...r};toastr.success(this.prefix+e,t,a),n.debug("Success notification:",e)}info(e,t="Info",r={}){const a={...this.defaultOptions,...r};toastr.info(this.prefix+e,t,a),n.debug("Info notification:",e)}warning(e,t="Warning",r={}){const a={...this.defaultOptions,timeOut:8e3,...r};toastr.warning(this.prefix+e,t,a),n.debug("Warning notification:",e)}error(e,t="Error",r={}){const a={...this.defaultOptions,timeOut:1e4,extendedTimeOut:5e3,...r};toastr.error(this.prefix+e,t,a),n.error("Error notification:",e)}persistent(e,t="Notice",r="info"){const a={...this.defaultOptions,timeOut:0,extendedTimeOut:0};switch(r){case"success":toastr.success(this.prefix+e,t,a);break;case"warning":toastr.warning(this.prefix+e,t,a);break;case"error":toastr.error(this.prefix+e,t,a);break;default:toastr.info(this.prefix+e,t,a)}n.debug("Persistent notification:",e)}progress(e,t=0,r=null){const a=r||`progress_${Date.now()}`,o=`\n            <div style="margin-bottom: 8px;">${this.prefix}${e}</div>\n            <div style="background: #333; border-radius: 3px; overflow: hidden;">\n                <div style="background: #007acc; height: 6px; width: ${t}%; transition: width 0.3s ease;"></div>\n            </div>\n            <div style="text-align: center; font-size: 11px; margin-top: 4px;">${t}%</div>\n        `,i={timeOut:0,extendedTimeOut:0,closeButton:!1,progressBar:!1,preventDuplicates:!1,toastId:a};return toastr.remove(),toastr.info(o,"",i),n.debug("Progress notification:",e,`${t}%`),a}clear(){toastr.clear(),n.debug("Cleared all notifications")}confirm(e,t,r=null,a="Confirm"){const o=`confirm_${Date.now()}`,i=`\n            <div style="margin-bottom: 12px;">${e}</div>\n            <div style="text-align: right;">\n                <button class="btn btn-sm btn-secondary me-2" onclick="nameTrackerNotifications.handleConfirmCancel('${o}')">Cancel</button>\n                <button class="btn btn-sm btn-primary" onclick="nameTrackerNotifications.handleConfirmOk('${o}')">Confirm</button>\n            </div>\n        `;window.nameTrackerNotifications=window.nameTrackerNotifications||{},window.nameTrackerNotifications.confirmCallbacks=window.nameTrackerNotifications.confirmCallbacks||{},window.nameTrackerNotifications.confirmCallbacks[o]={onConfirm:t,onCancel:r},window.nameTrackerNotifications.handleConfirmOk=e=>{const t=window.nameTrackerNotifications.confirmCallbacks[e];t&&t.onConfirm&&t.onConfirm(),delete window.nameTrackerNotifications.confirmCallbacks[e],toastr.clear()},window.nameTrackerNotifications.handleConfirmCancel=e=>{const t=window.nameTrackerNotifications.confirmCallbacks[e];t&&t.onCancel&&t.onCancel(),delete window.nameTrackerNotifications.confirmCallbacks[e],toastr.clear()};const s={timeOut:0,extendedTimeOut:0,closeButton:!1,progressBar:!1,preventDuplicates:!1,toastId:o};return toastr.info(i,this.prefix+a,s),n.debug("Confirmation notification:",e),o}getStatus(){return{defaultOptions:this.defaultOptions,prefix:this.prefix,activeConfirms:Object.keys(window.nameTrackerNotifications?.confirmCallbacks||{}).length}}}const o=new a;n.debug("Notifications module loaded");const i=o},806(e,t,r){r.d(t,{Ay:()=>o,Xv:()=>a});const n=new class{constructor(){this.modules=new Map,this.performanceMarks=new Map,this.operationTraces=new Map}createModuleLogger(e){if(this.modules.has(e))return this.modules.get(e);const t={log:(...t)=>this.log(e,"log",...t),warn:(...t)=>this.log(e,"warn",...t),error:(...t)=>this.log(e,"error",...t),debug:(...t)=>this.log(e,"debug",...t),trace:(t,r)=>this.addTrace(e,t,r),startTimer:t=>this.startTimer(e,t),endTimer:t=>this.endTimer(e,t)};return this.modules.set(e,t),t}log(e,t,...r){if(!this.isDebugEnabled())return;const n=`[STnametracker:${e}] ${(new Date).toLocaleTimeString()}`;switch(t){case"error":console.error(n,...r);break;case"warn":console.warn(n,...r);break;case"debug":console.debug(n,...r);break;default:console.log(n,...r)}}addTrace(e,t,r){this.isDebugEnabled()&&(this.operationTraces.has(t)||this.operationTraces.set(t,[]),this.operationTraces.get(t).push({module:e,timestamp:Date.now(),message:r}))}getTrace(e){return this.operationTraces.get(e)||[]}startTimer(e,t){const r=`${e}:${t}`;this.performanceMarks.set(r,performance.now())}endTimer(e,t){const r=`${e}:${t}`,n=this.performanceMarks.get(r);if(void 0===n)return this.log(e,"warn",`Timer '${t}' was not started`),0;const a=performance.now()-n;return this.performanceMarks.delete(r),this.log(e,"debug",`Timer '${t}': ${a.toFixed(2)}ms`),a}isDebugEnabled(){return!0}clear(){this.operationTraces.clear(),this.performanceMarks.clear()}getPerformanceSummary(){return{activeTimers:this.performanceMarks.size,activeTraces:this.operationTraces.size,modules:Array.from(this.modules.keys())}}};function a(e){return n.createModuleLogger(e)}const o=n},825(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0;var n=r(72),a=r.n(n),o=r(825),i=r.n(o),s=r(659),c=r.n(s),l=r(56),d=r.n(l),g=r(540),h=r.n(g),A=r(113),m=r.n(A),u=r(83),p={};p.styleTagTransform=m(),p.setAttributes=d(),p.insert=c().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=h();a()(u.A,p);u.A&&u.A.locals&&u.A.locals;var C=r(806),f=r(462),b=r(102),y=r(548),k=r(695);function B(e){if("string"!=typeof e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML}C.Ay.createModuleLogger("Utils").debug("Utils module loaded");var x=r(551);(0,C.Xv)("llm"),new k.h("LLM Integration"),new Map;const v=(0,C.Xv)("lorebook"),I=new k.h("Lorebook Management");let w=null;(0,C.Xv)("processing"),new k.h("Message Processing");const S=(0,C.Xv)("ui"),T=new k.h("UI Management");function E(){return(0,f.Xc)("updateCharacterList",()=>{const e=$("#name_tracker_character_list");if(0===e.length)return void S("Character list container not found");const t=y.W.getCharacters();if(0===Object.keys(t).length)return void e.html('\n                <div class="name_tracker_no_characters">\n                    <p style="text-align: center; color: var(--SmartThemeQuoteColor);">\n                        No characters tracked yet. Start a conversation and character information will be extracted automatically!\n                    </p>\n                </div>\n            ');const r=Object.values(t).sort((e,t)=>e.isMainChar&&!t.isMainChar?-1:!e.isMainChar&&t.isMainChar?1:e.preferredName.localeCompare(t.preferredName));let n='<div class="name_tracker_character_list">';for(const e of r){const t=e.isMainChar?'<i class="fa-solid fa-user"></i>':"",r=e.ignored?'<span class="char-ignored-badge">IGNORED</span>':"",a=(0,x.pp)(e)?'<span class="char-review-badge">NEEDS REVIEW</span>':"",o=e.aliases&&e.aliases.length>0?`<div class="char-aliases">Aliases: ${B(e.aliases.join(", "))}</div>`:"",i=e.relationships&&e.relationships.length>0?`<div class="char-relationships">Relationships: ${B(e.relationships.join("; "))}</div>`:"",s=e.lastUpdated?new Date(e.lastUpdated).toLocaleString():"Never";n+=`\n                <div class="name_tracker_character_item" data-character="${B(e.preferredName)}">\n                    <div class="char-header">\n                        <span class="char-name">\n                            ${t}\n                            ${B(e.preferredName)}\n                            ${r}\n                            ${a}\n                        </span>\n                        <div class="char-actions">\n                            <button class="char-action-btn char-action-edit" data-name="${B(e.preferredName)}" title="Edit lorebook entry">\n                                <i class="fa-solid fa-edit"></i>\n                            </button>\n                            <button class="char-action-btn char-action-view" data-name="${B(e.preferredName)}" title="View in lorebook">\n                                <i class="fa-solid fa-book"></i>\n                            </button>\n                            <button class="char-action-btn char-action-merge" data-name="${B(e.preferredName)}" title="Merge with another character">\n                                <i class="fa-solid fa-code-merge"></i>\n                            </button>\n                            <button class="char-action-btn char-action-ignore" data-name="${B(e.preferredName)}" title="${e.ignored?"Unignore":"Ignore"} character">\n                                <i class="fa-solid ${e.ignored?"fa-eye":"fa-eye-slash"}"></i>\n                            </button>\n                        </div>\n                    </div>\n                    ${o}\n                    ${i}\n                    <div class="char-metadata">\n                        <span>Confidence: ${e.confidence}%</span>\n                        <span>Updated: ${s}</span>\n                    </div>\n                </div>\n            `}n+="</div>",e.html(n)})}function _(){return(0,f.Xc)("updateStatusDisplay",()=>{const e=$("#name_tracker_status_display");if(0===e.length)return;const t=y.W.getCharacters(),r=Object.keys(t).length,n=y.W.getSetting("messageCounter",0),a=y.W.getSetting("lastScannedMessageId",-1),o=y.W.getSetting("messageFrequency",10),i=b.r.getContext(),s=i?.chat?.length||0,c=Math.max(0,s-a),l=n>0?` (${n} analyzed)`:"",d=i.chat?i.chat.length:0,g=`\n            <div class="name_tracker_status">\n                <div class="status-item">\n                    <strong>Characters tracked:</strong> ${r}${l}\n                </div>\n                <div class="status-item">\n                    <strong>Messages in chat:</strong> ${d}\n                </div>\n                <div class="status-item">\n                    <strong>Last scanned message:</strong> ${a>=0?a+1:"None"}\n                </div>\n                <div class="status-item">\n                    <strong>Pending messages:</strong> ${c}\n                </div>\n                <div class="status-item">\n                    <strong>Messages until next scan:</strong> ${Math.max(0,o-(d-a))}\n                </div>\n            </div>\n        `;e.html(g)})}function z(){return(0,f.Xc)("showCharacterListModal",()=>{const e=Object.values(y.W.getCharacters()||{});let t="";if(0===e.length)t='<p style="text-align: center; color: var(--SmartThemeQuoteColor);">No characters tracked yet</p>';else{e.sort((e,t)=>e.isMainChar&&!t.isMainChar?-1:!e.isMainChar&&t.isMainChar?1:e.preferredName.localeCompare(t.preferredName)),t='<div style="max-height: 400px; overflow-y: auto;">';for(const r of e){const e=[];r.isMainChar&&e.push('<span style="background: var(--SmartThemeBodyColor); padding: 2px 6px; border-radius: 3px; font-size: 0.85em; margin-left: 5px;">MAIN</span>'),r.ignored&&e.push('<span style="background: var(--black70a); padding: 2px 6px; border-radius: 3px; font-size: 0.85em; margin-left: 5px;">IGNORED</span>'),(0,x.pp)(r)&&e.push('<span style="background: var(--crimsonDark); padding: 2px 6px; border-radius: 3px; font-size: 0.85em; margin-left: 5px;">NEEDS REVIEW</span>');const n=r.aliases&&r.aliases.length>0?`<div style="font-size: 0.9em; color: var(--SmartThemeQuoteColor); margin-top: 3px;">Aliases: ${B(r.aliases.join(", "))}</div>`:"";t+=`\n                    <div style="padding: 10px; margin: 5px 0; background: var(--SmartThemeBlurTintColor); border: 1px solid var(--SmartThemeBorderColor); border-radius: 5px;">\n                        <div style="font-weight: bold;">\n                            ${r.isMainChar?'<i class="fa-solid fa-user" style="margin-right: 5px;"></i>':""}\n                            ${B(r.preferredName)}\n                            ${e.join("")}\n                        </div>\n                        ${n}\n                    </div>\n                `}t+="</div>"}const r=`\n            <div class="name-tracker-character-modal">\n                <h3 style="margin-top: 0;">Tracked Characters (${e.length})</h3>\n                ${t}\n                <div style="margin-top: 15px; text-align: center;">\n                    <button class="menu_button" onclick="$('#name_tracker_settings').find('.inline-drawer-toggle').click(); $(this).closest('.popup').remove();">\n                        <i class="fa-solid fa-gear"></i> Open Settings\n                    </button>\n                </div>\n            </div>\n        `,n=b.r.getContext();n.callGenericPopup(r,n.POPUP_TYPE.TEXT,"",{wider:!0,okButton:"Close"})})}function D(){return(0,f.Xc)("initializeUIHandlers",()=>{$(document).on("click",".char-action-merge",async function(){const e=$(this).data("name");await async function(e){return(0,f.Xc)("showMergeDialog",async()=>{const t=y.W.getCharacters(),r=Object.keys(t).filter(t=>t!==e);if(0===r.length)return void T.warning("No other characters to merge with");const n=prompt(`Merge "${e}" into which character? Available: ${r.join(", ")}`);n&&t[n]?(await(0,x.lF)(e,n),E(),_()):n&&T.error("Invalid target character name")})}(e)}),$(document).on("click",".char-action-ignore",function(){const e=$(this).data("name");(0,x.el)(e),E(),_()}),$(document).on("click",".char-action-view",async function(){const e=$(this).data("name");await async function(e){return(0,f.Xc)("viewInLorebook",async()=>{if(!y.W.getCharacter(e))throw new f.S_("Character not found");if(!w)return void I.warning("No active chat or lorebook");const t=b.r.getContext();"function"==typeof t.openWorldInfoEditor?(await t.openWorldInfoEditor(w),I.success(`Opened lorebook for ${e}`)):($("#WorldInfo").click(),I.info(`Please select "${w}" from the World Info panel`))})}(e)}),$(document).on("click",".char-action-edit",async function(){const e=$(this).data("name");await async function(e){return(0,f.Xc)("showEditLorebookModal",async()=>{const t=y.W.getCharacter(e);if(!t)return void T.error("Character not found");const r=[e,...t.aliases||[]].join(", "),n=`\n            <div class="lorebook-entry-editor">\n                <h3>Edit Lorebook Entry: ${B(e)}</h3>\n                \n                <div class="editor-section">\n                    <label for="entry-keys">Keys (comma-separated):</label>\n                    <input type="text" id="entry-keys" class="text_pole" value="${B(r)}" \n                           placeholder="${B(e)}, aliases, nicknames">\n                    <small>These words trigger this entry in the chat context</small>\n                </div>\n                \n                <div class="editor-section">\n                    <label for="entry-content">Entry Content:</label>\n                    <textarea id="entry-content" rows="10" class="text_pole" \n                              placeholder="Description, personality, background, relationships...">${B(t.notes||"")}</textarea>\n                    <small>This will be injected into context when keys are mentioned</small>\n                </div>\n                \n                <div class="editor-section">\n                    <label for="entry-relationships">Relationships:</label>\n                    <textarea id="entry-relationships" rows="3" class="text_pole" \n                              placeholder="Friend of Alice; Enemy of Bob; Works for XYZ Corp">${B((t.relationships||[]).join("; "))}</textarea>\n                    <small>One relationship per line or semicolon-separated</small>\n                </div>\n            </div>\n        `,a=$(`\n            <div class="nametracker-modal" style="\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background: var(--SmartThemeBlurTintColor);\n                border: 1px solid var(--SmartThemeBorderColor);\n                border-radius: 10px;\n                padding: 20px;\n                max-width: 600px;\n                width: 90%;\n                max-height: 80vh;\n                overflow-y: auto;\n                z-index: 9999;\n                box-shadow: 0 4px 20px rgba(0,0,0,0.5);\n            ">\n                ${n}\n                <div style="margin-top: 20px; text-align: right;">\n                    <button class="menu_button" id="entry-save">Save</button>\n                    <button class="menu_button" id="entry-cancel">Cancel</button>\n                </div>\n            </div>\n        `),o=$('\n            <div class="nametracker-overlay" style="\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0,0,0,0.7);\n                z-index: 9998;\n            "></div>\n        ');$("body").append(o).append(a);const i=()=>{a.remove(),o.remove()};a.find("#entry-save").on("click",async()=>{const r=a.find("#entry-keys").val().split(",").map(e=>e.trim()).filter(e=>e),n=a.find("#entry-content").val(),o=a.find("#entry-relationships").val().split(/[;\\n]/).map(e=>e.trim()).filter(e=>e),s=r[0]||e,c=r.slice(1);t.preferredName=s,t.aliases=c,t.notes=n,t.relationships=o,s!==e&&y.W.removeCharacter(e),y.W.setCharacter(s,t),E(),_(),T.success(`Updated lorebook entry for ${s}`),i()}),a.find("#entry-cancel").on("click",i),o.on("click",i)})}(e)}),S("UI event handlers initialized")})}function M(e,t,r,n=null,a=""){return(0,f.Xc)("addMenuButton",()=>{const o=$(`\n            <div class="list-group-item flex-container flexGap5 interactable ${a}" title="${n||e}" tabindex="0">\n                <i class="${t}"></i>\n                <span>${e}</span>\n            </div>\n        `),i=$("#extensionsMenu");i.length?(o.appendTo(i),o.on("click",()=>r())):console.error("[Name Tracker] Could not find the extensions menu")})}function N(){return(0,f.Xc)("toggleAutoHarvest",()=>{const e=y.W.getSetting("autoAnalyze",!0);y.W.setSetting("autoAnalyze",!e),$("#name_tracker_auto_analyze").prop("checked",!e);const t=$("#extensionsMenu .name-tracker-toggle-harvest");e?t.find("i").removeClass("fa-toggle-on").addClass("fa-toggle-off"):t.find("i").removeClass("fa-toggle-off").addClass("fa-toggle-on"),_(),T.success("Auto-harvest "+(e?"disabled":"enabled"))})}async function O(){return(0,f.Xc)("openChatLorebook",async()=>{const e=b.r.getContext(),t=e.chatMetadata?.world_info;t?"function"==typeof e.openWorldInfoEditor?await e.openWorldInfoEditor(t):($("#WorldInfo").click(),T.info(`Please select "${t}" from the World Info panel`)):T.warning("No active chat or lorebook")})}const R="STnametracker",W=`scripts/extensions/third-party/${R}`;const j=C.Ay.createModuleLogger("Main");const U=new class{constructor(){this.initialized=!1,this.modules=new Map}async initialize(){return console.log("[STnametracker] Enter initialize() method"),f.r_.withErrorBoundary("Main",async()=>{console.log("[STnametracker] Inside error boundary"),this.initialized?console.log("[STnametracker] Already initialized, skipping"):(console.log("[STnametracker] Starting initialization sequence"),j.log("Starting Name Tracker Extension v2.1.0"),console.log("[STnametracker] Step 1: Initializing core systems..."),await this.initializeCore(),console.log("[STnametracker] Step 1: Core systems completed"),console.log("[STnametracker] Step 2: Initializing feature modules..."),await this.initializeModules(),console.log("[STnametracker] Step 2: Feature modules completed"),console.log("[STnametracker] Step 3: Initializing UI..."),await this.initializeUI(),console.log("[STnametracker] Step 3: UI completed"),console.log("[STnametracker] Step 4: Registering event listeners..."),this.registerEventListeners(),console.log("[STnametracker] Step 4: Event listeners completed"),this.initialized=!0,console.log("[STnametracker] Marking as initialized"),j.log("Name Tracker Extension initialized successfully"),console.log("[STnametracker] Full initialization sequence completed successfully"))},{retries:2,fallback:async e=>(j.error("Failed to initialize extension:",e),k.A.error("Failed to initialize","Extension Error"),!1)})}async initializeCore(){console.log("[STnametracker] initializeCore: Starting..."),j.debug("Initializing core systems..."),console.log("[STnametracker] initializeCore: Connecting debug system..."),C.Ay.isDebugEnabled=()=>y.A.isDebugMode(),console.log("[STnametracker] initializeCore: Debug system connected"),console.log("[STnametracker] initializeCore: Initializing settings manager..."),await y.A.initialize(),console.log("[STnametracker] initializeCore: Settings manager initialized"),this.setupErrorRecovery(),j.debug("Core systems initialized")}async initializeModules(){j.debug("Initializing feature modules...");try{await async function(){return(0,f.Xc)("initializeLorebook",async()=>{const e=b.r.getContext();if(!e.chatId)return v("No active chat, skipping lorebook initialization"),w=null,null;const t="world_info",r=e.chatMetadata;if(!r)return v("No chat metadata available, skipping lorebook initialization"),w=null,null;if(r[t])return w=r[t],v(`Using existing chat lorebook: ${w}`),w;const n=`NameTracker_${e.chatId}`.replace(/[^a-z0-9 -]/gi,"_").replace(/_{2,}/g,"_").substring(0,64);v(`Creating new chat lorebook: ${n}`),w=n,r[t]=w;try{await e.saveMetadata(),v(`Bound lorebook to chat: ${w}`),await e.loadWorldInfo(w)||(v(`Creating initial empty lorebook file: ${w}`),await e.saveWorldInfo(w,{entries:{}},!0)),I.info(`Chat lorebook "${w}" created and bound to this chat`,{timeOut:5e3})}catch(e){throw console.error("Failed to initialize lorebook:",e),w=null,new f.S_(`Failed to initialize lorebook: ${e.message}`)}return w})}(),j.debug("Feature modules initialized")}catch(e){throw j.error("Failed to initialize feature modules:",e),e}}async initializeUI(){console.log("[STnametracker] initializeUI: Starting UI initialization..."),j.debug("Initializing UI...");try{console.log("[STnametracker] initializeUI: Loading settings HTML from:",`${W}/settings.html`);const e=await $.get(`${W}/settings.html`);console.log("[STnametracker] initializeUI: Settings HTML loaded, length:",e.length),console.log("[STnametracker] initializeUI: Finding #extensions_settings element...");const t=$("#extensions_settings");console.log("[STnametracker] initializeUI: Target element found:",t.length>0),t.append(e),console.log("[STnametracker] initializeUI: Settings HTML appended"),console.log("[STnametracker] initializeUI: Initializing UI handlers..."),D(),console.log("[STnametracker] initializeUI: UI handlers initialized"),console.log("[STnametracker] initializeUI: Initializing menu buttons..."),(0,f.Xc)("initializeMenuButtons",()=>{M("Toggle Auto-Harvest",y.W.getSetting("autoAnalyze",!0)?"fa-solid fa-toggle-on":"fa-solid fa-toggle-off",N,"Toggle automatic character harvesting on/off","name-tracker-toggle-harvest"),M("View Characters","fa-solid fa-users",z,"View all tracked characters"),M("Open Chat Lorebook","fa-solid fa-book",O,"Open the Name Tracker chat lorebook in the World Info editor"),S("Extension menu buttons initialized")}),console.log("[STnametracker] initializeUI: Menu buttons initialized"),j.debug("UI initialized")}catch(e){throw j.error("Failed to initialize UI:",e),e}}registerEventListeners(){j.debug("Registering event listeners...");try{const e=b.A.getContext(),t=e.eventSource,r=e.event_types;if(!t||!r)return void j.warn("SillyTavern event system not available");t.on(r.MESSAGE_RECEIVED,async e=>{j.debug("Message received event:",e)}),t.on(r.MESSAGE_SENT,async e=>{j.debug("Message sent event:",e)}),t.on(r.CHAT_CHANGED,async()=>{j.debug("Chat changed event received"),await y.A.onChatChanged()}),j.debug("Event listeners registered")}catch(e){j.error("Failed to register event listeners:",e)}}setupErrorRecovery(){f.r_.registerRecoveryStrategy("NETWORK_ERROR",async e=>(j.warn("Attempting network error recovery"),await f.r_.delay(2e3),k.A.info("Retrying network operation..."),null)),f.r_.registerRecoveryStrategy("DATA_FORMAT_ERROR",async e=>(j.warn("Data format error, clearing cache"),null)),f.r_.onCriticalError(e=>{j.error("Critical error occurred:",e)})}getStatus(){return{initialized:this.initialized,context:b.A.getStatus(),settings:y.A.getStatus(),debug:C.Ay.getPerformanceSummary(),errors:f.r_.getRecentErrors(5).length}}async shutdown(){return f.r_.withErrorBoundary("Main",async()=>{j.log("Shutting down Name Tracker Extension"),this.initialized=!1,C.Ay.clear(),j.log("Extension shutdown complete")},{silent:!0})}};jQuery(async()=>{console.log("[STnametracker] jQuery ready, starting extension load...");try{console.log("[STnametracker] Logger available, initializing..."),j.log("Name Tracker Extension loading..."),console.log("[STnametracker] Setting up extension_settings..."),window.extension_settings||(console.log("[STnametracker] Creating window.extension_settings"),window.extension_settings={}),console.log("[STnametracker] Current extension_settings keys:",Object.keys(window.extension_settings)),window.extension_settings[R]=window.extension_settings[R]||{},console.log("[STnametracker] Extension settings initialized"),console.log("[STnametracker] Starting main initialization..."),await U.initialize(),console.log("[STnametracker] Main initialization completed"),window.nameTrackerExtension=U,window.ntDebug={status:()=>U.getStatus(),errors:()=>f.r_.getRecentErrors(),settings:()=>window.extension_settings?.[R]||{},chatData:()=>y.A.getChatData(),clear:()=>C.Ay.clear()},j.log("Name Tracker Extension loaded successfully"),console.log("[STnametracker] Extension loaded. Use ntDebug.status() for diagnostics.")}catch(e){console.error("[STnametracker] Failed to initialize:",e),k.A.error("Extension failed to load","Critical Error")}})})();
//# sourceMappingURL=index.js.map