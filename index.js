(()=>{"use strict";var r={56(r,t,n){r.exports=function(r){var t=n.nc;t&&r.setAttribute("nonce",t)}},72(r){var t=[];function n(r){for(var n=-1,e=0;e<t.length;e++)if(t[e].identifier===r){n=e;break}return n}function e(r,e){for(var o={},i=[],s=0;s<r.length;s++){var c=r[s],l=e.base?c[0]+e.base:c[0],A=o[l]||0,d="".concat(l," ").concat(A);o[l]=A+1;var g=n(d),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==g)t[g].references++,t[g].updater(m);else{var h=a(m,e);e.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}i.push(d)}return i}function a(r,t){var n=t.domAPI(t);n.update(r);return function(t){if(t){if(t.css===r.css&&t.media===r.media&&t.sourceMap===r.sourceMap&&t.supports===r.supports&&t.layer===r.layer)return;n.update(r=t)}else n.remove()}}r.exports=function(r,a){var o=e(r=r||[],a=a||{});return function(r){r=r||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var c=e(r,a),l=0;l<o.length;l++){var A=n(o[l]);0===t[A].references&&(t[A].updater(),t.splice(A,1))}o=c}}},83(r,t,n){n.d(t,{A:()=>s});var e=n(354),a=n.n(e),o=n(314),i=n.n(o)()(a());i.push([r.id,"/* Styles for the Name Tracker extension */\n\n.name-tracker-settings {\n    padding: 5px;\n}\n\n.name-tracker_block {\n    margin-bottom: 10px;\n}\n\n.name-tracker_block h4 {\n    margin-top: 10px;\n    margin-bottom: 10px;\n    font-weight: bold;\n}\n\n/* Status Display */\n.name-tracker-status-block {\n    background-color: var(--SmartThemeBlurTintColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    padding: 10px;\n}\n\n.name-tracker-status {\n    font-weight: bold;\n    color: var(--SmartThemeBodyColor);\n    padding: 5px;\n    text-align: center;\n}\n\n/* Character List */\n.name-tracker-character-list {\n    max-height: 400px;\n    overflow-y: auto;\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    padding: 5px;\n    margin-top: 5px;\n}\n\n.name-tracker-character {\n    padding: 10px;\n    margin-bottom: 10px;\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    background-color: var(--SmartThemeBlurTintColor);\n}\n\n.name-tracker-character:last-child {\n    margin-bottom: 0;\n}\n\n/* Active/loaded character styling (characters that are loaded in SillyTavern) */\n.name-tracker-character.main-character {\n    border-left: 3px solid #4CAF50;\n    background-color: rgba(76, 175, 80, 0.05);\n}\n\n.character-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 5px;\n}\n\n.character-name {\n    font-weight: bold;\n    font-size: 1.1em;\n    color: var(--SmartThemeBodyColor);\n}\n\n.character-name .fa-user {\n    color: #4CAF50;\n    margin-right: 5px;\n}\n\n.character-name.ignored {\n    color: var(--SmartThemeQuoteColor);\n    text-decoration: line-through;\n}\n\n.character-badge {\n    display: inline-block;\n    padding: 2px 8px;\n    border-radius: 3px;\n    font-size: 0.75em;\n    font-weight: bold;\n    margin-left: 5px;\n}\n\n.character-badge.main-char {\n    background-color: #4CAF50;\n    color: #fff;\n}\n\n.character-badge.ignored {\n    background-color: #666;\n    color: #fff;\n}\n\n.character-badge.unresolved {\n    background-color: #ff9800;\n    color: #000;\n}\n\n/* Lorebook entry editor modal */\n.lorebook-entry-editor h3 {\n    margin-top: 0;\n    margin-bottom: 20px;\n    color: var(--SmartThemeBodyColor);\n}\n\n.editor-section {\n    margin-bottom: 15px;\n}\n\n.editor-section label {\n    display: block;\n    font-weight: bold;\n    margin-bottom: 5px;\n    color: var(--SmartThemeBodyColor);\n}\n\n.editor-section small {\n    display: block;\n    margin-top: 3px;\n    color: var(--SmartThemeQuoteColor);\n    font-size: 0.85em;\n}\n\n.editor-section input,\n.editor-section textarea {\n    width: 100%;\n    box-sizing: border-box;\n}\n\n.character-aliases {\n    font-size: 0.9em;\n    color: var(--SmartThemeQuoteColor);\n    margin-bottom: 8px;\n    font-style: italic;\n}\n\n.lorebook-entry-id {\n    display: inline-block;\n    margin-left: 10px;\n    padding: 2px 6px;\n    background: var(--SmartThemeBlurTintColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 3px;\n    font-family: monospace;\n    font-size: 0.85em;\n    font-style: normal;\n    color: var(--SmartThemeQuoteColor);\n}\n\n.character-details {\n    font-size: 0.85em;\n    color: var(--SmartThemeBodyColor);\n    margin: 8px 0;\n    padding: 8px;\n    background: var(--SmartThemeBlurTintColor);\n    border-left: 2px solid var(--SmartThemeBorderColor);\n    border-radius: 3px;\n    line-height: 1.4;\n}\n\n.character-actions {\n    display: flex;\n    gap: 5px;\n    flex-wrap: wrap;\n    margin-top: 8px;\n}\n\n.character-actions .menu_button {\n    flex: 1;\n    min-width: 100px;\n    padding: 5px 10px;\n    font-size: 0.9em;\n}\n\n.menu_button.compact {\n    padding: 5px 10px;\n    font-size: 0.9em;\n}\n\n.name-tracker-empty {\n    color: var(--SmartThemeQuoteColor);\n    font-style: italic;\n    text-align: center;\n    padding: 20px;\n}\n\n/* Ollama Settings */\n.ollama-settings {\n    background-color: var(--SmartThemeBlurTintColor);\n    border-left: 3px solid var(--SmartThemeBorderColor);\n    padding: 10px;\n    margin-top: 5px;\n    border-radius: 5px;\n}\n\n/* Merge Dialog */\n.merge-dialog {\n    padding: 15px;\n}\n\n.merge-dialog p {\n    margin-bottom: 10px;\n}\n\n.merge-dialog strong {\n    color: var(--SmartThemeBodyColor);\n    font-weight: bold;\n}\n\n.merge-warning {\n    color: #ff9800;\n    font-size: 0.9em;\n    margin-top: 10px;\n    padding: 10px;\n    background-color: rgba(255, 152, 0, 0.1);\n    border-left: 3px solid #ff9800;\n    border-radius: 3px;\n}\n\n/* Button states */\nbutton:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/* Flex utilities */\n.flexGap5 {\n    gap: 5px;\n}\n\n.flex1 {\n    flex: 1;\n}\n\n/* Progress indicator */\n.name-tracker-progress {\n    margin: 10px 0;\n    padding: 10px;\n    background-color: var(--SmartThemeBlurTintColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 5px;\n    text-align: center;\n}\n\n.name-tracker-progress .progress-text {\n    margin-bottom: 5px;\n    font-weight: bold;\n}\n\n.name-tracker-progress .progress-bar {\n    width: 100%;\n    height: 20px;\n    background-color: var(--black50a);\n    border-radius: 10px;\n    overflow: hidden;\n}\n\n.name-tracker-progress .progress-fill {\n    height: 100%;\n    background-color: var(--SmartThemeQuoteColor);\n    transition: width 0.3s ease;\n}\n\n/* Character details preview (for potential future use) */\n.character-details {\n    display: none;\n    margin-top: 10px;\n    padding: 10px;\n    background-color: var(--black30a);\n    border-radius: 5px;\n    font-size: 0.9em;\n}\n\n.character-details.expanded {\n    display: block;\n}\n\n.character-details-section {\n    margin-bottom: 8px;\n}\n\n.character-details-section:last-child {\n    margin-bottom: 0;\n}\n\n.character-details-label {\n    font-weight: bold;\n    color: var(--SmartThemeQuoteColor);\n    margin-right: 5px;\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n    .character-actions {\n        flex-direction: column;\n    }\n    \n    .character-actions .menu_button {\n        width: 100%;\n    }\n}\n\n/* Animation for new characters */\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n        transform: translateY(-10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.name-tracker-character.new {\n    animation: fadeIn 0.3s ease;\n}\n\n/* System Prompt Editor */\n.system-prompt-editor h3 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    color: var(--SmartThemeBodyColor);\n}\n\n.system-prompt-editor p {\n    margin-bottom: 10px;\n    color: var(--SmartThemeQuoteColor);\n    font-size: 0.9em;\n}\n\n#system_prompt_editor {\n    background-color: var(--SmartThemeBlurTintColor);\n    color: var(--SmartThemeBodyColor);\n    border: 1px solid var(--SmartThemeBorderColor);\n    border-radius: 3px;\n    padding: 10px;\n    resize: vertical;\n}\n\n#system_prompt_editor:focus {\n    outline: none;\n    border-color: var(--SmartThemeEmColor);\n}\n\n.system-prompt-actions button {\n    min-width: 100px;\n}\n\n#system_prompt_reset {\n    margin-right: auto;\n}\n\n\n","",{version:3,sources:["webpack://./style.css"],names:[],mappings:"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",sourcesContent:["/* Styles for the Name Tracker extension */\r\n\r\n.name-tracker-settings {\r\n    padding: 5px;\r\n}\r\n\r\n.name-tracker_block {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.name-tracker_block h4 {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    font-weight: bold;\r\n}\r\n\r\n/* Status Display */\r\n.name-tracker-status-block {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n}\r\n\r\n.name-tracker-status {\r\n    font-weight: bold;\r\n    color: var(--SmartThemeBodyColor);\r\n    padding: 5px;\r\n    text-align: center;\r\n}\r\n\r\n/* Character List */\r\n.name-tracker-character-list {\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    margin-top: 5px;\r\n}\r\n\r\n.name-tracker-character {\r\n    padding: 10px;\r\n    margin-bottom: 10px;\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n}\r\n\r\n.name-tracker-character:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n/* Active/loaded character styling (characters that are loaded in SillyTavern) */\r\n.name-tracker-character.main-character {\r\n    border-left: 3px solid #4CAF50;\r\n    background-color: rgba(76, 175, 80, 0.05);\r\n}\r\n\r\n.character-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.character-name {\r\n    font-weight: bold;\r\n    font-size: 1.1em;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.character-name .fa-user {\r\n    color: #4CAF50;\r\n    margin-right: 5px;\r\n}\r\n\r\n.character-name.ignored {\r\n    color: var(--SmartThemeQuoteColor);\r\n    text-decoration: line-through;\r\n}\r\n\r\n.character-badge {\r\n    display: inline-block;\r\n    padding: 2px 8px;\r\n    border-radius: 3px;\r\n    font-size: 0.75em;\r\n    font-weight: bold;\r\n    margin-left: 5px;\r\n}\r\n\r\n.character-badge.main-char {\r\n    background-color: #4CAF50;\r\n    color: #fff;\r\n}\r\n\r\n.character-badge.ignored {\r\n    background-color: #666;\r\n    color: #fff;\r\n}\r\n\r\n.character-badge.unresolved {\r\n    background-color: #ff9800;\r\n    color: #000;\r\n}\r\n\r\n/* Lorebook entry editor modal */\r\n.lorebook-entry-editor h3 {\r\n    margin-top: 0;\r\n    margin-bottom: 20px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.editor-section {\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.editor-section label {\r\n    display: block;\r\n    font-weight: bold;\r\n    margin-bottom: 5px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.editor-section small {\r\n    display: block;\r\n    margin-top: 3px;\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-size: 0.85em;\r\n}\r\n\r\n.editor-section input,\r\n.editor-section textarea {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.character-aliases {\r\n    font-size: 0.9em;\r\n    color: var(--SmartThemeQuoteColor);\r\n    margin-bottom: 8px;\r\n    font-style: italic;\r\n}\r\n\r\n.lorebook-entry-id {\r\n    display: inline-block;\r\n    margin-left: 10px;\r\n    padding: 2px 6px;\r\n    background: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    font-family: monospace;\r\n    font-size: 0.85em;\r\n    font-style: normal;\r\n    color: var(--SmartThemeQuoteColor);\r\n}\r\n\r\n.character-details {\r\n    font-size: 0.85em;\r\n    color: var(--SmartThemeBodyColor);\r\n    margin: 8px 0;\r\n    padding: 8px;\r\n    background: var(--SmartThemeBlurTintColor);\r\n    border-left: 2px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    line-height: 1.4;\r\n}\r\n\r\n.character-actions {\r\n    display: flex;\r\n    gap: 5px;\r\n    flex-wrap: wrap;\r\n    margin-top: 8px;\r\n}\r\n\r\n.character-actions .menu_button {\r\n    flex: 1;\r\n    min-width: 100px;\r\n    padding: 5px 10px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.menu_button.compact {\r\n    padding: 5px 10px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.name-tracker-empty {\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-style: italic;\r\n    text-align: center;\r\n    padding: 20px;\r\n}\r\n\r\n/* Ollama Settings */\r\n.ollama-settings {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border-left: 3px solid var(--SmartThemeBorderColor);\r\n    padding: 10px;\r\n    margin-top: 5px;\r\n    border-radius: 5px;\r\n}\r\n\r\n/* Merge Dialog */\r\n.merge-dialog {\r\n    padding: 15px;\r\n}\r\n\r\n.merge-dialog p {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.merge-dialog strong {\r\n    color: var(--SmartThemeBodyColor);\r\n    font-weight: bold;\r\n}\r\n\r\n.merge-warning {\r\n    color: #ff9800;\r\n    font-size: 0.9em;\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    background-color: rgba(255, 152, 0, 0.1);\r\n    border-left: 3px solid #ff9800;\r\n    border-radius: 3px;\r\n}\r\n\r\n/* Button states */\r\nbutton:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/* Flex utilities */\r\n.flexGap5 {\r\n    gap: 5px;\r\n}\r\n\r\n.flex1 {\r\n    flex: 1;\r\n}\r\n\r\n/* Progress indicator */\r\n.name-tracker-progress {\r\n    margin: 10px 0;\r\n    padding: 10px;\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 5px;\r\n    text-align: center;\r\n}\r\n\r\n.name-tracker-progress .progress-text {\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n}\r\n\r\n.name-tracker-progress .progress-bar {\r\n    width: 100%;\r\n    height: 20px;\r\n    background-color: var(--black50a);\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n}\r\n\r\n.name-tracker-progress .progress-fill {\r\n    height: 100%;\r\n    background-color: var(--SmartThemeQuoteColor);\r\n    transition: width 0.3s ease;\r\n}\r\n\r\n/* Character details preview (for potential future use) */\r\n.character-details {\r\n    display: none;\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    background-color: var(--black30a);\r\n    border-radius: 5px;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.character-details.expanded {\r\n    display: block;\r\n}\r\n\r\n.character-details-section {\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.character-details-section:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.character-details-label {\r\n    font-weight: bold;\r\n    color: var(--SmartThemeQuoteColor);\r\n    margin-right: 5px;\r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 768px) {\r\n    .character-actions {\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .character-actions .menu_button {\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n/* Animation for new characters */\r\n@keyframes fadeIn {\r\n    from {\r\n        opacity: 0;\r\n        transform: translateY(-10px);\r\n    }\r\n    to {\r\n        opacity: 1;\r\n        transform: translateY(0);\r\n    }\r\n}\r\n\r\n.name-tracker-character.new {\r\n    animation: fadeIn 0.3s ease;\r\n}\r\n\r\n/* System Prompt Editor */\r\n.system-prompt-editor h3 {\r\n    margin-top: 0;\r\n    margin-bottom: 10px;\r\n    color: var(--SmartThemeBodyColor);\r\n}\r\n\r\n.system-prompt-editor p {\r\n    margin-bottom: 10px;\r\n    color: var(--SmartThemeQuoteColor);\r\n    font-size: 0.9em;\r\n}\r\n\r\n#system_prompt_editor {\r\n    background-color: var(--SmartThemeBlurTintColor);\r\n    color: var(--SmartThemeBodyColor);\r\n    border: 1px solid var(--SmartThemeBorderColor);\r\n    border-radius: 3px;\r\n    padding: 10px;\r\n    resize: vertical;\r\n}\r\n\r\n#system_prompt_editor:focus {\r\n    outline: none;\r\n    border-color: var(--SmartThemeEmColor);\r\n}\r\n\r\n.system-prompt-actions button {\r\n    min-width: 100px;\r\n}\r\n\r\n#system_prompt_reset {\r\n    margin-right: auto;\r\n}\r\n\r\n\r\n"],sourceRoot:""}]);const s=i},113(r){r.exports=function(r,t){if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}},314(r){r.exports=function(r){var t=[];return t.toString=function(){return this.map(function(t){var n="",e=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),e&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=r(t),e&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(r,n,e,a,o){"string"==typeof r&&(r=[[null,r,void 0]]);var i={};if(e)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<r.length;l++){var A=[].concat(r[l]);e&&i[A[0]]||(void 0!==o&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=o),n&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=n):A[2]=n),a&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=a):A[4]="".concat(a)),t.push(A))}},t}},354(r){r.exports=function(r){var t=r[1],n=r[3];if(!n)return t;if("function"==typeof btoa){var e=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e),o="/*# ".concat(a," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},540(r){r.exports=function(r){var t=document.createElement("style");return r.setAttributes(t,r.attributes),r.insert(t,r.options),t}},659(r){var t={};r.exports=function(r,n){var e=function(r){if(void 0===t[r]){var n=document.querySelector(r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(r){n=null}t[r]=n}return t[r]}(r);if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(n)}},825(r){r.exports=function(r){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=r.insertStyleElement(r);return{update:function(n){!function(r,t,n){var e="";n.supports&&(e+="@supports (".concat(n.supports,") {")),n.media&&(e+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(e+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),e+=n.css,a&&(e+="}"),n.media&&(e+="}"),n.supports&&(e+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(e,r,t.options)}(t,r,n)},remove:function(){!function(r){if(null===r.parentNode)return!1;r.parentNode.removeChild(r)}(t)}}}}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var o=t[e]={id:e,exports:{}};return r[e](o,o.exports,n),o.exports}n.n=r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return n.d(t,{a:t}),t},n.d=(r,t)=>{for(var e in t)n.o(t,e)&&!n.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})},n.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),n.nc=void 0;var e=n(72),a=n.n(e),o=n(825),i=n.n(o),s=n(659),c=n.n(s),l=n(56),A=n.n(l),d=n(540),g=n.n(d),m=n(113),h=n.n(m),C=n(83),u={};u.styleTagTransform=h(),u.setAttributes=A(),u.insert=c().bind(null,"head"),u.domAPI=i(),u.insertStyleElement=g();a()(C.A,u);C.A&&C.A.locals&&C.A.locals;const p=new class{constructor(){this.modules=new Map,this.performanceMarks=new Map,this.operationTraces=new Map}createModuleLogger(r){if(this.modules.has(r))return this.modules.get(r);const t={log:(...t)=>this.log(r,"log",...t),warn:(...t)=>this.log(r,"warn",...t),error:(...t)=>this.log(r,"error",...t),debug:(...t)=>this.log(r,"debug",...t),trace:(t,n)=>this.addTrace(r,t,n),startTimer:t=>this.startTimer(r,t),endTimer:t=>this.endTimer(r,t)};return this.modules.set(r,t),t}log(r,t,...n){if(!this.isDebugEnabled())return;const e=`[STnametracker:${r}] ${(new Date).toLocaleTimeString()}`;switch(t){case"error":console.error(e,...n);break;case"warn":console.warn(e,...n);break;case"debug":console.debug(e,...n);break;default:console.log(e,...n)}}addTrace(r,t,n){this.isDebugEnabled()&&(this.operationTraces.has(t)||this.operationTraces.set(t,[]),this.operationTraces.get(t).push({module:r,timestamp:Date.now(),message:n}))}getTrace(r){return this.operationTraces.get(r)||[]}startTimer(r,t){const n=`${r}:${t}`;this.performanceMarks.set(n,performance.now())}endTimer(r,t){const n=`${r}:${t}`,e=this.performanceMarks.get(n);if(void 0===e)return this.log(r,"warn",`Timer '${t}' was not started`),0;const a=performance.now()-e;return this.performanceMarks.delete(n),this.log(r,"debug",`Timer '${t}': ${a.toFixed(2)}ms`),a}isDebugEnabled(){return!0}clear(){this.operationTraces.clear(),this.performanceMarks.clear()}getPerformanceSummary(){return{activeTimers:this.performanceMarks.size,activeTraces:this.operationTraces.size,modules:Array.from(this.modules.keys())}}},b=p,B=b.createModuleLogger("ErrorHandler");class f extends Error{constructor(r,t,n,e=!0){super(r),this.name="NameTrackerError",this.code=t,this.module=n,this.recoverable=e,this.timestamp=Date.now()}}const x=new class{constructor(){this.errorHistory=[],this.transactionStack=[],this.recoveryStrategies=new Map,this.criticalErrorCallbacks=[]}async withErrorBoundary(r,t,n={}){const{fallback:e=null,retries:a=0,silent:o=!1,operationId:i=null}=n;let s=null;const c=Date.now();i&&B.trace(i,`Starting operation in ${r}`);for(let n=0;n<=a;n++)try{const n=await t();return i&&B.trace(i,`Operation completed successfully in ${r}`),n}catch(t){if(s=t,n<a){B.warn(`Retrying operation in ${r}, attempt ${n+1}/${a+1}:`,t.message),await this.delay(100*Math.pow(2,n));continue}}const l=this.trackError(s,r,{operation:t.name||"anonymous",duration:Date.now()-c,retries:a,operationId:i});if(o||this.notifyUser(l),e)try{return B.debug(`Attempting fallback for ${r}:`,l.code),await e(l)}catch(t){B.error(`Fallback failed for ${r}:`,t)}const A=this.recoveryStrategies.get(l.code);if(A)try{return await A(l)}catch(r){B.error(`Recovery strategy failed for ${l.code}:`,r)}throw l}trackError(r,t,n={}){let e;if(r instanceof f)e=r;else{const n=this.categorizeError(r,t);e=new f(r.message,n,t,this.isRecoverable(r,n))}return e.context=n,this.errorHistory.push(e),this.errorHistory.length>100&&this.errorHistory.shift(),B.error(`Error in ${t}:`,{code:e.code,message:e.message,context:n}),e}categorizeError(r,t){return r.message.includes("fetch")||r.message.includes("network")?"NETWORK_ERROR":r.message.includes("JSON")||r.message.includes("parse")?"DATA_FORMAT_ERROR":r.message.includes("context")||r.message.includes("SillyTavern")?"CONTEXT_ERROR":"TypeError"===r.name?"TYPE_ERROR":"LLM"===t&&(r.message.includes("quota")||r.message.includes("rate"))?"API_LIMIT_ERROR":"UNKNOWN_ERROR"}isRecoverable(r,t){return!["CONTEXT_ERROR","TYPE_ERROR"].includes(t)}startTransaction(r,t){this.transactionStack.push({id:r,state:JSON.stringify(t),timestamp:Date.now()}),B.debug(`Started transaction: ${r}`)}commitTransaction(r){const t=this.transactionStack.findIndex(t=>t.id===r);-1!==t&&(this.transactionStack.splice(t,1),B.debug(`Committed transaction: ${r}`))}rollbackTransaction(r){const t=this.transactionStack.findIndex(t=>t.id===r);if(-1!==t){const n=this.transactionStack.splice(t,1)[0];return B.debug(`Rolled back transaction: ${r}`),JSON.parse(n.state)}return null}registerRecoveryStrategy(r,t){this.recoveryStrategies.set(r,t),B.debug(`Registered recovery strategy for: ${r}`)}onCriticalError(r){this.criticalErrorCallbacks.push(r)}notifyUser(r){const t=`Name Tracker: ${r.message}`;r.recoverable?toastr.warning(t,"Warning",{timeOut:5e3}):(toastr.error(t,"Error",{timeOut:8e3}),this.criticalErrorCallbacks.forEach(t=>{try{t(r)}catch(r){B.error("Critical error callback failed:",r)}}))}getRecentErrors(r=10){return this.errorHistory.slice(-r)}clearHistory(){this.errorHistory=[],B.debug("Cleared error history")}delay(r){return new Promise(t=>setTimeout(t,r))}},I=b.createModuleLogger("Context");const y=new class{constructor(){this._context=null,this._lastUpdate=0,this._updateInterval=1e3}getContext(){const r=Date.now();if(!this._context||r-this._lastUpdate>this._updateInterval)try{this._context=SillyTavern.getContext(),this._lastUpdate=r}catch(r){throw I.error("Failed to get SillyTavern context:",r),new Error("SillyTavern context not available")}return this._context}getChat(){return this.getContext().chat||[]}getChatMetadata(){return this.getContext().chatMetadata||{}}getChatId(){return this.getContext().chatId||null}getCharacterId(){return this.getContext().characterId}getCharacters(){return this.getContext().characters||[]}getUserName(){return this.getContext().name1||"User"}getExtensionSettings(){return this.getContext().extensionSettings||{}}async saveExtensionSettings(){return x.withErrorBoundary("Context",async()=>{const r=this.getContext();r.saveSettingsDebounced?r.saveSettingsDebounced():I.warn("saveSettingsDebounced not available")},{silent:!0})}async saveChatMetadata(){return x.withErrorBoundary("Context",async()=>{const r=this.getContext();r.saveMetadata?await r.saveMetadata():I.warn("saveMetadata not available")},{silent:!0})}async generateQuietPrompt(r){return x.withErrorBoundary("Context",async()=>{const t=this.getContext();if(!t.generateQuietPrompt)throw new Error("generateQuietPrompt not available");return await t.generateQuietPrompt(r)},{retries:1})}async loadWorldInfo(r){return x.withErrorBoundary("Context",async()=>{const t=this.getContext();if(!t.loadWorldInfo)throw new Error("loadWorldInfo not available");return await t.loadWorldInfo(r)})}async saveWorldInfo(r,t,n=!1){return x.withErrorBoundary("Context",async()=>{const e=this.getContext();if(!e.saveWorldInfo)throw new Error("saveWorldInfo not available");return await e.saveWorldInfo(r,t,n)})}async saveWorldInfoEntry(r,t){return x.withErrorBoundary("Context",async()=>{const n=this.getContext();if(!n.saveWorldInfoEntry)throw new Error("saveWorldInfoEntry not available");return await n.saveWorldInfoEntry(r,t)})}getEventSource(){return this.getContext().eventSource}getEventTypes(){return this.getContext().event_types}async callGenericPopup(r,t,n="",e={}){return x.withErrorBoundary("Context",async()=>{const a=this.getContext();if(!a.callGenericPopup)throw new Error("callGenericPopup not available");return await a.callGenericPopup(r,t,n,e)})}isContextAvailable(){try{return!!this.getContext()}catch{return!1}}clearCache(){this._context=null,this._lastUpdate=0,I.debug("Cleared context cache")}getStatus(){return{available:this.isContextAvailable(),cached:!!this._context,lastUpdate:this._lastUpdate,chatId:this.getChatId(),characterId:this.getCharacterId()}}},k=y,v=b.createModuleLogger("Settings"),w="STnametracker",S=Object.freeze({enabled:!0,autoAnalyze:!0,messageFrequency:10,llmSource:"sillytavern",ollamaEndpoint:"http://localhost:11434",ollamaModel:"",confidenceThreshold:70,lorebookPosition:0,lorebookDepth:1,lorebookCooldown:5,lorebookScanDepth:1,lorebookProbability:100,lorebookEnabled:!0,debugMode:!1,systemPrompt:null}),E=Object.freeze({characters:{},messageCounter:0,lastHarvestMessage:0,lastScannedMessageId:-1});const T=new class{constructor(){this._settings=null,this._chatData=null,this._settingsCallbacks=[],this._chatCallbacks=[],this._saveTimeout=null,this._initialized=!1}async initialize(){return x.withErrorBoundary("Settings",async()=>{this._initialized||(v.debug("Initializing settings manager"),await this.loadSettings(),await this.loadChatData(),this._initialized=!0,v.debug("Settings manager initialized"))})}async loadSettings(){return x.withErrorBoundary("Settings",async()=>{const r=k.getExtensionSettings();r[w]||(r[w]={}),this._settings={...S},Object.assign(this._settings,r[w]),r[w]=this._settings,v.debug("Loaded global settings:",Object.keys(this._settings)),this._settingsCallbacks.forEach(r=>{try{r(this._settings)}catch(r){v.error("Settings callback error:",r)}})})}async loadChatData(){return x.withErrorBoundary("Settings",async()=>{const r=k.getChatMetadata();r[w]?(this._chatData={...E},Object.assign(this._chatData,r[w]),r[w]=this._chatData,v.debug("Loaded existing chat data:",Object.keys(this._chatData.characters))):(this._chatData={...E},r[w]=this._chatData,v.debug("Initialized new chat data")),this._chatCallbacks.forEach(r=>{try{r(this._chatData)}catch(r){v.error("Chat data callback error:",r)}})})}getSettings(){if(!this._initialized)throw new Error("Settings manager not initialized");return this._settings}getChatData(){if(!this._initialized)throw new Error("Settings manager not initialized");return this._chatData}async updateSetting(r,t){return x.withErrorBoundary("Settings",async()=>{if(!this._initialized)throw new Error("Settings manager not initialized");if(!(r in S))throw new Error(`Unknown setting key: ${r}`);const n=this._settings[r];this._settings[r]=t,v.debug(`Updated setting ${r}: ${n} â†’ ${t}`),this._settingsCallbacks.forEach(e=>{try{e(this._settings,r,t,n)}catch(r){v.error("Settings callback error:",r)}}),await this.saveSettings()})}async updateChatData(r,t){return x.withErrorBoundary("Settings",async()=>{if(!this._initialized)throw new Error("Settings manager not initialized");if(!(r in E))throw new Error(`Unknown chat data key: ${r}`);const n=this._chatData[r];this._chatData[r]=t,v.debug(`Updated chat data ${r}`),this._chatCallbacks.forEach(e=>{try{e(this._chatData,r,t,n)}catch(r){v.error("Chat data callback error:",r)}}),await this.saveChatData()})}getSetting(r,t=void 0){return this._initialized?this._settings[r]??t:t}async saveSettings(){this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(async()=>{await x.withErrorBoundary("Settings",async()=>{await k.saveExtensionSettings(),v.debug("Saved global settings")},{silent:!0})},500)}async saveChatData(){return x.withErrorBoundary("Settings",async()=>{await k.saveChatMetadata(),v.debug("Saved chat metadata")},{silent:!0})}onSettingsChange(r){this._settingsCallbacks.push(r)}onChatDataChange(r){this._chatCallbacks.push(r)}async onChatChanged(){return x.withErrorBoundary("Settings",async()=>{v.debug("Chat changed, reloading chat data"),await this.loadChatData()})}isEnabled(){return this.getSetting("enabled",!1)}isDebugMode(){return this.getSetting("debugMode",!1)}getAutoAnalysisConfig(){return{enabled:this.getSetting("autoAnalyze",!1),frequency:this.getSetting("messageFrequency",10),lastScanned:this._chatData?.lastScannedMessageId??-1}}getLLMConfig(){return{source:this.getSetting("llmSource","sillytavern"),ollamaEndpoint:this.getSetting("ollamaEndpoint","http://localhost:11434"),ollamaModel:this.getSetting("ollamaModel",""),systemPrompt:this.getSetting("systemPrompt")}}getLorebookConfig(){return{position:this.getSetting("lorebookPosition",0),depth:this.getSetting("lorebookDepth",1),cooldown:this.getSetting("lorebookCooldown",5),scanDepth:this.getSetting("lorebookScanDepth",1),probability:this.getSetting("lorebookProbability",100),enabled:this.getSetting("lorebookEnabled",!0)}}async reset(){return x.withErrorBoundary("Settings",async()=>{v.warn("Resetting settings to defaults"),Object.assign(this._settings,S),Object.assign(this._chatData,E),await this.saveSettings(),await this.saveChatData(),this._settingsCallbacks.forEach(r=>{try{r(this._settings)}catch(r){v.error("Settings callback error:",r)}}),this._chatCallbacks.forEach(r=>{try{r(this._chatData)}catch(r){v.error("Chat data callback error:",r)}})})}getStatus(){return{initialized:this._initialized,settingsLoaded:!!this._settings,chatDataLoaded:!!this._chatData,charactersCount:Object.keys(this._chatData?.characters||{}).length,callbacks:{settings:this._settingsCallbacks.length,chatData:this._chatCallbacks.length}}}},_=b.createModuleLogger("Notifications");const D=new class{constructor(){this.defaultOptions={timeOut:5e3,extendedTimeOut:2e3,closeButton:!0,progressBar:!0,preventDuplicates:!0},this.prefix="Name Tracker: "}success(r,t="Success",n={}){const e={...this.defaultOptions,...n};toastr.success(this.prefix+r,t,e),_.debug("Success notification:",r)}info(r,t="Info",n={}){const e={...this.defaultOptions,...n};toastr.info(this.prefix+r,t,e),_.debug("Info notification:",r)}warning(r,t="Warning",n={}){const e={...this.defaultOptions,timeOut:8e3,...n};toastr.warning(this.prefix+r,t,e),_.debug("Warning notification:",r)}error(r,t="Error",n={}){const e={...this.defaultOptions,timeOut:1e4,extendedTimeOut:5e3,...n};toastr.error(this.prefix+r,t,e),_.error("Error notification:",r)}persistent(r,t="Notice",n="info"){const e={...this.defaultOptions,timeOut:0,extendedTimeOut:0};switch(n){case"success":toastr.success(this.prefix+r,t,e);break;case"warning":toastr.warning(this.prefix+r,t,e);break;case"error":toastr.error(this.prefix+r,t,e);break;default:toastr.info(this.prefix+r,t,e)}_.debug("Persistent notification:",r)}progress(r,t=0,n=null){const e=n||`progress_${Date.now()}`,a=`\n            <div style="margin-bottom: 8px;">${this.prefix}${r}</div>\n            <div style="background: #333; border-radius: 3px; overflow: hidden;">\n                <div style="background: #007acc; height: 6px; width: ${t}%; transition: width 0.3s ease;"></div>\n            </div>\n            <div style="text-align: center; font-size: 11px; margin-top: 4px;">${t}%</div>\n        `,o={timeOut:0,extendedTimeOut:0,closeButton:!1,progressBar:!1,preventDuplicates:!1,toastId:e};return toastr.remove(),toastr.info(a,"",o),_.debug("Progress notification:",r,`${t}%`),e}clear(){toastr.clear(),_.debug("Cleared all notifications")}confirm(r,t,n=null,e="Confirm"){const a=`confirm_${Date.now()}`,o=`\n            <div style="margin-bottom: 12px;">${r}</div>\n            <div style="text-align: right;">\n                <button class="btn btn-sm btn-secondary me-2" onclick="nameTrackerNotifications.handleConfirmCancel('${a}')">Cancel</button>\n                <button class="btn btn-sm btn-primary" onclick="nameTrackerNotifications.handleConfirmOk('${a}')">Confirm</button>\n            </div>\n        `;window.nameTrackerNotifications=window.nameTrackerNotifications||{},window.nameTrackerNotifications.confirmCallbacks=window.nameTrackerNotifications.confirmCallbacks||{},window.nameTrackerNotifications.confirmCallbacks[a]={onConfirm:t,onCancel:n},window.nameTrackerNotifications.handleConfirmOk=r=>{const t=window.nameTrackerNotifications.confirmCallbacks[r];t&&t.onConfirm&&t.onConfirm(),delete window.nameTrackerNotifications.confirmCallbacks[r],toastr.clear()},window.nameTrackerNotifications.handleConfirmCancel=r=>{const t=window.nameTrackerNotifications.confirmCallbacks[r];t&&t.onCancel&&t.onCancel(),delete window.nameTrackerNotifications.confirmCallbacks[r],toastr.clear()};const i={timeOut:0,extendedTimeOut:0,closeButton:!1,progressBar:!1,preventDuplicates:!1,toastId:a};return toastr.info(o,this.prefix+e,i),_.debug("Confirmation notification:",r),a}getStatus(){return{defaultOptions:this.defaultOptions,prefix:this.prefix,activeConfirms:Object.keys(window.nameTrackerNotifications?.confirmCallbacks||{}).length}}};_.debug("Notifications module loaded");const z=D;b.createModuleLogger("Utils").debug("Utils module loaded");const O=b.createModuleLogger("Main");const R=new class{constructor(){this.initialized=!1,this.modules=new Map}async initialize(){return x.withErrorBoundary("Main",async()=>{this.initialized||(O.log("Starting Name Tracker Extension v2.1.0"),await this.initializeCore(),this.initialized=!0,O.log("Name Tracker Extension initialized successfully"))},{retries:2,fallback:async r=>(O.error("Failed to initialize extension:",r),z.error("Failed to initialize","Extension Error"),!1)})}async initializeCore(){O.debug("Initializing core systems..."),b.isDebugEnabled=()=>T.isDebugMode(),await T.initialize(),this.setupErrorRecovery(),O.debug("Core systems initialized")}setupErrorRecovery(){x.registerRecoveryStrategy("NETWORK_ERROR",async r=>(O.warn("Attempting network error recovery"),await x.delay(2e3),z.info("Retrying network operation..."),null)),x.registerRecoveryStrategy("DATA_FORMAT_ERROR",async r=>(O.warn("Data format error, clearing cache"),null)),x.onCriticalError(r=>{O.error("Critical error occurred:",r)})}getStatus(){return{initialized:this.initialized,context:k.getStatus(),settings:T.getStatus(),debug:b.getPerformanceSummary(),errors:x.getRecentErrors(5).length}}async shutdown(){return x.withErrorBoundary("Main",async()=>{O.log("Shutting down Name Tracker Extension"),this.initialized=!1,b.clear(),O.log("Extension shutdown complete")},{silent:!0})}};jQuery(async()=>{try{await R.initialize(),window.nameTrackerExtension=R,window.ntDebug={status:()=>R.getStatus(),errors:()=>x.getRecentErrors(),settings:()=>T.getSettings(),chatData:()=>T.getChatData(),clear:()=>b.clear()},console.log("[STnametracker] Extension loaded. Use ntDebug.status() for diagnostics.")}catch(r){console.error("[STnametracker] Failed to initialize:",r),z.error("Extension failed to load","Critical Error")}})})();
//# sourceMappingURL=index.js.map