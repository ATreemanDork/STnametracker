processing.js:983 [NT-Processing] ğŸ”§ Ensuring lorebook is initialized before scan...
lorebook.js:54 [NT-Lorebook] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:55 [NT-Lorebook] â•‘ initializeLorebook() CALLED
lorebook.js:56 [NT-Lorebook] â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:59 [NT-Lorebook] â•‘ Inside withErrorBoundary, getting context...
lorebook.js:61 [NT-Lorebook] â•‘ Got context: true
lorebook.js:62 [NT-Lorebook] â•‘ context.chatId: High-Calcium Education  - 2026-01-18@23h56m34s743ms
lorebook.js:71 [NT-Lorebook] â•‘ Active chat detected, proceeding...
lorebook.js:74 [NT-Lorebook] â•‘ chatMetadata exists?: true
lorebook.js:83 [NT-Lorebook] â•‘ Checking for existing bound lorebook...
lorebook.js:84 [NT-Lorebook] â•‘ chatMetadata[world_info]: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
lorebook.js:89 [NT-Lorebook] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:90 [NT-Lorebook] â•‘ âœ… EXISTING LOREBOOK FOUND
lorebook.js:91 [NT-Lorebook] â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:92 [NT-Lorebook] â•‘ Lorebook Name: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
lorebook.js:93 [NT-Lorebook] â•‘ Module Variable Set: YES
lorebook.js:94 [NT-Lorebook] â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
debug.js:64 [STnametracker:lorebook] 2:13:46 AM Using existing chat lorebook: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
debug.js:64 [STnametracker:WorldInfo] 2:13:46 AM Reloaded editor with lorebook: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
processing.js:986 [NT-Processing] âœ… Lorebook initialization complete
debug.js:64 [STnametracker:Settings] 2:13:46 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:13:46 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:13:46 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:13:46 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:Settings] 2:13:48 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:13:48 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:13:48 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:13:48 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:13:48 AM
llm.js:1367 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1371 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1371
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1373 [NT-Prompt] After await, type: string
llm.js:1384 [NT-Prompt] knownCharacters type: string
llm.js:1396 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1397 [NT-Prompt] Final rosterStr length: 35
llm.js:1398 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:13:48 AM
debug.js:64 [STnametracker:llm] 2:13:48 AM Calling LLM with prompt (4682 tokens)...
llm.js:1452 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(11711 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:13:48 AM
debug.js:64 [STnametracker:llm] 2:13:48 AM
debug.js:64 [STnametracker:llm] 2:13:48 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:13:50 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:1089 [NT-Parse] ========== PARSE START ==========
llm.js:1090 [NT-Parse] Input type: string
llm.js:1091 [NT-Parse] Input is null?: false
llm.js:1092 [NT-Parse] Input is undefined?: false
llm.js:1105 [NT-Parse] Input length: 1031
llm.js:1107 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "physicalAge": "adult",
      "physical": "college student with arm offered for support",
      "roleSkills": "supportive peer",
      "relationships": [
        "Jasmine is to John: friend, helper"
      ],
      "confidence": 85
    },
    {
  
llm.js:1108 [NT-Parse] Last 100 chars: Jasmine is to John: friend, seeking help"
      ],
      Jasmine:
      "confidence": 90
    }
  ]
}
llm.js:1132 [NT-Parse] After trim, length: 1031
llm.js:1177 [NT-Parse] Brace search: first={0, last=1030}
llm.js:1184 [NT-Parse] Text before JSON: 
llm.js:1185 [NT-Parse] Extracted JSON length: 1031
llm.js:1186 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 31 -> 11 chars
llm.js:1077 [NT-Repair] Applied repairs, length change: -155
llm.js:1200 [NT-Parse] Before JSON.parse, length: 876
llm.js:1201 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","physicalAge": "adult","physical": "college student with arm offered for support","roleSkills": "supportive peer","relationships": ["Jasmine is to John: friend, hel
llm.js:1202 [NT-Parse] Last 100 chars: ,"relationships": ["Jasmine is to John: friend, seeking help"], Jasmine:"confidence": 90
    }
  ]
}
llm.js:1205 [NT-Parse] Attempting JSON.parse...
llm.js:1232 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 840 (line 2 column 839)
(anonymous) @ llm.js:1232
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1233 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1233
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1234 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","physicalAge": "adult","physical": "college student with arm offered for support","roleSkills": "supportive peer","relationships": ["Jasmine is to John: friend, helper"],"confidence": 85 }, {"name": "Jasmine","physicalAge": "late teens to early 20s","physical": "striking Black girl with flawless dark ebony skin, tall and statuesque with toned powerful legs of a runner, perfect heart-shaped bubble butt, bountiful DD-cup breasts with hard thick brown nipples, cu
llm.js:1235 [NT-Parse] Text being parsed (last 200 chars): ": "heterosexual (implied)","raceEthnicity": "Black","roleSkills": "student athlete (likely runner)","relationships": ["Jasmine is to John: friend, seeking help"], Jasmine:"confidence": 90
    }
  ]
}
llm.js:1308 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:13:50 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 1/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:891 [NT-ST-Call] Waiting 2000ms (~2s) before retry...
llm.js:894 [NT-ST-Call] Waited 2006ms before next attempt
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:14:10 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:834 [NT-ST-Call] âš ï¸ Response does not start with { - attempting extraction
(anonymous) @ llm.js:834
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:839 [NT-ST-Call] âœ… Extracted JSON from response
llm.js:849 [NT-ST-Call] âš ï¸ Detected potential orphaned strings in response
(anonymous) @ llm.js:849
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:850 [NT-ST-Call] Response will need JSON repair during parsing
llm.js:1089 [NT-Parse] ========== PARSE START ==========
llm.js:1090 [NT-Parse] Input type: string
llm.js:1091 [NT-Parse] Input is null?: false
llm.js:1092 [NT-Parse] Input is undefined?: false
llm.js:1105 [NT-Parse] Input length: 8194
llm.js:1107 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "aliases": [],
      "physicalAge": "",
      "mentalAge": "",
      "physical": "",
      "personality": "",
      "sexuality": "",
      "raceEthnicity": "",
      "roleSkills": "",
      "relationships": [],
      "confidence": 90
    },
    {
llm.js:1108 [NT-Parse] Last 100 chars: relationships": [
        "John is to Jasmine: helper, friend"
      ],
      "confidence": 90
    }
llm.js:1132 [NT-Parse] After trim, length: 8194
llm.js:1140 [NT-Parse] ğŸ” Found markdown code block, extracting JSON
llm.js:1150 [NT-Parse] ğŸ§¹ Removed loose markdown backticks, length: 8154
llm.js:1158 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 8154 -> 8154
llm.js:1177 [NT-Parse] Brace search: first={0, last=8153}
llm.js:1184 [NT-Parse] Text before JSON: 
llm.js:1185 [NT-Parse] Extracted JSON length: 8154
llm.js:1186 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 108 -> 102 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 21 -> 12 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 21 -> 12 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 7 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 1360 -> 1310 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 18 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 10 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 10 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 361 -> 342 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 46 -> 42 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 41 -> 35 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 1250 -> 1207 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 39 -> 32 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 157 -> 153 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 80 -> 77 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 191 -> 180 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 32 -> 27 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 47 -> 40 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 10 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 28 -> 24 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 68 -> 59 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 546 -> 531 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1077 [NT-Repair] Applied repairs, length change: -730
llm.js:1200 [NT-Parse] Before JSON.parse, length: 7424
llm.js:1201 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "","mentalAge": "","physical": "","personality": "","sexuality": "","raceEthnicity": "","roleSkills": "","relationships": [],"confidenc
llm.js:1202 [NT-Parse] Last 100 chars: oleSkills": "student","relationships": ["John is to Jasmine: helper, friend"],"confidence": 90
    }
llm.js:1205 [NT-Parse] Attempting JSON.parse...
llm.js:1232 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 592 (line 2 column 591)
(anonymous) @ llm.js:1232
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1233 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1233
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1234 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "","mentalAge": "","physical": "","personality": "","sexuality": "","raceEthnicity": "","roleSkills": "","relationships": [],"confidence": 90 }, {"name": "Jasmine","aliases": [],"physicalAge": "","physical": "tall, statuesque Black girl with flawless dark ebony skin, built like a goddess with powerful runner's legs and perfect heart-shaped bubble butt, DD-cup breasts","personality": "normally confident and self-assured but currentl
llm.js:1235 [NT-Parse] Text being parsed (last 200 chars): icalAge": "","mentalAge": "","physical": "","personality": "","sexuality": "","raceEthnicity": "","roleSkills": "student","relationships": ["John is to Jasmine: helper, friend"],"confidence": 90
    }
llm.js:1308 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:14:10 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 2/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:61 [STnametracker] Error caught in callSillyTavern: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in callSillyTavern, tracking error: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:14:10 AM Error in callSillyTavern: {code: 'JSON_PARSE_FAILED', message: 'Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in callSillyTavern
debug.js:64 [STnametracker:llm] 2:14:10 AM
debug.js:64 [STnametracker:Settings] 2:14:11 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:14:11 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:14:11 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:14:11 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:14:11 AM
llm.js:1367 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1371 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1371
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1373 [NT-Prompt] After await, type: string
llm.js:1384 [NT-Prompt] knownCharacters type: string
llm.js:1396 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1397 [NT-Prompt] Final rosterStr length: 35
llm.js:1398 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:14:11 AM
debug.js:64 [STnametracker:llm] 2:14:11 AM Calling LLM with prompt (4682 tokens)...
llm.js:1452 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(11711 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:14:11 AM
debug.js:64 [STnametracker:llm] 2:14:11 AM
debug.js:64 [STnametracker:llm] 2:14:11 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
 [STnametracker:llm] 2:14:30 AM
 [NT-ST-Call] ğŸ” Pre-validation checks...
 [NT-ST-Call] âš ï¸ Response does not start with { - attempting extraction
(anonymous) @ index.js:5043
await in (anonymous)
withErrorBoundary @ index.js:1991
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [NT-ST-Call] âœ… Extracted JSON from response
 [NT-Parse] ========== PARSE START ==========
 [NT-Parse] Input type: string
 [NT-Parse] Input is null?: false
 [NT-Parse] Input is undefined?: false
 [NT-Parse] Input length: 1731
 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "physical": "unknown",
      "aliases": [],
      "physicalAge": "unknown",
      "mentalAge": "affected",
      "personality": "concerned, supportive",
      "sexuality": "unknown",
      "raceEthnicity": "unknown",
      "roleSkills": "supporti
 [NT-Parse] Last 100 chars: ulnerable state",
      "physicalAge": "late teens, early 20s",
      "raceEthistory": "Black"
    }
 [NT-Parse] After trim, length: 1731
 [NT-Parse] ğŸ” Found markdown code block, extracting JSON
 [NT-Parse] ğŸ§¹ Removed loose markdown backticks, length: 1707
 [NT-Parse] Brace search: first={0, last=1706}
 [NT-Parse] Text before JSON: 
 [NT-Parse] Extracted JSON length: 1707
 [NT-Parse] Text after JSON: 
 [NT-Repair] Starting JSON repair...
 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 107 -> 92 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 7 -> 3 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 20 -> 14 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1077 [NT-Repair] Applied repairs, length change: -222
llm.js:1200 [NT-Parse] Before JSON.parse, length: 1485
llm.js:1201 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","physical": "unknown","aliases": [],"physicalAge": "unknown","mentalAge": "affected","personality": "concerned, supportive","sexuality": "unknown","raceEthnicity": 
llm.js:1202 [NT-Parse] Last 100 chars: mentalAge": "vulnerable state","physicalAge": "late teens, early 20s","raceEthistory": "Black"
    }
llm.js:1205 [NT-Parse] Attempting JSON.parse...
llm.js:1232 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 836 (line 2 column 835)
(anonymous) @ llm.js:1232
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1233 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1233
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1234 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","physical": "unknown","aliases": [],"physicalAge": "unknown","mentalAge": "affected","personality": "concerned, supportive","sexuality": "unknown","raceEthnicity": "unknown","roleSkills": "supportive companion","relationships": ["Jasmine is to John: supportive friend, helper"],"confidence": 75 }, {"name": "Jasmine","aliases": [],"physicalAge": "late teens, early 20s","physical": "striking Black girl with flawless dark ebony skin, tall and statuesque with toned
llm.js:1235 [NT-Parse] Text being parsed (last 200 chars): sts straining in sports bra","relationships": ["Jasmine is to John: dependent friend, vulnerable"],"mentalAge": "vulnerable state","physicalAge": "late teens, early 20s","raceEthistory": "Black"
    }
llm.js:1308 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1477:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1477:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
debug.js:55 [STnametracker:ErrorHandler] 2:14:30 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 1/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1477:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:891 [NT-ST-Call] Waiting 2000ms (~2s) before retry...
llm.js:894 [NT-ST-Call] Waited 2094ms before next attempt
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
 [STnametracker:llm] 2:14:50 AM
 [NT-ST-Call] ğŸ” Pre-validation checks...
 [NT-ST-Call] âš ï¸ Response does not start with { - attempting extraction
(anonymous) @ index.js:5043
await in (anonymous)
withErrorBoundary @ index.js:1991
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [NT-ST-Call] âœ… Extracted JSON from response
 [NT-Parse] ========== PARSE START ==========
 [NT-Parse] Input type: string
 [NT-Parse] Input is null?: false
 [NT-Parse] Input is undefined?: false
 [NT-Parse] Input length: 4575
 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "aliases": [],
      "physicalAge": "",
      "mentalAge": "",
      "physical": "",
      "personality": "",
      "sexuality": "",
      "raceEthnicity": "",
      "roleSkills": "",
      "relationships": ["Jasmine is to John: helper, protector
 [NT-Parse] Last 100 chars: ship"],   -> This is the OLD triplet format and is FORBIDDEN.
       "confidence": 75
     }
   ]
 }
 [NT-Parse] After trim, length: 4575
 [NT-Parse] ğŸ” Found markdown code block, extracting JSON
 [NT-Parse] ğŸ§¹ Removed loose markdown backticks, length: 4571
 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 4571 -> 4564
 [NT-Parse] Brace search: first={0, last=4563}
 [NT-Parse] Text before JSON: 
 [NT-Parse] Extracted JSON length: 4564
 [NT-Parse] Text after JSON: 
 [NT-Repair] Starting JSON repair...
 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 23 -> 17 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 20 -> 4 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 22 -> 17 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 575 -> 546 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 470 -> 429 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 433 -> 423 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 109 -> 100 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 18 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 10 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 64 -> 54 chars
 [NT-Repair] ğŸ”§ Adding missing fields for character: Jasmine
 [NT-Repair] Applied repairs, length change: -481
 [NT-Parse] Before JSON.parse, length: 4083
 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "","mentalAge": "","physical": "","personality": "","sexuality": "","raceEthnicity": "","roleSkills": "","relationships": ["Jasmine is 
 [NT-Parse] Last 100 chars: , relationship"], -> This is the OLD triplet format and is FORBIDDEN."confidence": 75
     }
   ]
 }
 [NT-Parse] Attempting JSON.parse...
 [NT-Parse] âŒ JSON.parse failed: Expected ',' or ']' after array element in JSON at position 1592 (line 2 column 1591)
(anonymous) @ index.js:5441
withErrorBoundary @ index.js:1991
parseJSONResponse @ index.js:5297
(anonymous) @ index.js:5081
await in (anonymous)
withErrorBoundary @ index.js:1991
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ index.js:5442
withErrorBoundary @ index.js:1991
parseJSONResponse @ index.js:5297
(anonymous) @ index.js:5081
await in (anonymous)
withErrorBoundary @ index.js:1991
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "","mentalAge": "","physical": "","personality": "","sexuality": "","raceEthnicity": "","roleSkills": "","relationships": ["Jasmine is to John: helper, protector"],"confidence": 75 }, {"name": "Jasmine", "aliases": [], "physical": "", "personality": "","lactationState": "active","physicalAge": "","mentalAge": "","physical": "striking Black girl with flawless dark ebony skin, tall and statuesque, with the toned, powerful legs of a r
 [NT-Parse] Text being parsed (last 200 chars): ce/ethnicity if mentioned","roleSkills": "Job/role/skills","relationships": ["currentchar, otherchar, relationship"], -> This is the OLD triplet format and is FORBIDDEN."confidence": 75
     }
   ]
 }
 [NT-Parse] ========== PARSE END (FAILED) ==========
 [STnametracker] Error caught in parseJSONResponse: 
 [STnametracker] All retries failed in parseJSONResponse, tracking error: 
 [STnametracker:ErrorHandler] 2:14:50 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ index.js:5845
error @ index.js:5818
trackError @ index.js:2079
withErrorBoundary @ index.js:2013
parseJSONResponse @ index.js:5297
(anonymous) @ index.js:5081
await in (anonymous)
withErrorBoundary @ index.js:1991
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [STnametracker] Notifying user of error in parseJSONResponse
 [NT-ST-Call] âŒ Attempt 2/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ index.js:5094
await in (anonymous)
withErrorBoundary @ index.js:1991
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [NT-ST-Call] Error details: 
(anonymous) @ index.js:5095
await in (anonymous)
withErrorBoundary @ index.js:1991
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [STnametracker] Error caught in callSillyTavern: 
 [STnametracker] All retries failed in callSillyTavern, tracking error: 
 [STnametracker:ErrorHandler] 2:14:50 AM Error in callSillyTavern: {code: 'JSON_PARSE_FAILED', message: 'Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)', context: {â€¦}}
log @ index.js:5845
error @ index.js:5818
trackError @ index.js:2079
withErrorBoundary @ index.js:2013
await in withErrorBoundary
callSillyTavern @ index.js:4916
(anonymous) @ index.js:5672
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [STnametracker] Notifying user of error in callSillyTavern
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] extension_settings keys for module: none
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] extension_settings keys for module: none
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] extension_settings keys for module: none
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
 [STnametracker:Settings] 2:14:50 AM [NT-LLMConfig] extension_settings keys for module: none
 [NT-MaxContext] Starting context detection for LLM source: sillytavern
 [NT-MaxContext] Using SillyTavern context
 [NT-MaxContext] Successfully retrieved SillyTavern context
 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
 [NT-MaxContext] Method 1: Checking context.maxContext...
 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
 [NT-MaxContext] Detected maxContext: 65024 (type: number)
 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
 [NT-MaxContext] Final detection method: context.maxContext
 [NT-MaxContext] Returning maxPromptLength: 50000
 [NT-MaxContext] Starting context detection for LLM source: sillytavern
 [NT-MaxContext] Using SillyTavern context
 [NT-MaxContext] Successfully retrieved SillyTavern context
 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
 [NT-MaxContext] Method 1: Checking context.maxContext...
 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
 [NT-MaxContext] Detected maxContext: 65024 (type: number)
 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
 [NT-MaxContext] Final detection method: context.maxContext
 [NT-MaxContext] Returning maxPromptLength: 50000
 [STnametracker:llm] 2:14:50 AM
 [NT-Prompt] getSystemPrompt() returned type: object
 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ index.js:5580
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5696
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [STnametracker:llm] 2:14:50 AM
 [NT-Prompt] getSystemPrompt() returned type: object
 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ index.js:5580
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5697
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:5686
await in (anonymous)
withErrorBoundary @ index.js:1991
callLLMAnalysis @ index.js:5545
(anonymous) @ index.js:8612
await in (anonymous)
withErrorBoundary @ index.js:1991
scanEntireChat @ index.js:8536
(anonymous) @ index.js:7220
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
 [NT-Prompt] After await, type: string
 [NT-Prompt] knownCharacters type: string
 [NT-Prompt] Final systemPrompt length: 8112
 [NT-Prompt] Final rosterStr length: 35
 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
 [NT-Prompt] After await, type: string
 [NT-Prompt] knownCharacters type: string
 [NT-Prompt] Final systemPrompt length: 8112
 [NT-Prompt] Final rosterStr length: 35
 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
 [STnametracker:llm] 2:14:50 AM
debug.js:64 [STnametracker:llm] 2:14:50 AM Calling LLM with prompt (3459 tokens)...
llm.js:1452 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(6395 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:14:50 AM
debug.js:64 [STnametracker:llm] 2:14:50 AM
debug.js:64 [STnametracker:llm] 2:14:50 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:14:50 AM
debug.js:64 [STnametracker:llm] 2:14:50 AM Calling LLM with prompt (3253 tokens)...
llm.js:1452 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(5329 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:14:50 AM
debug.js:64 [STnametracker:llm] 2:14:50 AM
debug.js:64 [STnametracker:llm] 2:14:50 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
 [STnametracker:llm] 2:14:52 AM
 [NT-ST-Call] ğŸ” Pre-validation checks...
 [NT-Parse] ========== PARSE START ==========
 [NT-Parse] Input type: string
 [NT-Parse] Input is null?: false
 [NT-Parse] Input is undefined?: false
 [NT-Parse] Input length: 633
 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "Jasmine",
      "physicalAge": "likely college age",
      "physical": "college student, long dark hair, currently experiencing breast lactation issues with hard thick brown nipples, leaking through clothes, severe chest pain and tenderness",
      "personali
 [NT-Parse] Last 100 chars: nt",
      "relationships": ["Jasmine is to User: vulnerable acquaintance seeking help"]
    }
  ]
}
 [NT-Parse] After trim, length: 633
 [NT-Parse] Brace search: first={0, last=632}
 [NT-Parse] Text before JSON: 
 [NT-Parse] Extracted JSON length: 633
 [NT-Parse] Text after JSON: 
 [NT-Repair] Starting JSON repair...
 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1077 [NT-Repair] Applied repairs, length change: -53
llm.js:1200 [NT-Parse] Before JSON.parse, length: 580
llm.js:1201 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "Jasmine","physicalAge": "likely college age","physical": "college student, long dark hair, currently experiencing breast lactation issues with hard thick brown nipples, l
llm.js:1202 [NT-Parse] Last 100 chars: e student","relationships": ["Jasmine is to User: vulnerable acquaintance seeking help"]
    }
  ]
}
llm.js:1205 [NT-Parse] Attempting JSON.parse...
llm.js:1208 [NT-Parse] âœ… Successfully parsed JSON
llm.js:1209 [NT-Parse] Parsed type: object
llm.js:1210 [NT-Parse] Parsed keys: ['characters']
llm.js:1211 [NT-Parse] Full parsed object: {"characters":[{"name":"Jasmine","physicalAge":"likely college age","physical":"college student, long dark hair, currently experiencing breast lactation issues with hard thick brown nipples, leaking through clothes, severe chest pain and tenderness","personality":"prideful but now vulnerable due to distressing medical condition, defensive usually but pliant in this vulnerable state","sexuality":"heterosexual based on interest in male character","roleSkills":"college student","relationships":["Ja
llm.js:1228 [NT-Parse] âœ… Valid response with 1 characters
llm.js:1229 [NT-Parse] ========== PARSE END (SUCCESS) ==========
llm.js:873 [NT-ST-Call] parseJSONResponse returned type: object
llm.js:874 [NT-ST-Call] parseJSONResponse returned value: {characters: Array(1)}
llm.js:875 [NT-ST-Call] parsed.characters exists?: true
llm.js:876 [NT-ST-Call] parsed.characters type: object
llm.js:877 [NT-ST-Call] parsed.characters is Array?: true
llm.js:879 [NT-ST-Call] âœ… Successfully parsed on attempt 1 characters: 1
llm.js:880 [NT-ST-Call] Parsed result: {"characters":[{"name":"Jasmine","physicalAge":"likely college age","physical":"college student, long dark hair, currently experiencing breast lactation issues with hard thick brown nipples, leaking through clothes, severe chest pain and tenderness","personality":"prideful but now vulnerable due to 
debug.js:64 [STnametracker:llm] 2:14:52 AM
 [STnametracker:llm] 2:15:00 AM
 [NT-ST-Call] ğŸ” Pre-validation checks...
 [NT-Parse] ========== PARSE START ==========
 [NT-Parse] Input type: string
 [NT-Parse] Input is null?: false
 [NT-Parse] Input is undefined?: false
 [NT-Parse] Input length: 4748
 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      is_user": true
    },
    {
      "name": "Jasmine",
      "aliases": [],
      "physical": "A striking Black girl with flawless dark ebony skin, tall and statuesque, with the toned, powerful legs of a runner and a perfect, heart-shaped bubble bu
 [NT-Parse] Last 100 chars: mp with two distinct, dark circles where her small breasts are.",
      "confidence": 90
    }
  ]
}
 [NT-Parse] After trim, length: 4748
 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 4748 -> 4740
llm.js:1177 [NT-Parse] Brace search: first={0, last=4739}
llm.js:1184 [NT-Parse] Text before JSON: 
llm.js:1185 [NT-Parse] Extracted JSON length: 4740
llm.js:1186 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 15 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 119 -> 106 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 913 -> 911 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 6 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 26 -> 11 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1073 [NT-Repair] ğŸ”§ Adding missing fields for character: John
llm.js:1073 [NT-Repair] ğŸ”§ Adding missing fields for character: Description
llm.js:1073 [NT-Repair] ğŸ”§ Adding missing fields for character: John
llm.js:1077 [NT-Repair] Applied repairs, length change: -232
llm.js:1200 [NT-Parse] Before JSON.parse, length: 4508
llm.js:1201 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John", "aliases": [], "physical": "", "personality": "", "is_user": true
    },
    {
      "name": "Jasmine","aliases": [],"physical": "A striking Black girl with flawle
llm.js:1202 [NT-Parse] Last 100 chars: e is damp with two distinct, dark circles where her small breasts are.","confidence": 90
    }
  ]
}
llm.js:1205 [NT-Parse] Attempting JSON.parse...
llm.js:1232 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 736 (line 5 column 621)
(anonymous) @ llm.js:1232
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1233 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1233
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1234 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John", "aliases": [], "physical": "", "personality": "", "is_user": true
    },
    {
      "name": "Jasmine","aliases": [],"physical": "A striking Black girl with flawless dark ebony skin, tall and statuesque, with the toned, powerful legs of a runner and a perfect, heart-shaped bubble butt that strains against the fabric of her yoga pants. She's wearing a sports bra that does little to contain her bountiful DD-cup breasts which are clearly leaking milk.","personal
llm.js:1235 [NT-Parse] Text being parsed (last 200 chars): cate features and shy demeanor. Small, nubile frame with simple blouse and skirt. Front of her blouse is damp with two distinct, dark circles where her small breasts are.","confidence": 90
    }
  ]
}
llm.js:1308 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
debug.js:55 [STnametracker:ErrorHandler] 2:15:00 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 1/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:891 [NT-ST-Call] Waiting 2000ms (~2s) before retry...
llm.js:894 [NT-ST-Call] Waited 2016ms before next attempt
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:15:04 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:1089 [NT-Parse] ========== PARSE START ==========
llm.js:1090 [NT-Parse] Input type: string
llm.js:1091 [NT-Parse] Input is null?: false
llm.js:1092 [NT-Parse] Input is undefined?: false
llm.js:1105 [NT-Parse] Input length: 779
llm.js:1107 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      isUser: true,
      "aliases": ["you", "your"],
      "physicalAge": "early twenties",
      "physical": "College student living in dorms",
      "personality": "Observant, helpful",
      "confidence": 90
    },
    {
      "name": "Jasmine",
  
llm.js:1108 [NT-Parse] Last 100 chars: elationships": [
        "Jasmine is to John: confidant"
      ],
      "confidence": 90
    }
  ]
}
llm.js:1132 [NT-Parse] After trim, length: 779
llm.js:1177 [NT-Parse] Brace search: first={0, last=778}
llm.js:1184 [NT-Parse] Text before JSON: 
llm.js:1185 [NT-Parse] Extracted JSON length: 779
llm.js:1186 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 28 -> 15 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1073 [NT-Repair] ğŸ”§ Adding missing fields for character: John
llm.js:1077 [NT-Repair] Applied repairs, length change: -68
llm.js:1200 [NT-Parse] Before JSON.parse, length: 711
llm.js:1201 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John", "aliases": [], "physical": "", "personality": "", isUser: true,"aliases": ["you", "your"],"physicalAge": "early twenties","physical": "College student living in do
llm.js:1202 [NT-Parse] Last 100 chars: ng to John for help","relationships": ["Jasmine is to John: confidant"],"confidence": 90
    }
  ]
}
llm.js:1205 [NT-Parse] Attempting JSON.parse...
llm.js:1232 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 87 (line 2 column 86)
(anonymous) @ llm.js:1232
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1233 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1233
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1234 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John", "aliases": [], "physical": "", "personality": "", isUser: true,"aliases": ["you", "your"],"physicalAge": "early twenties","physical": "College student living in dorms","personality": "Observant, helpful","confidence": 90 }, {"name": "Jasmine","physicalAge": "early twenties","physical": "Striking Black girl with flawless dark ebony skin, tall and statuesque, toned powerful legs of a runner, perfect heart-shaped bubble butt, massive DD-cup breasts that practica
llm.js:1235 [NT-Parse] Text being parsed (last 200 chars): rom her sports bra","personality": "Normally confident but currently panicked and embarrassed, looking to John for help","relationships": ["Jasmine is to John: confidant"],"confidence": 90
    }
  ]
}
llm.js:1308 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
debug.js:55 [STnametracker:ErrorHandler] 2:15:04 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1088
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 2/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1320:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1088:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:61 [STnametracker] Error caught in callSillyTavern: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1477:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
errors.js:74 [STnametracker] All retries failed in callSillyTavern, tracking error: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1463:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async Promise.all (:8008/index 0)
    at async llm.js:1486:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1477:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
debug.js:55 [STnametracker:ErrorHandler] 2:15:04 AM Error in callSillyTavern: {code: 'JSON_PARSE_FAILED', message: 'Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1463
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in callSillyTavern
debug.js:64 [STnametracker:llm] 2:15:04 AM
debug.js:64 [STnametracker:Settings] 2:15:06 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:15:06 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:15:06 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:15:06 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:15:06 AM
llm.js:1367 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1371 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1371
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1487
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ llm.js:1477
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1336
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1373 [NT-Prompt] After await, type: string
llm.js:1384 [NT-Prompt] knownCharacters type: string
llm.js:1396 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1397 [NT-Prompt] Final rosterStr length: 35
llm.js:1398 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:15:06 AM
debug.js:64 [STnametracker:llm] 2:15:06 AM Calling LLM with prompt (3459 tokens)...
llm.js:1452 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(6395 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:15:06 AM
debug.js:64 [STnametracker:llm] 2:15:06 AM
debug.js:64 [STnametracker:llm] 2:15:06 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:61 [STnametracker:Notifications] 2:15:13 AM Warning notification: Scan aborted by user
