processing.js:983 [NT-Processing] ğŸ”§ Ensuring lorebook is initialized before scan...
lorebook.js:54 [NT-Lorebook] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:55 [NT-Lorebook] â•‘ initializeLorebook() CALLED
lorebook.js:56 [NT-Lorebook] â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:59 [NT-Lorebook] â•‘ Inside withErrorBoundary, getting context...
lorebook.js:61 [NT-Lorebook] â•‘ Got context: true
lorebook.js:62 [NT-Lorebook] â•‘ context.chatId: High-Calcium Education  - 2026-01-18@23h56m34s743ms
lorebook.js:71 [NT-Lorebook] â•‘ Active chat detected, proceeding...
lorebook.js:74 [NT-Lorebook] â•‘ chatMetadata exists?: true
lorebook.js:83 [NT-Lorebook] â•‘ Checking for existing bound lorebook...
lorebook.js:84 [NT-Lorebook] â•‘ chatMetadata[world_info]: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
lorebook.js:89 [NT-Lorebook] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:90 [NT-Lorebook] â•‘ âœ… EXISTING LOREBOOK FOUND
lorebook.js:91 [NT-Lorebook] â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
lorebook.js:92 [NT-Lorebook] â•‘ Lorebook Name: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
lorebook.js:93 [NT-Lorebook] â•‘ Module Variable Set: YES
lorebook.js:94 [NT-Lorebook] â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
debug.js:64 [STnametracker:lorebook] 2:00:43 AM Using existing chat lorebook: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
debug.js:64 [STnametracker:WorldInfo] 2:00:43 AM Reloaded editor with lorebook: NameTracker_High-Calcium Education  - 2026-01-18_23h56m34s743ms (1)
processing.js:986 [NT-Processing] âœ… Lorebook initialization complete
debug.js:64 [STnametracker:Settings] 2:00:43 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:00:43 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:00:43 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:00:43 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:Settings] 2:00:47 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:00:47 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:00:47 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:00:47 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:00:47 AM
llm.js:1335 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1339 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1339
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1341 [NT-Prompt] After await, type: string
llm.js:1352 [NT-Prompt] knownCharacters type: string
llm.js:1364 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1365 [NT-Prompt] Final rosterStr length: 35
llm.js:1366 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:00:47 AM
debug.js:64 [STnametracker:llm] 2:00:47 AM Calling LLM with prompt (4682 tokens)...
llm.js:1420 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(11711 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:00:47 AM
debug.js:64 [STnametracker:llm] 2:00:47 AM
debug.js:64 [STnametracker:llm] 2:00:47 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:00:51 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 1494
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "aliases": [],
      "physicalAge": null,
      "mentalAge": null,
     Affected": "I'm sorry for the error, but I encountered a problem while processing your request. Please try again."
    }
  ]
}</think>{
  "characters": [
    {
      "name": 
llm.js:1095 [NT-Parse] Last 100 chars:     "Jasmine is to John Blackwood: friend, seeking help"
      ],
      "confidence": 95
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 1494
llm.js:1132 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 1494 -> 1486
llm.js:1145 [NT-Parse] Brace search: first={0, last=1485}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 1486
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 21 -> 16 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 6 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 14 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1064 [NT-Repair] Applied repairs, length change: -231
llm.js:1168 [NT-Parse] Before JSON.parse, length: 1255
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","aliases": [],"physicalAge": null,"mentalAge":null,Affected": "I'm sorry for the error, but I encountered a problem while processing your request. Please try again.
llm.js:1170 [NT-Parse] Last 100 chars: "relationships": ["Jasmine is to John Blackwood: friend, seeking help"],"confidence": 95
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1200 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 87 (line 2 column 86)
(anonymous) @ llm.js:1200
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1201 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1201
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1202 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","aliases": [],"physicalAge": null,"mentalAge":null,Affected": "I'm sorry for the error, but I encountered a problem while processing your request. Please try again."} ] }{"characters": [ {"name": "John","aliases": [],"physicalAge": null,"mentalAge": null,"physical": "user","personality": null,"sexuality": null,"raceEthnicity": null,"roleSkills": null,"relationships": [],"confidence": 95 }, {"name": "Jasmine","aliases": [],"physicalAge": null,"mentalAge": null,
llm.js:1203 [NT-Parse] Text being parsed (last 200 chars): rassment, and physical distress","sexuality": null,"raceEthnicity": "Black","roleSkills": "student","relationships": ["Jasmine is to John Blackwood: friend, seeking help"],"confidence": 95
    }
  ]
}
llm.js:1276 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:00:51 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 1/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:891 [NT-ST-Call] Waiting 2000ms (~2s) before retry...
llm.js:894 [NT-ST-Call] Waited 2008ms before next attempt
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:01:00 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:849 [NT-ST-Call] âš ï¸ Detected potential orphaned strings in response
(anonymous) @ llm.js:849
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:850 [NT-ST-Call] Response will need JSON repair during parsing
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 3263
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "aliases": [],
      "physicalAge": "",
      "mentalAge": "",
      "physical": "User character",
      "personality": "Supportive and caring, offering help to Jasmine",
      "sexuality": "",
      "raceEthnicity": "",
      "roleSkills": "",
 
llm.js:1095 [NT-Parse] Last 100 chars: y": "Chinese",
      "roleSkills": "",
      "relationships": [],
      "confidence": 70
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 3263
llm.js:1145 [NT-Parse] Brace search: first={0, last=3262}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 3263
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 68 -> 55 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 41 -> 33 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1060 [NT-Repair] ğŸ”§ Adding missing fields for character: Jasmine
llm.js:1060 [NT-Repair] ğŸ”§ Adding missing fields for character: Chloe
llm.js:1060 [NT-Repair] ğŸ”§ Adding missing fields for character: Sarah
llm.js:1060 [NT-Repair] ğŸ”§ Adding missing fields for character: Ling
llm.js:1064 [NT-Repair] Applied repairs, length change: -222
llm.js:1168 [NT-Parse] Before JSON.parse, length: 3041
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "","mentalAge": "","physical": "User character","personality": "Supportive and caring, offering help to Jasmine","sexuality": "","raceE
llm.js:1170 [NT-Parse] Last 100 chars: ity": "","raceEthinity": "Chinese","roleSkills": "","relationships": [],"confidence": 70
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1200 [NT-Parse] âŒ JSON.parse failed: Bad control character in string literal in JSON at position 445 (line 2 column 444)
(anonymous) @ llm.js:1200
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1201 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1201
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1202 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "","mentalAge": "","physical": "User character","personality": "Supportive and caring, offering help to Jasmine","sexuality": "","raceEthnicity": "","roleSkills": "","relationships": ["Jasmine is to John: helper, concerned friend"],"confidence": 85 }, {"name": "Jasmine", "aliases": [], "physical": "", "personality": ""," unexpectedly changed her body and her feelings about him.
      "physicalAge": "","mentalAge": "Young adult","ph
llm.js:1203 [NT-Parse] Text being parsed (last 200 chars): ame, simple blouse and skirt, lactating with damp blouses","personality": "Shy and reserved","sexuality": "","raceEthinity": "Chinese","roleSkills": "","relationships": [],"confidence": 70
    }
  ]
}
llm.js:1276 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:00 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 2/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:61 [STnametracker] Error caught in callSillyTavern: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in callSillyTavern, tracking error: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:00 AM Error in callSillyTavern: {code: 'JSON_PARSE_FAILED', message: 'Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in callSillyTavern
debug.js:64 [STnametracker:llm] 2:01:00 AM
debug.js:64 [STnametracker:Settings] 2:01:01 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:01 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:01:01 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:01 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:01:01 AM
llm.js:1335 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1339 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1339
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1341 [NT-Prompt] After await, type: string
llm.js:1352 [NT-Prompt] knownCharacters type: string
llm.js:1364 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1365 [NT-Prompt] Final rosterStr length: 35
llm.js:1366 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:01:01 AM
debug.js:64 [STnametracker:llm] 2:01:01 AM Calling LLM with prompt (4682 tokens)...
llm.js:1420 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(11711 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:01:01 AM
debug.js:64 [STnametracker:llm] 2:01:01 AM
debug.js:64 [STnametracker:llm] 2:01:01 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:01:13 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:834 [NT-ST-Call] âš ï¸ Response does not start with { - attempting extraction
(anonymous) @ llm.js:834
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:839 [NT-ST-Call] âœ… Extracted JSON from response
llm.js:849 [NT-ST-Call] âš ï¸ Detected potential orphaned strings in response
(anonymous) @ llm.js:849
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:850 [NT-ST-Call] Response will need JSON repair during parsing
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 5196
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "Jasmine",
      "aliases": [],
      "physicalAge": "college-age",
      "physical": "striking Black girl with flawless dark ebony skin, tall and statuesque, toned powerful legs of a runner, heart-shaped bubble butt, bountiful DD-cup breasts, usually confiden
llm.js:1095 [NT-Parse] Last 100 chars: ": ["Ling is to John: classmate, experiencing similar symptoms"],
      "confidence": 70
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 5196
llm.js:1114 [NT-Parse] ğŸ” Found markdown code block, extracting JSON
llm.js:1120 [NT-Parse] ğŸ“„ After markdown extraction, length: 8
llm.js:1132 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 8 -> 0
llm.js:1137 [NT-Parse] ğŸš¨ Response appears to be non-JSON content: ""
(anonymous) @ llm.js:1137
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:61 [STnametracker] Error caught in parseJSONResponse: Error: LLM generated non-JSON response. Response may be censored or malformed.
    at llm.js:1138:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1445:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: Error: LLM generated non-JSON response. Response may be censored or malformed.
    at llm.js:1138:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1445:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
debug.js:55 [STnametracker:ErrorHandler] 2:01:13 AM Error in parseJSONResponse: {code: 'DATA_FORMAT_ERROR', message: 'LLM generated non-JSON response. Response may be censored or malformed.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
debug.js:58 [STnametracker:Main] 2:01:13 AM Data format error, clearing cache
log @ debug.js:58
warn @ debug.js:27
(anonymous) @ index.js:251
withErrorBoundary @ errors.js:101
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:873 [NT-ST-Call] parseJSONResponse returned type: object
llm.js:874 [NT-ST-Call] parseJSONResponse returned value: null
llm.js:875 [NT-ST-Call] parsed.characters exists?: null
llm.js:876 [NT-ST-Call] parsed.characters type: undefined
llm.js:877 [NT-ST-Call] parsed.characters is Array?: false
llm.js:879 [NT-ST-Call] âœ… Successfully parsed on attempt 1 characters: 0
llm.js:880 [NT-ST-Call] Parsed result: null
llm.js:1507 [NT-Cache] Skipping cache because result is empty or has no characters
(anonymous) @ llm.js:1507
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
debug.js:64 [STnametracker:llm] 2:01:13 AM
processing.js:1081 Error processing batch 1: TypeError: Cannot read properties of null (reading 'characters')
    at processing.js:1060:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ processing.js:1081
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
debug.js:55 [STnametracker:Notifications] 2:01:13 AM Error notification: Batch 1 failed: Cannot read properties of null (reading 'characters')
log @ debug.js:55
error @ debug.js:28
error @ notifications.js:73
(anonymous) @ processing.js:1083
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
debug.js:64 [STnametracker:Settings] 2:01:13 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:13 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:01:13 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:13 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:01:13 AM
llm.js:1335 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1339 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1339
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1341 [NT-Prompt] After await, type: string
llm.js:1352 [NT-Prompt] knownCharacters type: string
llm.js:1364 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1365 [NT-Prompt] Final rosterStr length: 35
llm.js:1366 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:01:13 AM
debug.js:64 [STnametracker:llm] 2:01:13 AM Calling LLM with prompt (5295 tokens)...
llm.js:1420 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(13944 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:01:13 AM
debug.js:64 [STnametracker:llm] 2:01:13 AM
debug.js:64 [STnametracker:llm] 2:01:13 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:01:16 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 1414
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "Jasmine",
      "aliases": [],
      "physicalAge": "20s",
      "mentalAge": "20s",
      "physical": "Large, heavy breasts with dark areolas and erect nipples that stand out like erasers; flushed and swollen/engorged breasts; athletic build; dark liquid eye
llm.js:1095 [NT-Parse] Last 100 chars: ps": ["John is to Jasmine: dominant partner, sexual controller"],
      "confidence": 95
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 1414
llm.js:1145 [NT-Parse] Brace search: first={0, last=1413}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 1414
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1064 [NT-Repair] Applied repairs, length change: -166
llm.js:1168 [NT-Parse] Before JSON.parse, length: 1248
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "Jasmine","aliases": [],"physicalAge": "20s","mentalAge": "20s","physical": "Large, heavy breasts with dark areolas and erect nipples that stand out like erasers; flushed 
llm.js:1170 [NT-Parse] Last 100 chars: tionships": ["John is to Jasmine: dominant partner, sexual controller"],"confidence": 95
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1176 [NT-Parse] âœ… Successfully parsed JSON
llm.js:1177 [NT-Parse] Parsed type: object
llm.js:1178 [NT-Parse] Parsed keys: ['characters']
llm.js:1179 [NT-Parse] Full parsed object: {"characters":[{"name":"Jasmine","aliases":[],"physicalAge":"20s","mentalAge":"20s","physical":"Large, heavy breasts with dark areolas and erect nipples that stand out like erasers; flushed and swollen/engorged breasts; athletic build; dark liquid eyes","personality":"Initially prideful and defiant, but becomes increasingly pliant, receptive, and sexually aggressive; possesses brash confidence but is also capable of deep shame; transforms from embarrassed to intensely sexual and demanding","sexu
llm.js:1196 [NT-Parse] âœ… Valid response with 2 characters
llm.js:1197 [NT-Parse] ========== PARSE END (SUCCESS) ==========
llm.js:873 [NT-ST-Call] parseJSONResponse returned type: object
llm.js:874 [NT-ST-Call] parseJSONResponse returned value: {characters: Array(2)}
llm.js:875 [NT-ST-Call] parsed.characters exists?: true
llm.js:876 [NT-ST-Call] parsed.characters type: object
llm.js:877 [NT-ST-Call] parsed.characters is Array?: true
llm.js:879 [NT-ST-Call] âœ… Successfully parsed on attempt 1 characters: 2
llm.js:880 [NT-ST-Call] Parsed result: {"characters":[{"name":"Jasmine","aliases":[],"physicalAge":"20s","mentalAge":"20s","physical":"Large, heavy breasts with dark areolas and erect nipples that stand out like erasers; flushed and swollen/engorged breasts; athletic build; dark liquid eyes","personality":"Initially prideful and defiant,
debug.js:64 [STnametracker:llm] 2:01:16 AM
processing.js:183 [NT-Processing] ğŸŸ  processCharacterData() for: Jasmine
characters.js:27 [NT-Characters] [FindChar] Searching for 'Jasmine': NOT FOUND 
debug.js:64 [STnametracker:characters] 2:01:16 AM
debug.js:64 [STnametracker:characters] 2:01:16 AM
characters.js:745 [NT-Characters] ğŸŸ¦ createCharacter() called for: Jasmine
errors.js:61 [STnametracker] Error caught in createCharacter: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in createCharacter, tracking error: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:16 AM Error in createCharacter: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
createCharacter @ characters.js:743
(anonymous) @ processing.js:230
await in (anonymous)
withErrorBoundary @ errors.js:53
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in createCharacter
errors.js:61 [STnametracker] Error caught in processCharacterData: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in processCharacterData, tracking error: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:16 AM Error in processCharacterData: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in processCharacterData
processing.js:159 [NT-Processing] âŒ Error processing character Jasmine: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ processing.js:159
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:160 [NT-Processing] Error stack: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2063:28)
    at ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2013:35)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7753:38
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7680:17
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:8584:21
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async HTMLButtonElement.<anonymous> (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7188:13)
(anonymous) @ processing.js:160
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:183 [NT-Processing] ğŸŸ  processCharacterData() for: John
characters.js:27 [NT-Characters] [FindChar] Searching for 'John': NOT FOUND 
debug.js:64 [STnametracker:characters] 2:01:16 AM
debug.js:64 [STnametracker:characters] 2:01:16 AM
characters.js:745 [NT-Characters] ğŸŸ¦ createCharacter() called for: John
errors.js:61 [STnametracker] Error caught in createCharacter: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in createCharacter, tracking error: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:16 AM Error in createCharacter: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
createCharacter @ characters.js:743
(anonymous) @ processing.js:230
await in (anonymous)
withErrorBoundary @ errors.js:53
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in createCharacter
errors.js:61 [STnametracker] Error caught in processCharacterData: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in processCharacterData, tracking error: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:16 AM Error in processCharacterData: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in processCharacterData
processing.js:159 [NT-Processing] âŒ Error processing character John: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ processing.js:159
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:160 [NT-Processing] Error stack: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2063:28)
    at ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2013:35)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7753:38
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7680:17
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:8584:21
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async HTMLButtonElement.<anonymous> (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7188:13)
(anonymous) @ processing.js:160
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:166 [NT-Processing] ğŸŸ¢ About to call updateCharacterList()
ui.js:47 [NT-UI] ğŸŸ¡ updateCharacterList() called
ui.js:49 [NT-UI] ğŸŸ¡ getCharacters() returned: []
ui.js:51 [NT-UI] ğŸŸ¡ Character count: 0
processing.js:168 [NT-Processing] ğŸŸ¢ updateCharacterList() returned: undefined
ui.js:162 [NT-Status] Characters: 0, Messages: 478, LastScanned: -1, Pending: 479
processing.js:170 [NT-Processing] ğŸŸ¢ updateStatusDisplay() returned: undefined
processing.js:172 [NT-Processing] ğŸŸ¢ Current characters in storage: {}
debug.js:64 [STnametracker:Settings] 2:01:17 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:17 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:01:17 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:17 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:01:17 AM
llm.js:1335 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1339 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1339
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1341 [NT-Prompt] After await, type: string
llm.js:1352 [NT-Prompt] knownCharacters type: string
llm.js:1364 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1365 [NT-Prompt] Final rosterStr length: 35
llm.js:1366 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:01:17 AM
debug.js:64 [STnametracker:llm] 2:01:17 AM Calling LLM with prompt (4070 tokens)...
llm.js:1420 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(8605 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:01:17 AM
debug.js:64 [STnametracker:llm] 2:01:17 AM
debug.js:64 [STnametracker:llm] 2:01:17 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:01:24 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:834 [NT-ST-Call] âš ï¸ Response does not start with { - attempting extraction
(anonymous) @ llm.js:834
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:839 [NT-ST-Call] âœ… Extracted JSON from response
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 3301
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "physicalAge": "",
      "mentalAge": "",
      "physical": "",
      "personality": "",
      "sexuality": "",
      "raceEthnicity": "",
      "roleSkills": "",
      "relationships": [],
      "confidence": 75
    },
    {
      "name": "Jasmi
llm.js:1095 [NT-Parse] Last 100 chars:       "relationships": ["Jasmine is to John: lover, submissive"],
      "confidence": 90
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 3301
llm.js:1114 [NT-Parse] ğŸ” Found markdown code block, extracting JSON
llm.js:1124 [NT-Parse] ğŸ§¹ Removed loose markdown backticks, length: 3293
llm.js:1132 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 3293 -> 3285
llm.js:1145 [NT-Parse] Brace search: first={0, last=3284}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 3285
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 122 -> 108 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 583 -> 580 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 39 -> 37 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 546 -> 542 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 165 -> 162 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 125 -> 120 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1064 [NT-Repair] Applied repairs, length change: -307
llm.js:1168 [NT-Parse] Before JSON.parse, length: 2978
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","physicalAge": "","mentalAge": "","physical": "","personality": "","sexuality": "","raceEthnicity": "","roleSkills": "","relationships": [],"confidence": 75 }, {"na
llm.js:1170 [NT-Parse] Last 100 chars: eSkills": "","relationships": ["Jasmine is to John: lover, submissive"],"confidence": 90
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1200 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 611 (line 2 column 610)
(anonymous) @ llm.js:1200
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1201 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1201
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1202 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","physicalAge": "","mentalAge": "","physical": "","personality": "","sexuality": "","raceEthnicity": "","roleSkills": "","relationships": [],"confidence": 75 }, {"name": "Jasmine","aliases": ["Jasmine's"],"physicalAge": "","physical": "Dark chocolate skin, flawless and taut over powerful muscles, high and round ass with deep crease, massive, sensitive breasts that lactate creamy milk","personality": "Raw and desperate, brash and confident but vulnerable at time
llm.js:1203 [NT-Parse] Text being parsed (last 200 chars):  heat and pleasure, willing to ask for what she wants","sexuality": "","raceEthnicity": "Black","roleSkills": "","relationships": ["Jasmine is to John: lover, submissive"],"confidence": 90
    }
  ]
}
llm.js:1276 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:24 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 1/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:891 [NT-ST-Call] Waiting 2000ms (~2s) before retry...
llm.js:894 [NT-ST-Call] Waited 2005ms before next attempt
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:01:35 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:834 [NT-ST-Call] âš ï¸ Response does not start with { - attempting extraction
(anonymous) @ llm.js:834
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:839 [NT-ST-Call] âœ… Extracted JSON from response
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 4165
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "aliases": [],
      "physicalAge": "adult",
      "mentalAge": "adult",
      "physical": "tall, muscular, large erect penis",
      "personality": "confident, dominant, attentive to Jasmine's pleasure",
      "sexuality": "heterosexual",
      
llm.js:1095 [NT-Parse] Last 100 chars: ubmissive to his desires, dependent on him for pleasure"
      ],
      "confidence": 85
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 4165
llm.js:1114 [NT-Parse] ğŸ” Found markdown code block, extracting JSON
llm.js:1124 [NT-Parse] ğŸ§¹ Removed loose markdown backticks, length: 4141
llm.js:1132 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 4141 -> 4133
llm.js:1145 [NT-Parse] Brace search: first={0, last=4132}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 4133
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 21 -> 12 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 1361 -> 1324 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 354 -> 336 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 3 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 2 chars
llm.js:1064 [NT-Repair] Applied repairs, length change: -492
llm.js:1168 [NT-Parse] Before JSON.parse, length: 3641
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "adult","mentalAge": "adult","physical": "tall, muscular, large erect penis","personality": "confident, dominant, attentive to Jasmine'
llm.js:1170 [NT-Parse] Last 100 chars: ual partner, submissive to his desires, dependent on him for pleasure"],"confidence": 85
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1200 [NT-Parse] âŒ JSON.parse failed: Unexpected non-whitespace character after JSON at position 977 (line 2 column 976)
(anonymous) @ llm.js:1200
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1201 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1201
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1202 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "John","aliases": [],"physicalAge": "adult","mentalAge": "adult","physical": "tall, muscular, large erect penis","personality": "confident, dominant, attentive to Jasmine's pleasure","sexuality": "heterosexual","raceEthnicity": "not specified","roleSkills": "sexual partner, attentive lover","relationships": ["Jasmine is to John: sexual partner, dominant"],"confidence": 85 }, {"name": "Jasmine","aliases": ["Jasmine"],"physicalAge": "adult","mentalAge": "adult","physic
llm.js:1203 [NT-Parse] Text being parsed (last 200 chars): : "black","roleSkills": "sexual partner, lactating woman","relationships": ["Jasmine is to John: sexual partner, submissive to his desires, dependent on him for pleasure"],"confidence": 85
    }
  ]
}
llm.js:1276 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:35 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 2/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:61 [STnametracker] Error caught in callSillyTavern: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in callSillyTavern, tracking error: NameTrackerError: Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)
    at llm.js:915:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:35 AM Error in callSillyTavern: {code: 'JSON_PARSE_FAILED', message: 'Failed to parse LLM response as JSON after 2 attempts (non-interactive mode)', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in callSillyTavern
debug.js:64 [STnametracker:llm] 2:01:35 AM
debug.js:64 [STnametracker:Settings] 2:01:36 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:36 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:01:36 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:36 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:01:36 AM
llm.js:1335 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1339 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1339
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ llm.js:1445
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1341 [NT-Prompt] After await, type: string
llm.js:1352 [NT-Prompt] knownCharacters type: string
llm.js:1364 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1365 [NT-Prompt] Final rosterStr length: 35
llm.js:1366 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:01:36 AM
debug.js:64 [STnametracker:llm] 2:01:36 AM Calling LLM with prompt (4070 tokens)...
llm.js:1420 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(8605 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:01:36 AM
debug.js:64 [STnametracker:llm] 2:01:36 AM
debug.js:64 [STnametracker:llm] 2:01:36 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:01:38 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 673
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "Jasmine",
      "aliases": [],
      "physicalAge": "",
      "mentalAge": "",
      "physical": "dark chocolate skin, flawless and smooth, muscular back and buttocks, high and round ass with deep crease, massive sensitive breasts that produce milk, muscular 
llm.js:1095 [NT-Parse] Last 100 chars: tionships": ["Jasmine is to John: lover, submissive, desperate"],
      "confidence": 80
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 673
llm.js:1145 [NT-Parse] Brace search: first={0, last=672}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 673
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1064 [NT-Repair] Applied repairs, length change: -81
llm.js:1168 [NT-Parse] Before JSON.parse, length: 592
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "Jasmine","aliases": [],"physicalAge": "","mentalAge": "","physical": "dark chocolate skin, flawless and smooth, muscular back and buttocks, high and round ass with deep c
llm.js:1170 [NT-Parse] Last 100 chars: ","relationships": ["Jasmine is to John: lover, submissive, desperate"],"confidence": 80
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1176 [NT-Parse] âœ… Successfully parsed JSON
llm.js:1177 [NT-Parse] Parsed type: object
llm.js:1178 [NT-Parse] Parsed keys: ['characters']
llm.js:1179 [NT-Parse] Full parsed object: {"characters":[{"name":"Jasmine","aliases":[],"physicalAge":"","mentalAge":"","physical":"dark chocolate skin, flawless and smooth, muscular back and buttocks, high and round ass with deep crease, massive sensitive breasts that produce milk, muscular hips","personality":"brash, confident, proud, becomes vulnerable and grateful, wild, triumphant, dirty talker, desperate, needy, taunting, goading, raw, slutty, transformed","sexuality":"","raceEthnicity":"black","roleSkills":"","relationships":["Ja
llm.js:1196 [NT-Parse] âœ… Valid response with 1 characters
llm.js:1197 [NT-Parse] ========== PARSE END (SUCCESS) ==========
llm.js:873 [NT-ST-Call] parseJSONResponse returned type: object
llm.js:874 [NT-ST-Call] parseJSONResponse returned value: {characters: Array(1)}
llm.js:875 [NT-ST-Call] parsed.characters exists?: true
llm.js:876 [NT-ST-Call] parsed.characters type: object
llm.js:877 [NT-ST-Call] parsed.characters is Array?: true
llm.js:879 [NT-ST-Call] âœ… Successfully parsed on attempt 1 characters: 1
llm.js:880 [NT-ST-Call] Parsed result: {"characters":[{"name":"Jasmine","aliases":[],"physicalAge":"","mentalAge":"","physical":"dark chocolate skin, flawless and smooth, muscular back and buttocks, high and round ass with deep crease, massive sensitive breasts that produce milk, muscular hips","personality":"brash, confident, proud, bec
debug.js:64 [STnametracker:llm] 2:01:38 AM
processing.js:183 [NT-Processing] ğŸŸ  processCharacterData() for: Jasmine
characters.js:27 [NT-Characters] [FindChar] Searching for 'Jasmine': NOT FOUND 
debug.js:64 [STnametracker:characters] 2:01:38 AM
debug.js:64 [STnametracker:characters] 2:01:38 AM
characters.js:745 [NT-Characters] ğŸŸ¦ createCharacter() called for: Jasmine
errors.js:61 [STnametracker] Error caught in createCharacter: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in createCharacter, tracking error: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:38 AM Error in createCharacter: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
createCharacter @ characters.js:743
(anonymous) @ processing.js:230
await in (anonymous)
withErrorBoundary @ errors.js:53
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in createCharacter
errors.js:61 [STnametracker] Error caught in processCharacterData: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in processCharacterData, tracking error: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:38 AM Error in processCharacterData: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in processCharacterData
processing.js:159 [NT-Processing] âŒ Error processing character Jasmine: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ processing.js:159
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:160 [NT-Processing] Error stack: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2063:28)
    at ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2013:35)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7753:38
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7680:17
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:8584:21
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async HTMLButtonElement.<anonymous> (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7188:13)
(anonymous) @ processing.js:160
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:166 [NT-Processing] ğŸŸ¢ About to call updateCharacterList()
ui.js:47 [NT-UI] ğŸŸ¡ updateCharacterList() called
ui.js:49 [NT-UI] ğŸŸ¡ getCharacters() returned: []
ui.js:51 [NT-UI] ğŸŸ¡ Character count: 0
processing.js:168 [NT-Processing] ğŸŸ¢ updateCharacterList() returned: undefined
ui.js:162 [NT-Status] Characters: 0, Messages: 478, LastScanned: -1, Pending: 479
processing.js:170 [NT-Processing] ğŸŸ¢ updateStatusDisplay() returned: undefined
processing.js:172 [NT-Processing] ğŸŸ¢ Current characters in storage: {}
debug.js:64 [STnametracker:Settings] 2:01:39 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:39 AM [NT-LLMConfig] extension_settings keys for module: none
debug.js:64 [STnametracker:Settings] 2:01:39 AM [NT-LLMConfig] llmSource setting: PromiseÂ {<pending>}
debug.js:64 [STnametracker:Settings] 2:01:39 AM [NT-LLMConfig] extension_settings keys for module: none
llm.js:455 [NT-MaxContext] Starting context detection for LLM source: sillytavern
llm.js:455 [NT-MaxContext] Using SillyTavern context
llm.js:455 [NT-MaxContext] Successfully retrieved SillyTavern context
llm.js:455 [NT-MaxContext] Available context properties: maxContext, tokenizers, getTextTokens, getTokenCount, getTokenCountAsync, extensionPrompts, setExtensionPrompt, getTokenizerModel, generateQuietPrompt, getWorldInfoPrompt
llm.js:455 [NT-MaxContext] Method 1: Checking context.maxContext...
llm.js:455 [NT-MaxContext] âœ“ Method 1 SUCCESS: context.maxContext = 65024
llm.js:455 [NT-MaxContext] Detected maxContext: 65024 (type: number)
llm.js:455 [NT-MaxContext] Extension will request max 2048 tokens for analysis responses (15% of context, capped at 2048)
llm.js:455 [NT-MaxContext] Token allocation: maxContext=65024, reserved=3048, available=61976
llm.js:455 [NT-MaxContext] Final detection method: context.maxContext
llm.js:455 [NT-MaxContext] Returning maxPromptLength: 50000
debug.js:64 [STnametracker:llm] 2:01:39 AM
llm.js:1335 [NT-Prompt] getSystemPrompt() returned type: object
llm.js:1339 [NT-Prompt] getSystemPrompt returned Promise, awaiting...
(anonymous) @ llm.js:1339
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1341 [NT-Prompt] After await, type: string
llm.js:1352 [NT-Prompt] knownCharacters type: string
llm.js:1364 [NT-Prompt] Final systemPrompt length: 8112
llm.js:1365 [NT-Prompt] Final rosterStr length: 35
llm.js:1366 [NT-Prompt] systemPrompt preview: Extract character information from messages and return ONLY a JSON object.

/nothink

[CURRENT LOREB
debug.js:64 [STnametracker:llm] 2:01:39 AM
debug.js:64 [STnametracker:llm] 2:01:39 AM Calling LLM with prompt (5708 tokens)...
llm.js:1420 [NT-Prompt] Composition: SYSTEM(8127 chars) + USER(15651 chars) + PREFILL
debug.js:64 [STnametracker:llm] 2:01:39 AM
debug.js:64 [STnametracker:llm] 2:01:39 AM
debug.js:64 [STnametracker:llm] 2:01:39 AM
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:64 [STnametracker:llm] 2:01:44 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:849 [NT-ST-Call] âš ï¸ Detected potential orphaned strings in response
(anonymous) @ llm.js:849
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:850 [NT-ST-Call] Response will need JSON repair during parsing
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 2552
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "Jasmine",
      "aliases": [],
      "physicalAge": "early 20s",
      "physical": "athletic build, dark skin, massive breasts that lactate when aroused, very responsive to sexual stimulation, lactation triggered by oral contact",
      "personality": "confid
llm.js:1095 [NT-Parse] Last 100 chars: hips": ["Jasmine is to John: submissive, lover, sexual partner"],
      "confidence": 75
    }
  ]
}
llm.js:1106 [NT-Parse] After trim, length: 2552
llm.js:1132 [NT-Parse] ğŸ§¹ Removed XML/HTML tags, length change: 2552 -> 2544
llm.js:1145 [NT-Parse] Brace search: first={0, last=2543}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 2544
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 85 -> 79 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 18 -> 7 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 20 -> 11 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 12 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 9 -> 2 chars
llm.js:1064 [NT-Repair] Applied repairs, length change: -259
llm.js:1168 [NT-Parse] Before JSON.parse, length: 2285
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "Jasmine","aliases": [],"physicalAge": "early 20s","physical": "athletic build, dark skin, massive breasts that lactate when aroused, very responsive to sexual stimulation
llm.js:1170 [NT-Parse] Last 100 chars: lationships": ["Jasmine is to John: submissive, lover, sexual partner"],"confidence": 75
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1200 [NT-Parse] âŒ JSON.parse failed: Expected double-quoted property name in JSON at position 410 (line 2 column 409)
(anonymous) @ llm.js:1200
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1201 [NT-Parse] âŒ Error at position: SyntaxError
(anonymous) @ llm.js:1201
withErrorBoundary @ errors.js:53
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:1202 [NT-Parse] Text being parsed (first 500 chars): {
  "characters": [ {"name": "Jasmine","aliases": [],"physicalAge": "early 20s","physical": "athletic build, dark skin, massive breasts that lactate when aroused, very responsive to sexual stimulation, lactation triggered by oral contact","personality": "confident initially but becomes pliant and submissive during sexual activity, becomes lost in sensation and pleasure, willing to explore new sexual acts", lactation is triggered by oral contact, very responsive to sexual stimulation",
      "per
llm.js:1203 [NT-Parse] Text being parsed (last 200 chars): ,"sexuality": "sexually open-minded, bicurious","raceEthnicity": "Black","roleSkills": "athlete","relationships": ["Jasmine is to John: submissive, lover, sexual partner"],"confidence": 75
    }
  ]
}
llm.js:1276 [NT-Parse] ========== PARSE END (FAILED) ==========
errors.js:61 [STnametracker] Error caught in parseJSONResponse: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in parseJSONResponse, tracking error: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:44 AM Error in parseJSONResponse: {code: undefined, message: 'Failed to parse LLM response as JSON.', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
parseJSONResponse @ llm.js:1075
(anonymous) @ llm.js:872
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in parseJSONResponse
llm.js:885 [NT-ST-Call] âŒ Attempt 1/2 failed: Failed to parse LLM response as JSON.
(anonymous) @ llm.js:885
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:886 [NT-ST-Call] Error details: NameTrackerError: Failed to parse LLM response as JSON.
    at llm.js:1288:1
    at ErrorHandler.withErrorBoundary (errors.js:53:1)
    at parseJSONResponse (llm.js:1075:29)
    at llm.js:872:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async llm.js:1431:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1057:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ llm.js:886
await in (anonymous)
withErrorBoundary @ errors.js:53
callSillyTavern @ llm.js:707
(anonymous) @ llm.js:1431
await in (anonymous)
withErrorBoundary @ errors.js:53
callLLMAnalysis @ llm.js:1304
(anonymous) @ processing.js:1057
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
llm.js:891 [NT-ST-Call] Waiting 2000ms (~2s) before retry...
llm.js:894 [NT-ST-Call] Waited 2008ms before next attempt
script.js:4002 [TempResponseLength] Saved original response length: 16256
eventemitter.js:135 Event emitted: generate_after_combine_prompts
eventemitter.js:135 Event emitted: text_completion_settings_ready
script.js:4023 [TempResponseLength] Restored original response length: 16256
debug.js:61 [STnametracker:Notifications] 2:01:49 AM Warning notification: Scan aborted by user
debug.js:64 [STnametracker:llm] 2:01:49 AM
llm.js:828 [NT-ST-Call] ğŸ” Pre-validation checks...
llm.js:1076 [NT-Parse] ========== PARSE START ==========
llm.js:1077 [NT-Parse] Input type: string
llm.js:1078 [NT-Parse] Input is null?: false
llm.js:1079 [NT-Parse] Input is undefined?: false
llm.js:1092 [NT-Parse] Input length: 1234
llm.js:1094 [NT-Parse] First 300 chars: {
  "characters": [
    {
      "name": "John",
      "physical": "muscular, strong, large genitals",
      "sexuality": "heterosexual",
      "roleSkills": "dominant partner during sex",
      "relationships": []
    },
    {
      "name": "Jasmine",
      "physical": "dark-skinned, long dark hair,
llm.js:1095 [NT-Parse] Last 100 chars:  of oral sex",
      "relationships": ["Jasmine is to John: submissive sex partner"]
    }
  ]
}
```
llm.js:1106 [NT-Parse] After trim, length: 1234
llm.js:1114 [NT-Parse] ğŸ” Found markdown code block, extracting JSON
llm.js:1120 [NT-Parse] ğŸ“„ After markdown extraction, length: 606
llm.js:1145 [NT-Parse] Brace search: first={0, last=605}
llm.js:1152 [NT-Parse] Text before JSON: 
llm.js:1153 [NT-Parse] Extracted JSON length: 606
llm.js:1154 [NT-Parse] Text after JSON: 
llm.js:985 [NT-Repair] Starting JSON repair...
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 16 -> 5 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 24 -> 9 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1039 [NT-Repair] ğŸ§¹ Cleaned control characters: 8 -> 1 chars
llm.js:1064 [NT-Repair] Applied repairs, length change: -89
llm.js:1168 [NT-Parse] Before JSON.parse, length: 517
llm.js:1169 [NT-Parse] First 200 chars: {
  "characters": [ {"name": "John","physical": "muscular, strong, large genitals","sexuality": "heterosexual","roleSkills": "dominant partner during sex","relationships": [] }, {"name": "Jasmine","ph
llm.js:1170 [NT-Parse] Last 100 chars: an, capable of oral sex","relationships": ["Jasmine is to John: submissive sex partner"]
    }
  ]
}
llm.js:1173 [NT-Parse] Attempting JSON.parse...
llm.js:1176 [NT-Parse] âœ… Successfully parsed JSON
llm.js:1177 [NT-Parse] Parsed type: object
llm.js:1178 [NT-Parse] Parsed keys: ['characters']
llm.js:1179 [NT-Parse] Full parsed object: {"characters":[{"name":"John","physical":"muscular, strong, large genitals","sexuality":"heterosexual","roleSkills":"dominant partner during sex","relationships":[]},{"name":"Jasmine","physical":"dark-skinned, long dark hair, large breasts that lactate milk, well-fucked swollen sex, large sensitive clit","physicalAge":"not specified","sexuality":"heterosexual","roleSkills":"athletic, lactating woman, capable of oral sex","relationships":["Jasmine is to John: submissive sex partner"]}]}
llm.js:1196 [NT-Parse] âœ… Valid response with 2 characters
llm.js:1197 [NT-Parse] ========== PARSE END (SUCCESS) ==========
llm.js:873 [NT-ST-Call] parseJSONResponse returned type: object
llm.js:874 [NT-ST-Call] parseJSONResponse returned value: {characters: Array(2)}
llm.js:875 [NT-ST-Call] parsed.characters exists?: true
llm.js:876 [NT-ST-Call] parsed.characters type: object
llm.js:877 [NT-ST-Call] parsed.characters is Array?: true
llm.js:879 [NT-ST-Call] âœ… Successfully parsed on attempt 2 characters: 2
llm.js:880 [NT-ST-Call] Parsed result: {"characters":[{"name":"John","physical":"muscular, strong, large genitals","sexuality":"heterosexual","roleSkills":"dominant partner during sex","relationships":[]},{"name":"Jasmine","physical":"dark-skinned, long dark hair, large breasts that lactate milk, well-fucked swollen sex, large sensitive 
debug.js:64 [STnametracker:llm] 2:01:49 AM
processing.js:183 [NT-Processing] ğŸŸ  processCharacterData() for: John
characters.js:27 [NT-Characters] [FindChar] Searching for 'John': NOT FOUND 
debug.js:64 [STnametracker:characters] 2:01:49 AM
debug.js:64 [STnametracker:characters] 2:01:49 AM
characters.js:745 [NT-Characters] ğŸŸ¦ createCharacter() called for: John
errors.js:61 [STnametracker] Error caught in createCharacter: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in createCharacter, tracking error: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:49 AM Error in createCharacter: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
createCharacter @ characters.js:743
(anonymous) @ processing.js:230
await in (anonymous)
withErrorBoundary @ errors.js:53
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in createCharacter
errors.js:61 [STnametracker] Error caught in processCharacterData: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in processCharacterData, tracking error: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:49 AM Error in processCharacterData: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in processCharacterData
processing.js:159 [NT-Processing] âŒ Error processing character John: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ processing.js:159
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:160 [NT-Processing] Error stack: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2063:28)
    at ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2013:35)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7753:38
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7680:17
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:8584:21
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async HTMLButtonElement.<anonymous> (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7188:13)
(anonymous) @ processing.js:160
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:183 [NT-Processing] ğŸŸ  processCharacterData() for: Jasmine
characters.js:27 [NT-Characters] [FindChar] Searching for 'Jasmine': NOT FOUND 
debug.js:64 [STnametracker:characters] 2:01:49 AM
debug.js:64 [STnametracker:characters] 2:01:49 AM
characters.js:745 [NT-Characters] ğŸŸ¦ createCharacter() called for: Jasmine
errors.js:61 [STnametracker] Error caught in createCharacter: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in createCharacter, tracking error: ReferenceError: validateCharacterData is not defined
    at characters.js:751:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:49 AM Error in createCharacter: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
createCharacter @ characters.js:743
(anonymous) @ processing.js:230
await in (anonymous)
withErrorBoundary @ errors.js:53
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in createCharacter
errors.js:61 [STnametracker] Error caught in processCharacterData: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
errors.js:74 [STnametracker] All retries failed in processCharacterData, tracking error: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
debug.js:55 [STnametracker:ErrorHandler] 2:01:49 AM Error in processCharacterData: {code: 'UNKNOWN_ERROR', message: 'validateCharacterData is not defined', context: {â€¦}}
log @ debug.js:55
error @ debug.js:28
trackError @ errors.js:141
withErrorBoundary @ errors.js:75
await in withErrorBoundary
processCharacterData @ processing.js:182
(anonymous) @ processing.js:157
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
errors.js:83 [STnametracker] Notifying user of error in processCharacterData
processing.js:159 [NT-Processing] âŒ Error processing character Jasmine: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (errors.js:125:1)
    at ErrorHandler.withErrorBoundary (errors.js:75:1)
    at async processing.js:230:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:157:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async processing.js:1061:1
    at async ErrorHandler.withErrorBoundary (errors.js:53:1)
    at async HTMLButtonElement.<anonymous> (ui.js:800:1)
(anonymous) @ processing.js:159
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:160 [NT-Processing] Error stack: NameTrackerError: validateCharacterData is not defined
    at ErrorHandler.trackError (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2063:28)
    at ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:2013:35)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7753:38
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7680:17
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:8584:21
    at async ErrorHandler.withErrorBoundary (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:1991:32)
    at async HTMLButtonElement.<anonymous> (http://192.168.0.4:8008/scripts/extensions/third-party/STnametracker/index.js:7188:13)
(anonymous) @ processing.js:160
await in (anonymous)
withErrorBoundary @ errors.js:53
processAnalysisResults @ processing.js:140
(anonymous) @ processing.js:1061
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
processing.js:166 [NT-Processing] ğŸŸ¢ About to call updateCharacterList()
ui.js:47 [NT-UI] ğŸŸ¡ updateCharacterList() called
ui.js:49 [NT-UI] ğŸŸ¡ getCharacters() returned: []
ui.js:51 [NT-UI] ğŸŸ¡ Character count: 0
processing.js:168 [NT-Processing] ğŸŸ¢ updateCharacterList() returned: undefined
ui.js:162 [NT-Status] Characters: 0, Messages: 478, LastScanned: -1, Pending: 479
processing.js:170 [NT-Processing] ğŸŸ¢ updateStatusDisplay() returned: undefined
processing.js:172 [NT-Processing] ğŸŸ¢ Current characters in storage: {}
debug.js:64 [STnametracker:processing] 2:01:50 AM
settings.js:128 [STnametracker] extension_settings not available for saving
(anonymous) @ settings.js:128
withErrorBoundary @ errors.js:53
set_settings @ settings.js:125
(anonymous) @ processing.js:1092
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
settings.js:128 [STnametracker] extension_settings not available for saving
(anonymous) @ settings.js:128
withErrorBoundary @ errors.js:53
set_settings @ settings.js:125
(anonymous) @ processing.js:1096
await in (anonymous)
withErrorBoundary @ errors.js:53
scanEntireChat @ processing.js:981
(anonymous) @ ui.js:800
dispatch @ jquery-3.5.1.min.js:2
(anonymous) @ jquery-3.5.1.min.js:2
ui.js:47 [NT-UI] ğŸŸ¡ updateCharacterList() called
ui.js:49 [NT-UI] ğŸŸ¡ getCharacters() returned: []
ui.js:51 [NT-UI] ğŸŸ¡ Character count: 0
ui.js:162 [NT-Status] Characters: 0, Messages: 478, LastScanned: -1, Pending: 479
debug.js:61 [STnametracker:Notifications] 2:01:50 AM Warning notification: Full chat scan complete!

Messages: 478
Batches: 3/48
Characters found: 2
Failed: 1
ui.js:47 [NT-UI] ğŸŸ¡ updateCharacterList() called
ui.js:49 [NT-UI] ğŸŸ¡ getCharacters() returned: []
ui.js:51 [NT-UI] ğŸŸ¡ Character count: 0
ui.js:162 [NT-Status] Characters: 0, Messages: 478, LastScanned: -1, Pending: 479
